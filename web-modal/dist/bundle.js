!function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";function s(t){return"touchstart"===t.type||"mousedown"===t.type&&0===t.button}function o(t){return"touchend"===t.type||"touchcancel"===t.type?t.changedTouches[0]:t.type.startsWith("touch")?t.targetTouches[0]:t}i.r(e);class n{constructor(t,e=!0,i=!0){this.element=t,this.dragX=e,this.dragY=i,this.globalListeners=new Map}start(t){this.onMousedown(t)}destroy(){this.removeEventListeners()}onMousedown(t){if(s(t)&&(this.dragX||this.dragY)){const e=o(t);this.initDrag(e.pageX,e.pageY),this.addEventListeners(t),this.element.dispatchEvent(new CustomEvent("dragStart",{detail:t}))}}onMousemove(t){const e=o(t);this.onDrag(e.pageX,e.pageY),this.element.dispatchEvent(new CustomEvent("dragMove",{detail:t}))}onMouseup(t){this.endDrag(),this.removeEventListeners(),this.element.dispatchEvent(new CustomEvent("dragEnd",{detail:t}))}addEventListeners(t){const e=t.type.startsWith("touch"),i=e?"touchmove":"mousemove",s=e?"touchend":"mouseup";this.globalListeners.set(i,{handler:this.onMousemove.bind(this),options:!1}).set(s,{handler:this.onMouseup.bind(this),options:!1}),this.globalListeners.forEach((t,e)=>{window.document.addEventListener(e,t.handler,t.options)})}removeEventListeners(){this.globalListeners.forEach((t,e)=>{window.document.removeEventListener(e,t.handler,t.options)})}initDrag(t,e){this.isDragging=!0,this.lastPageX=t,this.lastPageY=e,this.element.classList.add("dragging")}onDrag(t,e){if(this.isDragging){const i=t-this.lastPageX,s=e-this.lastPageY,o=this.element.getBoundingClientRect();this.element.style.left=o.left+i+"px",this.element.style.top=o.top+s+"px",this.lastPageX=t,this.lastPageY=e}}endDrag(){this.isDragging=!1,this.element.classList.remove("dragging")}}class h{constructor(t,e=!0,i=!0,s=!0,o=!1){this.element=t,this.south=e,this.east=i,this.southEast=s,this.ghost=o,this.startListeners=new Map,this.globalListeners=new Map,this.viewInit()}viewInit(){this.south&&this.createHandle("resize-handle-s"),this.east&&this.createHandle("resize-handle-e"),this.southEast&&this.createHandle("resize-handle-se");const t=window.getComputedStyle(this.element);this.minWidth=parseFloat(t.minWidth),this.maxWidth=parseFloat(t.maxWidth),this.minHeight=parseFloat(t.minHeight),this.maxHeight=parseFloat(t.maxHeight)}destroy(){this.removeEventListeners()}addEventListeners(){this.startListeners.set("mousedown",{handler:this.onMousedown.bind(this),options:!1}).set("touchstart",{handler:this.onMousedown.bind(this),options:!1}),this.startListeners.forEach((t,e)=>{this.element.addEventListener(e,t.handler,t.options)})}removeEventListeners(){this.startListeners.forEach((t,e)=>{this.element.removeEventListener(e,t.handler,t.options)})}onMousedown(t){if(!s(t))return;const e=t.target.classList,i=e.contains("resize-handle-s"),n=e.contains("resize-handle-e"),h=e.contains("resize-handle-se"),a=o(t),l=this.element.clientWidth,r=this.element.clientHeight,d=a.screenX,m=a.screenY,c=t.type.startsWith("touch"),g=c?"touchmove":"mousemove",u=c?"touchend":"mouseup";(i||n||h)&&(this.initResize(t,i,n,h),this.globalListeners.set(g,{handler:this.onMove.bind(this,l,r,d,m),options:!1}).set(u,{handler:this.onMouseup.bind(this),options:!1}),this.globalListeners.forEach((t,e)=>{window.document.addEventListener(e,t.handler,t.options)}))}onMove(t,e,i,s,n){const h=o(n),a=h.screenX-i,l=h.screenY-s;this.newWidth=t+a,this.newHeight=e+l,this.resizeWidth(h),this.resizeHeight(h)}onMouseup(t){this.endResize(t),this.globalListeners.forEach((t,e)=>{window.document.removeEventListener(e,t.handler,t.options)})}createHandle(t){const e=document.createElement("span");e.className=t,this.element.appendChild(e)}initResize(t,e,i,s){e&&(this.resizingS=!0),i&&(this.resizingE=!0),s&&(this.resizingSE=!0),this.element.classList.add("resizing"),this.newWidth=this.element.clientWidth,this.newHeight=this.element.clientHeight,t.stopPropagation(),this.element.dispatchEvent(new CustomEvent("resizeBegin"))}endResize(t){this.resizingS=!1,this.resizingE=!1,this.resizingSE=!1,this.element.classList.remove("resizing");const e={event:o(t),width:this.newWidth,height:this.newHeight};this.element.dispatchEvent(new CustomEvent("resizeEnd",{detail:e}))}resizeWidth(t){const e=!this.minWidth||this.newWidth>=this.minWidth,i=!this.maxWidth||this.newWidth<=this.maxWidth;if((this.resizingSE||this.resizingE)&&e&&i){this.ghost||(this.element.style.width=`${this.newWidth}px`);const e={event:t,width:this.newWidth,height:this.newHeight,direction:"horizontal"};this.element.dispatchEvent(new CustomEvent("resizing",{detail:e}))}}resizeHeight(t){const e=!this.minHeight||this.newHeight>=this.minHeight,i=!this.maxHeight||this.newHeight<=this.maxHeight;if((this.resizingSE||this.resizingS)&&e&&i){this.ghost||(this.element.style.height=`${this.newHeight}px`);const e={event:t,width:this.newWidth,height:this.newHeight,direction:"vertical"};this.element.dispatchEvent(new CustomEvent("resizing",{detail:e}))}}}i.d(e,"ModalComponent",(function(){return a}));class a extends HTMLElement{constructor(){super(),this.scrollTopEnable=!0,this.maximizable=!0,this.backdrop=!0,this.listeners=[];const t=document.createElement("template");t.innerHTML='\n  <div class="ui-modal-overlay" id="modalOverlay"></div>\n  <div class="ui-modal" tabindex="-1" role="dialog" id="modalRoot">\n    <div class="ui-modal-header" id="modalHeader">\n      <div class="ui-titlebar" id="titlebar">\n      </div>\n      <div class="ui-controlbar">\n        <i class="ui-icon" id="maximizeIcon"></i>\n        <i class="ui-icon dt-icon-close" id="closeIcon"></i>\n      </div>\n    </div>\n    <div class="ui-modal-body" id="modalBody"></div>\n    <div class="ui-modal-footer" id="modalFooter"></div>\n  </div>\n  ',this.appendChild(t.content.cloneNode(!0)),this.modalOverlay=this.querySelector("#modalOverlay"),this.modalRoot=this.querySelector("#modalRoot"),this.modalBody=this.querySelector("#modalBody"),this.modalHeader=this.querySelector("#modalHeader"),this.modalFooter=this.querySelector("#modalFooter"),this.maximizeIcon=this.querySelector("#maximizeIcon"),this.closeIcon=this.querySelector("#closeIcon"),this.titlebar=this.querySelector("#titlebar"),this.setDialogStyles(),this.setMaximizeIconStyles(),this.renderContent(),this.draggableDirective=new n(this.modalRoot),this.resizableDirective=new h(this.modalRoot)}get open(){return this.hasAttribute("open")}set open(t){t?this.setAttribute("open",""):this.removeAttribute("open")}disconnectedCallback(){this.removeEventListeners(),this.draggableDirective.destroy(),this.resizableDirective.destroy()}static get observedAttributes(){return["open"]}attributeChangedCallback(t,e,i){switch(t){case"open":this.open?this.show():this.hide()}}addEventListeners(){this.listeners=[{eventName:"click",target:this.closeIcon,handler:this.onCloseIconClick.bind(this)},{eventName:"click",target:this.maximizeIcon,handler:this.toggleMaximize.bind(this)},{eventName:"mousedown",target:this.modalHeader,handler:this.initDrag.bind(this)},{eventName:"touchstart",target:this.modalHeader,handler:this.initDrag.bind(this)},{eventName:"mousedown",target:this.modalRoot,handler:this.moveOnTop.bind(this)},{eventName:"touchstart",target:this.modalRoot,handler:this.moveOnTop.bind(this)},{eventName:"keydown",target:this,handler:this.onKeyDown.bind(this)},{eventName:"resizing",target:this.modalRoot,handler:this.onResize.bind(this)},{eventName:"resize",target:window,handler:this.onWindowResize.bind(this)}],this.listeners.forEach(t=>{t.target.addEventListener(t.eventName,t.handler)})}removeEventListeners(){this.listeners.forEach(t=>{t.target.removeEventListener(t.eventName,t.handler)})}renderContent(){const t=this.querySelector('[select="app-modal-header"]'),e=this.querySelector('[select="app-modal-body"]'),i=this.querySelector('[select="app-modal-footer"]');t&&this.titlebar.appendChild(t.content),e&&this.modalBody.appendChild(e.content),i&&this.modalFooter.appendChild(i.content)}show(){this.addEventListeners(),this.resizableDirective.addEventListeners(),this.center(),this.visible=!0,setTimeout(()=>{this.modalRoot.focus(),this.scrollTopEnable&&(this.modalBody.scrollTop=0)},1),this.setDialogStyles()}hide(){this.removeEventListeners(),this.resizableDirective.destroy(),this.visible=!1,this.dispatchEvent(new CustomEvent("closeModal")),this.focusLastModal(),this.setDialogStyles()}center(){let t=this.modalRoot.offsetWidth,e=this.modalRoot.offsetHeight;0===t&&0===e&&(this.modalRoot.style.visibility="hidden",this.modalRoot.style.display="block",t=this.modalRoot.offsetWidth,e=this.modalRoot.offsetHeight,this.modalRoot.style.display="none",this.modalRoot.style.visibility="visible");const i=Math.max((window.innerWidth-t)/2,0),s=Math.max((window.innerHeight-e)/2,0);this.modalRoot.style.left=i+"px",this.modalRoot.style.top=s+"px"}initDrag(t){t.target!==this.closeIcon&&(this.maximized||this.draggableDirective.start(t))}onResize(t){"vertical"===t.detail.direction&&this.calcBodyHeight()}calcBodyHeight(){const t=this.modalHeader.offsetHeight+this.modalFooter.offsetHeight,e=this.modalRoot.offsetHeight-t;this.modalBody.style.height=e+"px",this.modalBody.style.maxHeight="none"}getMaxModalIndex(){return function(t="body *"){return Array.from(document.querySelectorAll(t)).map(t=>parseFloat(window.getComputedStyle(t).zIndex)).filter(t=>!isNaN(t)).sort((t,e)=>t-e).pop()||0}(".ui-modal")}focusLastModal(){const t=this.parentElement.closest(".ui-modal");t&&t.focus()}toggleMaximize(t){this.maximized?this.revertMaximize():this.maximize(),t.preventDefault(),this.setMaximizeIconStyles()}maximize(){this.preMaximizePageX=parseFloat(this.modalRoot.style.top),this.preMaximizePageY=parseFloat(this.modalRoot.style.left),this.preMaximizeRootWidth=this.modalRoot.offsetWidth,this.preMaximizeRootHeight=this.modalRoot.offsetHeight,this.preMaximizeBodyHeight=this.modalBody.offsetHeight,this.modalRoot.style.top="0px",this.modalRoot.style.left="0px",this.modalRoot.style.width="100vw",this.modalRoot.style.height="100vh";const t=this.modalHeader.offsetHeight+this.modalFooter.offsetHeight;this.modalBody.style.height="calc(100vh - "+t+"px)",this.modalBody.style.maxHeight="none",this.maximized=!0}revertMaximize(){this.modalRoot.style.top=this.preMaximizePageX+"px",this.modalRoot.style.left=this.preMaximizePageY+"px",this.modalRoot.style.width=this.preMaximizeRootWidth+"px",this.modalRoot.style.height=this.preMaximizeRootHeight+"px",this.modalBody.style.height=this.preMaximizeBodyHeight+"px",this.maximized=!1}moveOnTop(){if(!this.backdrop){const t=this.getMaxModalIndex();let e=parseFloat(window.getComputedStyle(this.modalRoot).zIndex)||0;e<=t&&(e=t+1,this.modalRoot.style.zIndex=e.toString())}}setDialogStyles(){this.modalRoot.style.display=this.visible?"block":"none",this.modalOverlay.style.display=this.visible&&this.backdrop?"block":"none"}setMaximizeIconStyles(){this.maximizeIcon.style.display=this.maximizable?"block":"none";const t=this.maximized?"dt-icon-normalize":"dt-icon-maximize";this.maximizeIcon.className="ui-icon "+t}onCloseIconClick(){this.hide()}onKeyDown(t){t.preventDefault(),t.stopPropagation(),"Escape"==t.key&&this.hide()}onWindowResize(){this.center()}}customElements.define("web-modal",a)}]);