(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{124:function(e,t,s){"use strict";class o extends HTMLElement{constructor(){super(),this.series=[]}set points(e){this.init(),this.series=this.prepareSeries(e),this.render()}connectedCallback(){this.classList.add("states-line")}init(){this.dateFrom||(this.dateFrom=new Date),this.dateTo||(this.dateTo=new Date(this.dateFrom.getFullYear(),this.dateFrom.getMonth(),this.dateFrom.getDate()+1))}prepareSeries(e){return e.map(e=>this.prepareLines(e))}prepareLines(e){const t=this.getDiffTime(this.dateFrom,this.dateTo),s=e.sort((e,t)=>e.dt.getTime()-t.dt.getTime()),o=[];return s.forEach((e,a)=>{let n=s[a].dt,r=a===s.length-1?this.dateTo:s[a+1].dt;n<this.dateFrom&&(n=this.dateFrom),r>this.dateTo&&(r=this.dateTo);const i=this.getDiffTime(n,r),l=this.formatTime(i),d={dt:e.dt,dateFrom:n,dateTo:r,time:i,percent:i/t*100,class:a%2==0?"state-bottom":"state-top",color:e.color,tooltip:`${e.label} (${l})`};i>0&&o.push(d)}),this.checkPercent(o),o}getDiffTime(e,t){return(t.getTime()-e.getTime())/1e3}checkPercent(e){const t=Math.round(e.reduce((e,t)=>e+t.percent,0));t>100&&t<100&&console.log("StateLine percent: "+t)}formatTime(e){if(86400===e)return"24:00:00";if(e<86400){const t=new Date(null);return t.setSeconds(e),t.toISOString().substr(11,8)}{const t=Math.floor(e/86400);e-=3600*t*24;const s=Math.floor(e/3600);e-=3600*s;const o=Math.floor(e/60);return t+" "+s+":"+o+":"+(e-=60*o)}}render(){const e=[];this.series.forEach(t=>{const s=document.createElement("div");s.classList.add("state-line"),e.push(s),t.forEach(e=>{const t=document.createElement("div");t.classList.add("state-line-col"),t.classList.add(e.class),t.style.width=e.percent+"%",t.style.backgroundColor=e.color,t.title=e.tooltip,s.append(t)})}),this.innerHTML="",this.append(...e)}}customElements.define("web-states-line",o)},57:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return o}));s(124);class o{get template(){return'<div class="states-line-demo1">\n      <web-states-line id="states-line1"></web-states-line>\n    </div>\n    <p>Custom CSS</p>\n    <div class="states-line-demo2">\n      <web-states-line id="states-line2"></web-states-line>\n    </div>'}load(){const e=[[{dt:new Date(2020,5,1,0,0),label:"stop",color:"DarkSalmon"},{dt:new Date(2020,5,1,4,10),label:"work",color:"DarkSeaGreen"},{dt:new Date(2020,5,1,8,33),label:"stop",color:"DarkSalmon"},{dt:new Date(2020,5,1,12,22),label:"work",color:"DarkSeaGreen"},{dt:new Date(2020,5,1,16,45),label:"stop",color:"DarkSalmon"},{dt:new Date(2020,5,1,20,0),label:"work",color:"DarkSeaGreen"}],[{dt:new Date(2020,5,1,0,0),label:"stop",color:"DarkSalmon"},{dt:new Date(2020,5,1,12,0),label:"work",color:"DarkSeaGreen"}]],t=document.querySelector("#states-line1");t.dateFrom=new Date(2020,5,1),t.dateTo=new Date(2020,5,2),t.points=e;const s=document.querySelector("#states-line2");s.dateFrom=new Date(2020,5,1),s.dateTo=new Date(2020,5,2),s.points=e}}}}]);