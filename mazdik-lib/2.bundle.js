(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{18:function(e,t,n){"use strict";n.r(t);var s=n(22),i=n.n(s),o=n(20),d=n(0);class r extends HTMLElement{constructor(){super(),this._menu=[],this.listeners=[],this.listMenu=document.createElement("ul"),this.appendChild(this.listMenu),this.classList.add("dt-context-menu"),this.dropdown=new o.a(this),this.addEventListeners()}get menu(){return this._menu}set menu(e){this._menu=e,this.render()}disconnectedCallback(){this.dropdown.removeEventListeners(),this.listeners.forEach(e=>{e.target.removeEventListener(e.eventName,e.handler)})}addEventListeners(){this.listeners=[{eventName:"open",target:this,handler:this.onOpenChange.bind(this)},{eventName:"resize",target:window,handler:this.onWindowResize.bind(this)},{eventName:"click",target:this.listMenu,handler:this.onClickListMenu.bind(this)}],this.listeners.forEach(e=>{e.target.addEventListener(e.eventName,e.handler)})}onWindowResize(){this.dropdown.closeDropdown()}getPositionMenu(e,t){const{height:n,width:s}=this.getHiddenElementOuterSizes(this);return e+s-window.pageXOffset>window.innerWidth&&(e-=s),t+n-window.pageYOffset>window.innerHeight&&(t-=n),e<document.body.scrollLeft&&(e=document.body.scrollLeft),t<document.body.scrollTop&&(t=document.body.scrollTop),{left:e,top:t}}getHiddenElementOuterSizes(e){if(e.offsetParent)return{height:e.offsetHeight,width:e.offsetWidth};e.style.visibility="hidden",e.style.display="block";const t=e.offsetHeight,n=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",{height:t,width:n}}show(e){let t;this.eventArgs=e,Object(d.h)(e.left)||Object(d.h)(e.top)?t=this.getPositionMenu(e.originalEvent.pageX+1,e.originalEvent.pageY+1):(t=this.getPositionMenu(e.left,e.top),this.dropdown.selectContainerClicked=!0),e.originalEvent.preventDefault(),this.top===t.top&&this.left===t.left?this.dropdown.toggleDropdown():(this.top=t.top,this.left=t.left,this.dropdown.closeDropdown(),this.dropdown.openDropdown())}hide(){this.dropdown.closeDropdown()}itemClick(e,t){t.disabled?e.preventDefault():(t.url||e.preventDefault(),t.command&&t.command(this.eventArgs.data),this.dropdown.closeDropdown())}updateStyles(){this.style.left=this.left+"px",this.style.top=this.top+"px",this.style.display=this.dropdown.isOpen&&this.menu.length>0?"block":"none"}onOpenChange(){this.updateStyles()}render(){const e=this.createListContent();this.listMenu.textContent="",this.listMenu.append(...e),this.updateStyles()}createListContent(){const e=[];return this.menu.forEach((t,n)=>{const s=document.createElement("li");t.disabled&&s.classList.add("disabled");const i=document.createElement("a");i.href=t.url||"#",i.textContent=t.label,i.dataset.id=n.toString(),s.append(i);const o=document.createElement("span");o.classList.add("context-menu-sep"),i.prepend(o);const d=document.createElement("i");t.icon&&d.classList.add(t.icon),i.prepend(d),e.push(s)}),e}getDataId(e){const t="A"===e.tagName?e:e.closest("a");return t&&t.dataset.id?t.dataset.id:null}onClickListMenu(e){const t=this.getDataId(e.target);if(null!=t){const n=parseInt(t,10);this.itemClick(e,this.menu[n])}}}customElements.define("web-context-menu",r),n.d(t,"default",(function(){return l}));class l{get template(){return i.a}load(){const e=[{label:"View Task",command:e=>console.log("View "+e)},{label:"Edit Task",command:e=>console.log("Edit "+e)},{label:"Delete Task",command:e=>console.log("Delete "+e),disabled:!0}],t=document.querySelector("#contextMenu");t.menu=e,document.querySelector("#button").addEventListener("click",e=>{!function(e){const n=e.target.offsetLeft+e.target.offsetWidth,s=e.target.offsetTop;t.show({originalEvent:e,data:"test",left:n,top:s})}(e)})}}},20:function(e,t,n){"use strict";var s=n(0);class i{constructor(e){this.element=e,this.addEventListeners()}addEventListeners(){this.clickListener=this.onClick.bind(this),this.element.addEventListener("click",this.clickListener),this.windowClickListener=this.onWindowClick.bind(this),window.document.addEventListener("click",this.windowClickListener),this.windowKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.windowKeydownListener)}removeEventListeners(){this.element.removeEventListener("click",this.clickListener),window.document.removeEventListener("click",this.windowClickListener),window.document.removeEventListener("keydown",this.windowKeydownListener)}onClick(){this.selectContainerClicked=!0}onWindowClick(){this.selectContainerClicked||this.closeDropdown(),this.selectContainerClicked=!1}onKeyDown(e){e.keyCode!==s.a.ESCAPE&&"Escape"!==e.key||this.closeDropdown()}toggleDropdown(){this.isOpen?this.closeDropdown():this.openDropdown()}openDropdown(){this.isOpen||(this.isOpen=!0,this.element.dispatchEvent(new CustomEvent("open",{detail:this.isOpen})))}closeDropdown(){this.isOpen&&(this.isOpen=!1,this.element.dispatchEvent(new CustomEvent("open",{detail:this.isOpen})))}}class o{constructor(e){this.element=e,this.isOpen=!1,this.listeners=[],this.addEventListeners()}set clickedElement(e){e!==this.element&&this.isOpen&&(this.isOpen=!1,this.updateStyles())}addEventListeners(){this.listeners=[{eventName:"click",target:this.element,handler:this.toggleDropdown.bind(this)}],this.listeners.forEach(e=>{e.target.addEventListener(e.eventName,e.handler)})}removeEventListeners(){this.listeners.forEach(e=>{e.target.removeEventListener(e.eventName,e.handler)})}toggle(){this.isOpen=!this.isOpen}toggleDropdown(e){e.stopPropagation(),this.toggle(),this.updateStyles(),this.element.dispatchEvent(new CustomEvent("clickElement",{detail:this.element}))}onWindowClick(e){const t=e.target;t&&(this.element.contains(t)||(this.isOpen=!1),this.updateStyles())}updateStyles(){this.isOpen?this.element.classList.add("open"):this.element.classList.remove("open")}}class d{constructor(e){this.dropdowns=[],this.listeners=[],e.forEach(e=>{this.dropdowns.push(new o(e))}),this.addEventListeners(e)}destroy(){this.removeEventListeners(),this.dropdowns.forEach(e=>{e.removeEventListeners()})}addEventListeners(e){this.listeners=[{eventName:"click",target:window,handler:this.onWindowClick.bind(this)}],e.forEach(e=>{this.listeners.push({eventName:"clickElement",target:e,handler:this.onClickElement.bind(this)})}),this.listeners.forEach(e=>{e.target.addEventListener(e.eventName,e.handler)})}removeEventListeners(){this.listeners.forEach(e=>{e.target.removeEventListener(e.eventName,e.handler)})}onWindowClick(e){this.dropdowns.forEach(t=>{t.onWindowClick(e)})}onClickElement(e){this.dropdowns.forEach(t=>{t.clickedElement=e.detail})}}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return d}))},22:function(e,t){e.exports='<button class="dt-button" id="button">context menu</button>&nbsp;\n<web-context-menu id="contextMenu"></web-context-menu>\n'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vY29udGV4dC1tZW51L2xpYi9jb250ZXh0LW1lbnUuY29tcG9uZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlcy9jb250ZXh0LW1lbnUudHMiLCJ3ZWJwYWNrOi8vLy4uL2Ryb3Bkb3duL2xpYi9kcm9wLWRvd24uanMiLCJ3ZWJwYWNrOi8vLy4uL2Ryb3Bkb3duL2xpYi9kcm9wZG93bi1lbGVtZW50LmpzIiwid2VicGFjazovLy8uLi9kcm9wZG93bi9saWIvZHJvcGRvd24uanMiLCJ3ZWJwYWNrOi8vLy4uL2Ryb3Bkb3duL2xpYi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvY29udGV4dC1tZW51Lmh0bWwiXSwibmFtZXMiOlsiSFRNTEVsZW1lbnQiLCJzdXBlciIsInRoaXMiLCJfbWVudSIsImxpc3RlbmVycyIsImxpc3RNZW51IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJjbGFzc0xpc3QiLCJhZGQiLCJkcm9wZG93biIsImFkZEV2ZW50TGlzdGVuZXJzIiwidmFsIiwicmVuZGVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJmb3JFYWNoIiwieCIsInRhcmdldCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudE5hbWUiLCJoYW5kbGVyIiwib25PcGVuQ2hhbmdlIiwiYmluZCIsIndpbmRvdyIsIm9uV2luZG93UmVzaXplIiwib25DbGlja0xpc3RNZW51IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3NlRHJvcGRvd24iLCJsZWZ0IiwidG9wIiwiaGVpZ2h0Iiwid2lkdGgiLCJnZXRIaWRkZW5FbGVtZW50T3V0ZXJTaXplcyIsInBhZ2VYT2Zmc2V0IiwiaW5uZXJXaWR0aCIsInBhZ2VZT2Zmc2V0IiwiaW5uZXJIZWlnaHQiLCJib2R5Iiwic2Nyb2xsTGVmdCIsInNjcm9sbFRvcCIsImVsZW1lbnQiLCJvZmZzZXRQYXJlbnQiLCJvZmZzZXRIZWlnaHQiLCJvZmZzZXRXaWR0aCIsInN0eWxlIiwidmlzaWJpbGl0eSIsImRpc3BsYXkiLCJlbGVtZW50SGVpZ2h0IiwiZWxlbWVudFdpZHRoIiwiZXZlbnQiLCJjb29yZHMiLCJldmVudEFyZ3MiLCJnZXRQb3NpdGlvbk1lbnUiLCJvcmlnaW5hbEV2ZW50IiwicGFnZVgiLCJwYWdlWSIsInNlbGVjdENvbnRhaW5lckNsaWNrZWQiLCJwcmV2ZW50RGVmYXVsdCIsInRvZ2dsZURyb3Bkb3duIiwib3BlbkRyb3Bkb3duIiwiaXRlbSIsImRpc2FibGVkIiwidXJsIiwiY29tbWFuZCIsImRhdGEiLCJpc09wZW4iLCJtZW51IiwibGVuZ3RoIiwidXBkYXRlU3R5bGVzIiwibGlzdENvbnRlbnQiLCJjcmVhdGVMaXN0Q29udGVudCIsInRleHRDb250ZW50IiwiYXBwZW5kIiwicmVzdWx0IiwiaW5kZXgiLCJsaSIsImEiLCJocmVmIiwibGFiZWwiLCJkYXRhc2V0IiwiaWQiLCJ0b1N0cmluZyIsInNwYW4iLCJwcmVwZW5kIiwiaSIsImljb24iLCJwdXNoIiwiZWwiLCJ0YWdOYW1lIiwiY2xvc2VzdCIsImdldERhdGFJZCIsInBhcnNlSW50IiwiaXRlbUNsaWNrIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJpdGVtcyIsImNvbnNvbGUiLCJsb2ciLCJjb250ZXh0TWVudSIsInF1ZXJ5U2VsZWN0b3IiLCJvZmZzZXRMZWZ0Iiwib2Zmc2V0VG9wIiwic2hvdyIsImNsaWNrTGlzdGVuZXIiLCJvbkNsaWNrIiwid2luZG93Q2xpY2tMaXN0ZW5lciIsIm9uV2luZG93Q2xpY2siLCJ3aW5kb3dLZXlkb3duTGlzdGVuZXIiLCJvbktleURvd24iLCJrZXlDb2RlIiwiRVNDQVBFIiwia2V5IiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwiRHJvcGRvd25FbGVtZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwidG9nZ2xlIiwidGFyZ2V0RWxlbWVudCIsImNvbnRhaW5zIiwicmVtb3ZlIiwiZWxlbWVudHMiLCJkcm9wZG93bnMiLCJv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S0FBSyxDQUNoQm5FLFVBQVcsZUFDWEYsT0FBUXVCLEVBQ1JwQixRQUFTbkIsS0FBSzBILGVBQWVyRyxLQUFLckIsVUFHMUNBLEtBQUtFLFVBQVVZLFFBQVFDLElBQ25CQSxFQUFFQyxPQUFPUyxpQkFBaUJWLEVBQUVHLFVBQVdILEVBQUVJLFdBR2pELHVCQUNJbkIsS0FBS0UsVUFBVVksUUFBUUMsSUFDbkJBLEVBQUVDLE9BQU9DLG9CQUFvQkYsRUFBRUcsVUFBV0gsRUFBRUksV0FHcEQsY0FBYzZCLEdBQ1ZoRCxLQUFLeUgsVUFBVTNHLFFBQVFDLElBQ25CQSxFQUFFMEYsY0FBY3pELEtBR3hCLGVBQWVBLEdBQ1hoRCxLQUFLeUgsVUFBVTNHLFFBQVFDLElBQ25CQSxFQUFFNEcsZUFBaUIzRSxFQUFNaUUsVUMvQ3JDLHFFLGlCQ0FBVyxFQUFPQyxRQUFVIiwiZmlsZSI6IjIuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRHJvcERvd24gfSBmcm9tICdAbWF6ZGlrLWxpYi9kcm9wZG93bic7XG5pbXBvcnQgeyBpc0JsYW5rIH0gZnJvbSAnQG1hemRpay1saWIvY29tbW9uJztcbmV4cG9ydCBjbGFzcyBDb250ZXh0TWVudUNvbXBvbmVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fbWVudSA9IFtdO1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICAgICAgICB0aGlzLmxpc3RNZW51ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLmxpc3RNZW51KTtcbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdkdC1jb250ZXh0LW1lbnUnKTtcbiAgICAgICAgdGhpcy5kcm9wZG93biA9IG5ldyBEcm9wRG93bih0aGlzKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgICBnZXQgbWVudSgpIHsgcmV0dXJuIHRoaXMuX21lbnU7IH1cbiAgICBzZXQgbWVudSh2YWwpIHtcbiAgICAgICAgdGhpcy5fbWVudSA9IHZhbDtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuZHJvcGRvd24ucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaCh4ID0+IHtcbiAgICAgICAgICAgIHgudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoeC5ldmVudE5hbWUsIHguaGFuZGxlcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnb3BlbicsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IHRoaXMub25PcGVuQ2hhbmdlLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAncmVzaXplJyxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHdpbmRvdyxcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiB0aGlzLm9uV2luZG93UmVzaXplLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnY2xpY2snLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5saXN0TWVudSxcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiB0aGlzLm9uQ2xpY2tMaXN0TWVudS5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKHggPT4ge1xuICAgICAgICAgICAgeC50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcih4LmV2ZW50TmFtZSwgeC5oYW5kbGVyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uV2luZG93UmVzaXplKCkge1xuICAgICAgICB0aGlzLmRyb3Bkb3duLmNsb3NlRHJvcGRvd24oKTtcbiAgICB9XG4gICAgZ2V0UG9zaXRpb25NZW51KGxlZnQsIHRvcCkge1xuICAgICAgICBjb25zdCB7IGhlaWdodCwgd2lkdGggfSA9IHRoaXMuZ2V0SGlkZGVuRWxlbWVudE91dGVyU2l6ZXModGhpcyk7XG4gICAgICAgIC8vIGZsaXBcbiAgICAgICAgaWYgKGxlZnQgKyB3aWR0aCAtIHdpbmRvdy5wYWdlWE9mZnNldCA+IHdpbmRvdy5pbm5lcldpZHRoKSB7XG4gICAgICAgICAgICBsZWZ0IC09IHdpZHRoO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZsaXBcbiAgICAgICAgaWYgKHRvcCArIGhlaWdodCAtIHdpbmRvdy5wYWdlWU9mZnNldCA+IHdpbmRvdy5pbm5lckhlaWdodCkge1xuICAgICAgICAgICAgdG9wIC09IGhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICAvLyBmaXRcbiAgICAgICAgaWYgKGxlZnQgPCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQpIHtcbiAgICAgICAgICAgIGxlZnQgPSBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZml0XG4gICAgICAgIGlmICh0b3AgPCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCkge1xuICAgICAgICAgICAgdG9wID0gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgbGVmdCwgdG9wIH07XG4gICAgfVxuICAgIGdldEhpZGRlbkVsZW1lbnRPdXRlclNpemVzKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQub2Zmc2V0UGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4geyBoZWlnaHQ6IGVsZW1lbnQub2Zmc2V0SGVpZ2h0LCB3aWR0aDogZWxlbWVudC5vZmZzZXRXaWR0aCB9O1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBjb25zdCBlbGVtZW50SGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIGNvbnN0IGVsZW1lbnRXaWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICByZXR1cm4geyBoZWlnaHQ6IGVsZW1lbnRIZWlnaHQsIHdpZHRoOiBlbGVtZW50V2lkdGggfTtcbiAgICB9XG4gICAgc2hvdyhldmVudCkge1xuICAgICAgICB0aGlzLmV2ZW50QXJncyA9IGV2ZW50O1xuICAgICAgICBsZXQgY29vcmRzO1xuICAgICAgICBpZiAoIWlzQmxhbmsoZXZlbnQubGVmdCkgJiYgIWlzQmxhbmsoZXZlbnQudG9wKSkge1xuICAgICAgICAgICAgY29vcmRzID0gdGhpcy5nZXRQb3NpdGlvbk1lbnUoZXZlbnQubGVmdCwgZXZlbnQudG9wKTtcbiAgICAgICAgICAgIHRoaXMuZHJvcGRvd24uc2VsZWN0Q29udGFpbmVyQ2xpY2tlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb29yZHMgPSB0aGlzLmdldFBvc2l0aW9uTWVudShldmVudC5vcmlnaW5hbEV2ZW50LnBhZ2VYICsgMSwgZXZlbnQub3JpZ2luYWxFdmVudC5wYWdlWSArIDEpO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKHRoaXMudG9wID09PSBjb29yZHMudG9wICYmIHRoaXMubGVmdCA9PT0gY29vcmRzLmxlZnQpIHtcbiAgICAgICAgICAgIHRoaXMuZHJvcGRvd24udG9nZ2xlRHJvcGRvd24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudG9wID0gY29vcmRzLnRvcDtcbiAgICAgICAgICAgIHRoaXMubGVmdCA9IGNvb3Jkcy5sZWZ0O1xuICAgICAgICAgICAgdGhpcy5kcm9wZG93bi5jbG9zZURyb3Bkb3duKCk7XG4gICAgICAgICAgICB0aGlzLmRyb3Bkb3duLm9wZW5Ecm9wZG93bigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhpZGUoKSB7XG4gICAgICAgIHRoaXMuZHJvcGRvd24uY2xvc2VEcm9wZG93bigpO1xuICAgIH1cbiAgICBpdGVtQ2xpY2soZXZlbnQsIGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0uZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpdGVtLnVybCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbS5jb21tYW5kKSB7XG4gICAgICAgICAgICBpdGVtLmNvbW1hbmQodGhpcy5ldmVudEFyZ3MuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kcm9wZG93bi5jbG9zZURyb3Bkb3duKCk7XG4gICAgfVxuICAgIHVwZGF0ZVN0eWxlcygpIHtcbiAgICAgICAgdGhpcy5zdHlsZS5sZWZ0ID0gdGhpcy5sZWZ0ICsgJ3B4JztcbiAgICAgICAgdGhpcy5zdHlsZS50b3AgPSB0aGlzLnRvcCArICdweCc7XG4gICAgICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9ICh0aGlzLmRyb3Bkb3duLmlzT3BlbiAmJiB0aGlzLm1lbnUubGVuZ3RoID4gMCkgPyAnYmxvY2snIDogJ25vbmUnO1xuICAgIH1cbiAgICBvbk9wZW5DaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgbGlzdENvbnRlbnQgPSB0aGlzLmNyZWF0ZUxpc3RDb250ZW50KCk7XG4gICAgICAgIHRoaXMubGlzdE1lbnUudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgdGhpcy5saXN0TWVudS5hcHBlbmQoLi4ubGlzdENvbnRlbnQpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN0eWxlcygpO1xuICAgIH1cbiAgICBjcmVhdGVMaXN0Q29udGVudCgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgIHRoaXMubWVudS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICAgICAgaWYgKGl0ZW0uZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBsaS5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIGEuaHJlZiA9IGl0ZW0udXJsIHx8ICcjJztcbiAgICAgICAgICAgIGEudGV4dENvbnRlbnQgPSBpdGVtLmxhYmVsO1xuICAgICAgICAgICAgYS5kYXRhc2V0LmlkID0gaW5kZXgudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGxpLmFwcGVuZChhKTtcbiAgICAgICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICBzcGFuLmNsYXNzTGlzdC5hZGQoJ2NvbnRleHQtbWVudS1zZXAnKTtcbiAgICAgICAgICAgIGEucHJlcGVuZChzcGFuKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG4gICAgICAgICAgICBpZiAoaXRlbS5pY29uKSB7XG4gICAgICAgICAgICAgICAgaS5jbGFzc0xpc3QuYWRkKGl0ZW0uaWNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhLnByZXBlbmQoaSk7XG4gICAgICAgICAgICByZXN1bHQucHVzaChsaSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBnZXREYXRhSWQodGFyZ2V0KSB7XG4gICAgICAgIGNvbnN0IGVsID0gdGFyZ2V0LnRhZ05hbWUgPT09ICdBJyA/IHRhcmdldCA6IHRhcmdldC5jbG9zZXN0KCdhJyk7XG4gICAgICAgIHJldHVybiAoZWwgJiYgZWwuZGF0YXNldC5pZCkgPyBlbC5kYXRhc2V0LmlkIDogbnVsbDtcbiAgICB9XG4gICAgb25DbGlja0xpc3RNZW51KGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXREYXRhSWQoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgaWYgKGlkICE9PSBudWxsICYmIGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoaWQsIDEwKTtcbiAgICAgICAgICAgIHRoaXMuaXRlbUNsaWNrKGV2ZW50LCB0aGlzLm1lbnVbaW5kZXhdKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnd2ViLWNvbnRleHQtbWVudScsIENvbnRleHRNZW51Q29tcG9uZW50KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRleHQtbWVudS5jb21wb25lbnQuanMubWFwIiwiaW1wb3J0IHsgUGFnZSB9IGZyb20gJy4uL3BhZ2UnO1xuaW1wb3J0IGh0bWwgZnJvbSAnLi9jb250ZXh0LW1lbnUuaHRtbCc7XG5pbXBvcnQgJ0BtYXpkaWstbGliL2NvbnRleHQtbWVudSc7XG5pbXBvcnQgeyBDb250ZXh0TWVudUNvbXBvbmVudCwgTWVudUV2ZW50QXJncyB9IGZyb20gJ0BtYXpkaWstbGliL2NvbnRleHQtbWVudSc7XG5pbXBvcnQgeyBNZW51SXRlbSB9IGZyb20gJ0BtYXpkaWstbGliL2NvbW1vbic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRleHRNZW51RGVtbyBpbXBsZW1lbnRzIFBhZ2Uge1xuXG4gIGdldCB0ZW1wbGF0ZSgpOiBzdHJpbmcgeyByZXR1cm4gaHRtbDsgfVxuXG4gIGxvYWQoKSB7XG4gICAgY29uc3QgaXRlbXM6IE1lbnVJdGVtW10gPSBbXG4gICAgICB7IGxhYmVsOiAnVmlldyBUYXNrJywgY29tbWFuZDogKGV2ZW50KSA9PiBjb25zb2xlLmxvZygnVmlldyAnICsgZXZlbnQpIH0sXG4gICAgICB7IGxhYmVsOiAnRWRpdCBUYXNrJywgY29tbWFuZDogKGV2ZW50KSA9PiBjb25zb2xlLmxvZygnRWRpdCAnICsgZXZlbnQpIH0sXG4gICAgICB7IGxhYmVsOiAnRGVsZXRlIFRhc2snLCBjb21tYW5kOiAoZXZlbnQpID0+IGNvbnNvbGUubG9nKCdEZWxldGUgJyArIGV2ZW50KSwgZGlzYWJsZWQ6IHRydWUgfVxuICAgIF07XG5cbiAgICBjb25zdCBjb250ZXh0TWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb250ZXh0TWVudScpIGFzIENvbnRleHRNZW51Q29tcG9uZW50O1xuICAgIGNvbnRleHRNZW51Lm1lbnUgPSBpdGVtcztcblxuICAgIGZ1bmN0aW9uIHNob3coZXZlbnQpIHtcbiAgICAgIGNvbnN0IGxlZnQgPSBldmVudC50YXJnZXQub2Zmc2V0TGVmdCArIGV2ZW50LnRhcmdldC5vZmZzZXRXaWR0aDtcbiAgICAgIGNvbnN0IHRvcCA9IGV2ZW50LnRhcmdldC5vZmZzZXRUb3A7XG4gICAgICBjb250ZXh0TWVudS5zaG93KHsgb3JpZ2luYWxFdmVudDogZXZlbnQsIGRhdGE6ICd0ZXN0JywgbGVmdCwgdG9wIH0gYXMgTWVudUV2ZW50QXJncyk7XG4gICAgfVxuXG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J1dHRvbicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgc2hvdyhldmVudCk7XG4gICAgfSk7XG4gIH1cblxufVxuIiwiaW1wb3J0IHsgS2V5cyB9IGZyb20gJ0BtYXpkaWstbGliL2NvbW1vbic7XG5leHBvcnQgY2xhc3MgRHJvcERvd24ge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5jbGlja0xpc3RlbmVyID0gdGhpcy5vbkNsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xpY2tMaXN0ZW5lcik7XG4gICAgICAgIHRoaXMud2luZG93Q2xpY2tMaXN0ZW5lciA9IHRoaXMub25XaW5kb3dDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLndpbmRvd0NsaWNrTGlzdGVuZXIpO1xuICAgICAgICB0aGlzLndpbmRvd0tleWRvd25MaXN0ZW5lciA9IHRoaXMub25LZXlEb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy53aW5kb3dLZXlkb3duTGlzdGVuZXIpO1xuICAgIH1cbiAgICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja0xpc3RlbmVyKTtcbiAgICAgICAgd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy53aW5kb3dDbGlja0xpc3RlbmVyKTtcbiAgICAgICAgd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLndpbmRvd0tleWRvd25MaXN0ZW5lcik7XG4gICAgfVxuICAgIG9uQ2xpY2soKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0Q29udGFpbmVyQ2xpY2tlZCA9IHRydWU7XG4gICAgfVxuICAgIG9uV2luZG93Q2xpY2soKSB7XG4gICAgICAgIGlmICghdGhpcy5zZWxlY3RDb250YWluZXJDbGlja2VkKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbGVjdENvbnRhaW5lckNsaWNrZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgb25LZXlEb3duKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBLZXlzLkVTQ0FQRSB8fCBldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b2dnbGVEcm9wZG93bigpIHtcbiAgICAgICAgdGhpcy5pc09wZW4gPyB0aGlzLmNsb3NlRHJvcGRvd24oKSA6IHRoaXMub3BlbkRyb3Bkb3duKCk7XG4gICAgfVxuICAgIG9wZW5Ecm9wZG93bigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdvcGVuJywgeyBkZXRhaWw6IHRoaXMuaXNPcGVuIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZURyb3Bkb3duKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ29wZW4nLCB7IGRldGFpbDogdGhpcy5pc09wZW4gfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZHJvcC1kb3duLmpzLm1hcCIsImV4cG9ydCBjbGFzcyBEcm9wZG93bkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgICBzZXQgY2xpY2tlZEVsZW1lbnQoZWwpIHtcbiAgICAgICAgaWYgKGVsICE9PSB0aGlzLmVsZW1lbnQgJiYgdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0eWxlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdjbGljaycsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy50b2dnbGVEcm9wZG93bi5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnRhcmdldC5hZGRFdmVudExpc3RlbmVyKHguZXZlbnROYW1lLCB4LmhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHguZXZlbnROYW1lLCB4LmhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9nZ2xlKCkge1xuICAgICAgICB0aGlzLmlzT3BlbiA9ICF0aGlzLmlzT3BlbjtcbiAgICB9XG4gICAgdG9nZ2xlRHJvcGRvd24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnY2xpY2tFbGVtZW50JywgeyBkZXRhaWw6IHRoaXMuZWxlbWVudCB9KSk7XG4gICAgfVxuICAgIG9uV2luZG93Q2xpY2soZXZlbnQpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgaWYgKCF0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2xpY2tlZEluc2lkZSA9IHRoaXMuZWxlbWVudC5jb250YWlucyh0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgaWYgKCFjbGlja2VkSW5zaWRlKSB7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgfVxuICAgIHVwZGF0ZVN0eWxlcygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRyb3Bkb3duLWVsZW1lbnQuanMubWFwIiwiaW1wb3J0IHsgRHJvcGRvd25FbGVtZW50IH0gZnJvbSAnLi9kcm9wZG93bi1lbGVtZW50JztcbmV4cG9ydCBjbGFzcyBEcm9wZG93biB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudHMpIHtcbiAgICAgICAgdGhpcy5kcm9wZG93bnMgPSBbXTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kcm9wZG93bnMucHVzaChuZXcgRHJvcGRvd25FbGVtZW50KGVsZW1lbnQpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoZWxlbWVudHMpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuZHJvcGRvd25zLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVycyhlbGVtZW50cykge1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdjbGljaycsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB3aW5kb3csXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy5vbldpbmRvd0NsaWNrLmJpbmQodGhpcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnY2xpY2tFbGVtZW50JyxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy5vbkNsaWNrRWxlbWVudC5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnRhcmdldC5hZGRFdmVudExpc3RlbmVyKHguZXZlbnROYW1lLCB4LmhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHguZXZlbnROYW1lLCB4LmhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25XaW5kb3dDbGljayhldmVudCkge1xuICAgICAgICB0aGlzLmRyb3Bkb3ducy5mb3JFYWNoKHggPT4ge1xuICAgICAgICAgICAgeC5vbldpbmRvd0NsaWNrKGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uQ2xpY2tFbGVtZW50KGV2ZW50KSB7XG4gICAgICAgIHRoaXMuZHJvcGRvd25zLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LmNsaWNrZWRFbGVtZW50ID0gZXZlbnQuZGV0YWlsO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kcm9wZG93bi5qcy5tYXAiLCJleHBvcnQgKiBmcm9tICcuL2Ryb3AtZG93bic7XG5leHBvcnQgKiBmcm9tICcuL2Ryb3Bkb3duJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsIm1vZHVsZS5leHBvcnRzID0gXCI8YnV0dG9uIGNsYXNzPVxcXCJkdC1idXR0b25cXFwiIGlkPVxcXCJidXR0b25cXFwiPmNvbnRleHQgbWVudTwvYnV0dG9uPiZuYnNwO1xcbjx3ZWItY29udGV4dC1tZW51IGlkPVxcXCJjb250ZXh0TWVudVxcXCI+PC93ZWItY29udGV4dC1tZW51PlxcblwiOyJdLCJzb3VyY2VSb290IjoiIn0=