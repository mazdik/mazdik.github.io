(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{12:function(t,e,s){"use strict";s.r(e),s.d(e,"page",(function(){return l}));s(15);var i=s(23),n=s.n(i);function l(){const t=document.querySelector("#select-list-demo1"),e=document.querySelector("#select-list-demo2"),s=[{id:"1",name:"Select 1"},{id:"2",name:"Select 2"},{id:"3",name:"Select 3"},{id:"4",name:"Select 4"},{id:"5",name:"Select 5"},{id:"6",name:"Select 6"}];t.settings={multiple:!0},t.options=s,t.model=["2","4"],e.options=s,e.model=["3"]}e.default=n.a},15:function(t,e,s){"use strict";class i{constructor(t){this.multiple=!1,this.selectAllMessage="Select all",this.cancelMessage="Cancel",this.clearMessage="Clear",this.searchMessage="Search...",this.enableSelectAll=!0,this.enableFilterInput=!0,t&&Object.assign(this,t)}}class n extends HTMLElement{constructor(){super(),this._settings=new i,this._model=[],this.selectedOptions=[],this.listeners=[];const t=(~~(1e3*Math.random())).toString(),e=document.createElement("template");e.innerHTML=function(t){return`\n  <input class="dt-input dt-form-group" id="filterInput${t}">\n  <ul class="dt-list-menu dt-list-menu-scroll" id="listMenu${t}">\n    <li class="dt-list-menu-item" id="selectAll${t}" data-id="-1">\n      <span class="dt-checkbox">\n        <input type="checkbox" id="checkboxAll${t}"/>\n        <label></label>\n      </span>\n    </li>\n    <li class="dt-list-divider"></li>\n  </ul>\n  <div class="dt-list-menu-row">\n    <button class="dt-button dt-button-sm" id="okButton${t}"></button>\n    <button class="dt-button dt-button-sm" id="cancelButton${t}"></button>\n    <button class="dt-button dt-button-sm" id="clearButton${t}"></button>\n  </div>\n  `}(t),this.appendChild(e.content.cloneNode(!0)),this.filterInput=this.querySelector("#filterInput"+t),this.selectAll=this.querySelector("#selectAll"+t),this.checkboxAll=this.querySelector("#checkboxAll"+t),this.listMenu=this.querySelector("#listMenu"+t),this.okButton=this.querySelector("#okButton"+t),this.cancelButton=this.querySelector("#cancelButton"+t),this.clearButton=this.querySelector("#clearButton"+t),this.contentInit(),this.addEventListeners()}get settings(){return this._settings}set settings(t){this._settings=new i(t),this.contentInit()}get options(){return this._options}set options(t){this._options=t,this.render()}get model(){return this._model}set model(t){this._model=t,this.selectedOptions=t&&t.length?t.slice(0):[],this.refreshStyles()}get isOpen(){return this._isOpen}set isOpen(t){this._isOpen=t,!0===t&&(this.setFocus(),this.filterInput.value="",this.render())}disconnectedCallback(){this.removeEventListeners()}addEventListeners(){this.listeners=[{eventName:"input",target:this.filterInput,handler:this.onInputFilter.bind(this)},{eventName:"click",target:this.okButton,handler:this.onClickOk.bind(this)},{eventName:"click",target:this.cancelButton,handler:this.onClickCancel.bind(this)},{eventName:"click",target:this.clearButton,handler:this.onClickClear.bind(this)},{eventName:"click",target:this.listMenu,handler:this.onClickListMenu.bind(this)}],this.listeners.forEach(t=>{t.target.addEventListener(t.eventName,t.handler)})}removeEventListeners(){this.listeners.forEach(t=>{t.target.removeEventListener(t.eventName,t.handler)})}setSelectedOptions(t){const e=this.selectedOptions.indexOf(t);e>-1?this.selectedOptions.splice(e,1):(this.settings.multiple||(this.selectedOptions=[]),this.selectedOptions.push(t))}setSelected(t){this.setSelectedOptions(t),this.settings.multiple||this.selectionChangeEmit()}setSelectedAll(){this.allSelected?this.selectedOptions=[]:this.checkAll()}checkAll(){this.selectedOptions=this.options.map(t=>t.id),this.settings.multiple||this.selectionChangeEmit()}isSelected(t){return this.selectedOptions.indexOf(t)>-1}setFocus(){this.filterInput&&setTimeout(()=>{this.filterInput.focus()},1)}onClickOk(t){t.stopPropagation(),this.selectionChangeEmit()}onClickCancel(t){t.stopPropagation(),this.selectedOptions=this.model.slice(0),this.dispatchEvent(new CustomEvent("selectionCancel",{detail:!0})),this.refreshStyles()}onClickClear(t){t.stopPropagation(),this.selectedOptions.length>0&&(this.selectedOptions=[]),this.selectionChangeEmit(),this.refreshStyles()}get allSelected(){return this.options&&0!==this.options.length&&this.selectedOptions&&this.selectedOptions.length===this.options.length}get partiallySelected(){return 0!==this.selectedOptions.length&&!this.allSelected}selectionChangeEmit(){this.model.length===this.selectedOptions.length&&this.model.every((t,e)=>t===this.selectedOptions[e])?this.dispatchEvent(new CustomEvent("selectionCancel",{detail:!0})):(this.model=this.selectedOptions.slice(0),this.dispatchEvent(new CustomEvent("selectionChange",{detail:this.model})))}onInputFilter(){this.filteredOptions=this.filterOptionsByName(this.filterInput.value),this.render()}get viewOptions(){return this.filterInput.value?this.filteredOptions:this.options}filterOptionsByName(t){return t&&this.options?this.options.filter(e=>e.name.toLowerCase().indexOf(t.toLowerCase())>-1):this.options}contentInit(){this.filterInput.placeholder=this.settings.searchMessage,this.okButton.textContent="OK",this.cancelButton.textContent=this.settings.cancelMessage,this.clearButton.textContent=this.settings.clearMessage,this.checkboxAll.nextElementSibling.textContent=this.settings.selectAllMessage,this.okButton.style.display=this.settings.multiple?"block":"none",this.selectAll.style.display=this.settings.multiple&&this.settings.enableSelectAll?"block":"none",this.filterInput.style.display=this.settings.enableFilterInput?"block":"none"}render(){this.removeListContent();const t=this.createListContent().join("");this.listMenu.insertAdjacentHTML("beforeend",t),this.refreshStyles()}createListContent(){const t=[];return this.viewOptions.forEach(e=>{let s;s=this.settings.multiple?function(t){return`\n  <li class="dt-list-menu-item" data-id="${t.id}">\n    <span class="dt-checkbox">\n      <input type="checkbox"/>\n      <label>${t.name}</label>\n    </span>\n  </li>`}(e):function(t){return`\n  <li class="dt-list-menu-item" data-id="${t.id}">\n    <i class="dt-icon"></i>${t.name}\n  </li>`}(e),t.push(s)}),t}getDataId(t){const e="LI"===t.tagName?t:t.closest("li");return e&&e.dataset.id?e.dataset.id:null}get listContent(){return Array.from(this.listMenu.children)}onClickListMenu(t){const e=this.getDataId(t.target);null!=e&&(t.stopPropagation(),"-1"===e?this.setSelectedAll():this.setSelected(e),this.refreshStyles())}refreshStyles(){this.listContent.forEach(t=>{const e=this.getDataId(t);this.isSelected(e)?this.addActiveStyles(t):this.removeActiveStyles(t)}),this.checkboxAll.checked=this.allSelected,this.checkboxAll.indeterminate=this.partiallySelected}addActiveStyles(t){t.firstElementChild&&(this.settings.multiple?this.setInputChecked(t,!0):(t.classList.add("active"),t.firstElementChild.classList.add("dt-icon-ok")))}removeActiveStyles(t){t.firstElementChild&&(this.settings.multiple?this.setInputChecked(t,!1):(t.classList.remove("active"),t.firstElementChild.classList.remove("dt-icon-ok")))}setInputChecked(t,e){t.firstElementChild.firstElementChild.checked=e}removeListContent(){this.listContent.forEach(t=>{const e=this.getDataId(t);null!=e&&"-1"!==e&&t.remove()})}}customElements.define("web-select-list",n),s.d(e,"a",(function(){return i}))},23:function(t,e){t.exports='<div class="select-list-demo">\n  <web-select-list class="sl-column" id="select-list-demo1"></web-select-list>\n  <web-select-list class="sl-column" id="select-list-demo2"></web-select-list>\n</div>\n'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvc2VsZWN0LWxpc3QudHMiLCJ3ZWJwYWNrOi8vLy4uL3NlbGVjdC1saXN0L2xpYi9zZWxlY3QtbGlzdC5zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly8vLi4vc2VsZWN0LWxpc3QvbGliL3NlbGVjdC1saXN0LmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi4vc2VsZWN0LWxpc3QvbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlcy9zZWxlY3QtbGlzdC5odG1sIl0sIm5hbWVzIjpbInBhZ2UiLCJzZWxlY3RMaXN0MSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInNlbGVjdExpc3QyIiwib3B0aW9ucyIsImlkIiwibmFtZSIsInNldHRpbmdzIiwibXVsdGlwbGUiLCJtb2RlbCIsIlNlbGVjdExpc3RTZXR0aW5ncyIsImluaXQiLCJ0aGlzIiwic2VsZWN0QWxsTWVzc2FnZSIsImNhbmNlbE1lc3NhZ2UiLCJjbGVhck1lc3NhZ2UiLCJzZWFyY2hNZXNzYWdlIiwiZW5hYmxlU2VsZWN0QWxsIiwiZW5hYmxlRmlsdGVySW5wdXQiLCJPYmplY3QiLCJhc3NpZ24iLCJIVE1MRWxlbWVudCIsInN1cGVyIiwiX3NldHRpbmdzIiwiX21vZGVsIiwic2VsZWN0ZWRPcHRpb25zIiwibGlzdGVuZXJzIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwidGVtcGxhdGUiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiZ2V0VGVtcGxhdGUiLCJhcHBlbmRDaGlsZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJmaWx0ZXJJbnB1dCIsInNlbGVjdEFsbCIsImNoZWNrYm94QWxsIiwibGlzdE1lbnUiLCJva0J1dHRvbiIsImNhbmNlbEJ1dHRvbiIsImNsZWFyQnV0dG9uIiwiY29udGVudEluaXQiLCJhZGRFdmVudExpc3RlbmVycyIsInZhbCIsIl9vcHRpb25zIiwicmVuZGVyIiwibGVuZ3RoIiwic2xpY2UiLCJyZWZyZXNoU3R5bGVzIiwiX2lzT3BlbiIsInNldEZvY3VzIiwidmFsdWUiLCJyZW1vdmVFdmVudExpc3RlbmVycyIsImV2ZW50TmFtZSIsInRhcmdldCIsImhhbmRsZXIiLCJvbklucHV0RmlsdGVyIiwiYmluZCIsIm9uQ2xpY2tPayIsIm9uQ2xpY2tDYW5jZWwiLCJvbkNsaWNrQ2xlYXIiLCJvbkNsaWNrTGlzdE1lbnUiLCJmb3JFYWNoIiwieCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwicHVzaCIsInNldFNlbGVjdGVkT3B0aW9ucyIsInNlbGVjdGlvbkNoYW5nZUVtaXQiLCJhbGxTZWxlY3RlZCIsImNoZWNrQWxsIiwibWFwIiwib3B0aW9uIiwic2V0VGltZW91dCIsImZvY3VzIiwiZXZlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJldmVyeSIsImZpbHRlcmVkT3B0aW9ucyIsImZpbHRlck9wdGlvbnNCeU5hbWUiLCJmaWx0ZXIiLCJ0b0xvd2VyQ2FzZSIsInBsYWNlaG9sZGVyIiwidGV4dENvbnRlbnQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJzdHlsZSIsImRpc3BsYXkiLCJyZW1vdmVMaXN0Q29udGVudCIsImxpc3RDb250ZW50IiwiY3JlYXRlTGlzdENvbnRlbnQiLCJqb2luIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwicmVzdWx0Iiwidmlld09wdGlvbnMiLCJlbGVtZW50IiwiZ2V0VGVtcGxhdGVNdWx0aXBsZSIsImdldFRlbXBsYXRlU2luZ2xlIiwiZWwiLCJ0YWdOYW1lIiwiY2xvc2VzdCIsImRhdGFzZXQiLCJBcnJheSIsImZyb20iLCJjaGlsZHJlbiIsImdldERhdGFJZCIsInNldFNlbGVjdGVkQWxsIiwic2V0U2VsZWN0ZWQiLCJpc1NlbGVjdGVkIiwiYWRkQWN0aXZlU3R5bGVzIiwicmVtb3ZlQWN0aXZlU3R5bGVzIiwiY2hlY2tlZCIsImluZGV0ZXJtaW5hdGUiLCJwYXJ0aWFsbHlTZWxlY3RlZCIsImZpcnN0RWxlbWVudENoaWxkIiwic2V0SW5wdXRDaGVja2VkIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiY3VzdG9tRWxlbWVudHMiLCJkZWZpbmUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoieUZBQUEsdUVBT08sU0FBU0EsSUFDZCxNQUFNQyxFQUFjQyxTQUFTQyxjQUFjLHNCQUNyQ0MsRUFBY0YsU0FBU0MsY0FBYyxzQkFFckNFLEVBQXdCLENBQzVCLENBQUNDLEdBQUksSUFBS0MsS0FBTSxZQUNoQixDQUFDRCxHQUFJLElBQUtDLEtBQU0sWUFDaEIsQ0FBQ0QsR0FBSSxJQUFLQyxLQUFNLFlBQ2hCLENBQUNELEdBQUksSUFBS0MsS0FBTSxZQUNoQixDQUFDRCxHQUFJLElBQUtDLEtBQU0sWUFDaEIsQ0FBQ0QsR0FBSSxJQUFLQyxLQUFNLGFBR2xCTixFQUFZTyxTQUFXLENBQ3JCQyxVQUFVLEdBRVpSLEVBQVlJLFFBQVVBLEVBQ3RCSixFQUFZUyxNQUFRLENBQUMsSUFBSyxLQUUxQk4sRUFBWUMsUUFBVUEsRUFDdEJELEVBQVlNLE1BQVEsQ0FBQyxLQXRCUixZQUFJLEcsZ0NDTFosTUFBTUMsRUFDVCxZQUFZQyxHQUNSQyxLQUFLSixVQUFXLEVBQ2hCSSxLQUFLQyxpQkFBbUIsYUFDeEJELEtBQUtFLGNBQWdCLFNBQ3JCRixLQUFLRyxhQUFlLFFBQ3BCSCxLQUFLSSxjQUFnQixZQUNyQkosS0FBS0ssaUJBQWtCLEVBQ3ZCTCxLQUFLTSxtQkFBb0IsRUFDckJQLEdBQ0FRLE9BQU9DLE9BQU9SLEtBQU1ELElDeUJ6QixNQUFNLFVBQTRCVSxZQUNyQyxjQUNJQyxRQUNBVixLQUFLVyxVQUFZLElBQUliLEVBQ3JCRSxLQUFLWSxPQUFTLEdBQ2RaLEtBQUthLGdCQUFrQixHQUN2QmIsS0FBS2MsVUFBWSxHQUNqQixNQUFNckIsTUFBeUIsSUFBaEJzQixLQUFLQyxXQUFpQkMsV0FDL0JDLEVBQVc3QixTQUFTOEIs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QyxJQUN0QixNQUFNbEcsRUFBS08sS0FBS3FHLFVBQVVWLEdBQ3RCbEcsU0FBMEMsT0FBUEEsR0FDbkNrRyxFQUFRdUIsWUFLeEJDLGVBQWVDLE9BQU8sa0JBQW1CLEdDM1R6QyxtQyxpQkNBQUMsRUFBT0MsUUFBVSIsImZpbGUiOiIyLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnQG1hemRpay1saWIvc2VsZWN0LWxpc3QnO1xuaW1wb3J0IHsgU2VsZWN0TGlzdENvbXBvbmVudCB9IGZyb20gJ0BtYXpkaWstbGliL3NlbGVjdC1saXN0JztcbmltcG9ydCB7IFNlbGVjdEl0ZW0gfSBmcm9tICdAbWF6ZGlrLWxpYi9jb21tb24nO1xuaW1wb3J0IGh0bWwgZnJvbSAnLi9zZWxlY3QtbGlzdC5odG1sJztcblxuZXhwb3J0IGRlZmF1bHQgaHRtbDtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhZ2UoKSB7XG4gIGNvbnN0IHNlbGVjdExpc3QxID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlbGVjdC1saXN0LWRlbW8xJykgYXMgU2VsZWN0TGlzdENvbXBvbmVudDtcbiAgY29uc3Qgc2VsZWN0TGlzdDIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VsZWN0LWxpc3QtZGVtbzInKSBhcyBTZWxlY3RMaXN0Q29tcG9uZW50O1xuXG4gIGNvbnN0IG9wdGlvbnM6IFNlbGVjdEl0ZW1bXSA9IFtcbiAgICB7aWQ6ICcxJywgbmFtZTogJ1NlbGVjdCAxJ30sXG4gICAge2lkOiAnMicsIG5hbWU6ICdTZWxlY3QgMid9LFxuICAgIHtpZDogJzMnLCBuYW1lOiAnU2VsZWN0IDMnfSxcbiAgICB7aWQ6ICc0JywgbmFtZTogJ1NlbGVjdCA0J30sXG4gICAge2lkOiAnNScsIG5hbWU6ICdTZWxlY3QgNSd9LFxuICAgIHtpZDogJzYnLCBuYW1lOiAnU2VsZWN0IDYnfSxcbiAgXTtcblxuICBzZWxlY3RMaXN0MS5zZXR0aW5ncyA9IHtcbiAgICBtdWx0aXBsZTogdHJ1ZVxuICB9O1xuICBzZWxlY3RMaXN0MS5vcHRpb25zID0gb3B0aW9ucztcbiAgc2VsZWN0TGlzdDEubW9kZWwgPSBbJzInLCAnNCddO1xuXG4gIHNlbGVjdExpc3QyLm9wdGlvbnMgPSBvcHRpb25zO1xuICBzZWxlY3RMaXN0Mi5tb2RlbCA9IFsnMyddO1xufVxuIiwiZXhwb3J0IGNsYXNzIFNlbGVjdExpc3RTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoaW5pdCkge1xuICAgICAgICB0aGlzLm11bHRpcGxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2VsZWN0QWxsTWVzc2FnZSA9ICdTZWxlY3QgYWxsJztcbiAgICAgICAgdGhpcy5jYW5jZWxNZXNzYWdlID0gJ0NhbmNlbCc7XG4gICAgICAgIHRoaXMuY2xlYXJNZXNzYWdlID0gJ0NsZWFyJztcbiAgICAgICAgdGhpcy5zZWFyY2hNZXNzYWdlID0gJ1NlYXJjaC4uLic7XG4gICAgICAgIHRoaXMuZW5hYmxlU2VsZWN0QWxsID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lbmFibGVGaWx0ZXJJbnB1dCA9IHRydWU7XG4gICAgICAgIGlmIChpbml0KSB7XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGluaXQpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VsZWN0LWxpc3Quc2V0dGluZ3MuanMubWFwIiwiaW1wb3J0IHsgU2VsZWN0TGlzdFNldHRpbmdzIH0gZnJvbSAnLi9zZWxlY3QtbGlzdC5zZXR0aW5ncyc7XG5mdW5jdGlvbiBnZXRUZW1wbGF0ZShpZCkge1xuICAgIHJldHVybiBgXG4gIDxpbnB1dCBjbGFzcz1cImR0LWlucHV0IGR0LWZvcm0tZ3JvdXBcIiBpZD1cImZpbHRlcklucHV0JHtpZH1cIj5cbiAgPHVsIGNsYXNzPVwiZHQtbGlzdC1tZW51IGR0LWxpc3QtbWVudS1zY3JvbGxcIiBpZD1cImxpc3RNZW51JHtpZH1cIj5cbiAgICA8bGkgY2xhc3M9XCJkdC1saXN0LW1lbnUtaXRlbVwiIGlkPVwic2VsZWN0QWxsJHtpZH1cIiBkYXRhLWlkPVwiLTFcIj5cbiAgICAgIDxzcGFuIGNsYXNzPVwiZHQtY2hlY2tib3hcIj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiY2hlY2tib3hBbGwke2lkfVwiLz5cbiAgICAgICAgPGxhYmVsPjwvbGFiZWw+XG4gICAgICA8L3NwYW4+XG4gICAgPC9saT5cbiAgICA8bGkgY2xhc3M9XCJkdC1saXN0LWRpdmlkZXJcIj48L2xpPlxuICA8L3VsPlxuICA8ZGl2IGNsYXNzPVwiZHQtbGlzdC1tZW51LXJvd1wiPlxuICAgIDxidXR0b24gY2xhc3M9XCJkdC1idXR0b24gZHQtYnV0dG9uLXNtXCIgaWQ9XCJva0J1dHRvbiR7aWR9XCI+PC9idXR0b24+XG4gICAgPGJ1dHRvbiBjbGFzcz1cImR0LWJ1dHRvbiBkdC1idXR0b24tc21cIiBpZD1cImNhbmNlbEJ1dHRvbiR7aWR9XCI+PC9idXR0b24+XG4gICAgPGJ1dHRvbiBjbGFzcz1cImR0LWJ1dHRvbiBkdC1idXR0b24tc21cIiBpZD1cImNsZWFyQnV0dG9uJHtpZH1cIj48L2J1dHRvbj5cbiAgPC9kaXY+XG4gIGA7XG59XG5mdW5jdGlvbiBnZXRUZW1wbGF0ZVNpbmdsZShvcHRpb24pIHtcbiAgICByZXR1cm4gYFxuICA8bGkgY2xhc3M9XCJkdC1saXN0LW1lbnUtaXRlbVwiIGRhdGEtaWQ9XCIke29wdGlvbi5pZH1cIj5cbiAgICA8aSBjbGFzcz1cImR0LWljb25cIj48L2k+JHtvcHRpb24ubmFtZX1cbiAgPC9saT5gO1xufVxuZnVuY3Rpb24gZ2V0VGVtcGxhdGVNdWx0aXBsZShvcHRpb24pIHtcbiAgICByZXR1cm4gYFxuICA8bGkgY2xhc3M9XCJkdC1saXN0LW1lbnUtaXRlbVwiIGRhdGEtaWQ9XCIke29wdGlvbi5pZH1cIj5cbiAgICA8c3BhbiBjbGFzcz1cImR0LWNoZWNrYm94XCI+XG4gICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIvPlxuICAgICAgPGxhYmVsPiR7b3B0aW9uLm5hbWV9PC9sYWJlbD5cbiAgICA8L3NwYW4+XG4gIDwvbGk+YDtcbn1cbmV4cG9ydCBjbGFzcyBTZWxlY3RMaXN0Q29tcG9uZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9zZXR0aW5ncyA9IG5ldyBTZWxlY3RMaXN0U2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5fbW9kZWwgPSBbXTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgY29uc3QgaWQgPSAofn4oTWF0aC5yYW5kb20oKSAqIDFlMykpLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcbiAgICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gZ2V0VGVtcGxhdGUoaWQpO1xuICAgICAgICB0aGlzLmFwcGVuZENoaWxkKHRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgdGhpcy5maWx0ZXJJbnB1dCA9IHRoaXMucXVlcnlTZWxlY3RvcignI2ZpbHRlcklucHV0JyArIGlkKTtcbiAgICAgICAgdGhpcy5zZWxlY3RBbGwgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyNzZWxlY3RBbGwnICsgaWQpO1xuICAgICAgICB0aGlzLmNoZWNrYm94QWxsID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjY2hlY2tib3hBbGwnICsgaWQpO1xuICAgICAgICB0aGlzLmxpc3RNZW51ID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjbGlzdE1lbnUnICsgaWQpO1xuICAgICAgICB0aGlzLm9rQnV0dG9uID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjb2tCdXR0b24nICsgaWQpO1xuICAgICAgICB0aGlzLmNhbmNlbEJ1dHRvbiA9IHRoaXMucXVlcnlTZWxlY3RvcignI2NhbmNlbEJ1dHRvbicgKyBpZCk7XG4gICAgICAgIHRoaXMuY2xlYXJCdXR0b24gPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyNjbGVhckJ1dHRvbicgKyBpZCk7XG4gICAgICAgIHRoaXMuY29udGVudEluaXQoKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgICBnZXQgc2V0dGluZ3MoKSB7IHJldHVybiB0aGlzLl9zZXR0aW5nczsgfVxuICAgIHNldCBzZXR0aW5ncyh2YWwpIHtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXcgU2VsZWN0TGlzdFNldHRpbmdzKHZhbCk7XG4gICAgICAgIHRoaXMuY29udGVudEluaXQoKTtcbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7IHJldHVybiB0aGlzLl9vcHRpb25zOyB9XG4gICAgc2V0IG9wdGlvbnModmFsKSB7XG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSB2YWw7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuICAgIGdldCBtb2RlbCgpIHsgcmV0dXJuIHRoaXMuX21vZGVsOyB9XG4gICAgc2V0IG1vZGVsKHZhbCkge1xuICAgICAgICB0aGlzLl9tb2RlbCA9IHZhbDtcbiAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMgPSAodmFsICYmIHZhbC5sZW5ndGgpID8gdmFsLnNsaWNlKDApIDogW107XG4gICAgICAgIHRoaXMucmVmcmVzaFN0eWxlcygpO1xuICAgIH1cbiAgICBnZXQgaXNPcGVuKCkgeyByZXR1cm4gdGhpcy5faXNPcGVuOyB9XG4gICAgc2V0IGlzT3Blbih2YWwpIHtcbiAgICAgICAgdGhpcy5faXNPcGVuID0gdmFsO1xuICAgICAgICBpZiAodmFsID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLnNldEZvY3VzKCk7XG4gICAgICAgICAgICB0aGlzLmZpbHRlcklucHV0LnZhbHVlID0gJyc7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuICAgIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdpbnB1dCcsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLmZpbHRlcklucHV0LFxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IHRoaXMub25JbnB1dEZpbHRlci5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMub2tCdXR0b24sXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy5vbkNsaWNrT2suYmluZCh0aGlzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdjbGljaycsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLmNhbmNlbEJ1dHRvbixcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiB0aGlzLm9uQ2xpY2tDYW5jZWwuYmluZCh0aGlzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdjbGljaycsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLmNsZWFyQnV0dG9uLFxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IHRoaXMub25DbGlja0NsZWFyLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnY2xpY2snLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5saXN0TWVudSxcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiB0aGlzLm9uQ2xpY2tMaXN0TWVudS5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKHggPT4ge1xuICAgICAgICAgICAgeC50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcih4LmV2ZW50TmFtZSwgeC5oYW5kbGVyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKHggPT4ge1xuICAgICAgICAgICAgeC50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih4LmV2ZW50TmFtZSwgeC5oYW5kbGVyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldFNlbGVjdGVkT3B0aW9ucyh2YWx1ZSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuc2VsZWN0ZWRPcHRpb25zLmluZGV4T2YodmFsdWUpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNldFNlbGVjdGVkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRPcHRpb25zKHZhbHVlKTtcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZUVtaXQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRTZWxlY3RlZEFsbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrQWxsKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2hlY2tBbGwoKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zID0gdGhpcy5vcHRpb25zLm1hcChvcHRpb24gPT4gb3B0aW9uLmlkKTtcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZUVtaXQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc1NlbGVjdGVkKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkT3B0aW9ucy5pbmRleE9mKHZhbHVlKSA+IC0xO1xuICAgIH1cbiAgICBzZXRGb2N1cygpIHtcbiAgICAgICAgaWYgKHRoaXMuZmlsdGVySW5wdXQpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVySW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgIH0sIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uQ2xpY2tPayhldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VFbWl0KCk7XG4gICAgfVxuICAgIG9uQ2xpY2tDYW5jZWwoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zID0gdGhpcy5tb2RlbC5zbGljZSgwKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnc2VsZWN0aW9uQ2FuY2VsJywgeyBkZXRhaWw6IHRydWUgfSkpO1xuICAgICAgICB0aGlzLnJlZnJlc2hTdHlsZXMoKTtcbiAgICB9XG4gICAgb25DbGlja0NsZWFyKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZE9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZUVtaXQoKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoU3R5bGVzKCk7XG4gICAgfVxuICAgIGdldCBhbGxTZWxlY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLm9wdGlvbnMgJiZcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5sZW5ndGggIT09IDAgJiZcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zICYmXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucy5sZW5ndGggPT09IHRoaXMub3B0aW9ucy5sZW5ndGgpO1xuICAgIH1cbiAgICBnZXQgcGFydGlhbGx5U2VsZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkT3B0aW9ucy5sZW5ndGggIT09IDAgJiYgIXRoaXMuYWxsU2VsZWN0ZWQ7XG4gICAgfVxuICAgIHNlbGVjdGlvbkNoYW5nZUVtaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLm1vZGVsLmxlbmd0aCA9PT0gdGhpcy5zZWxlY3RlZE9wdGlvbnMubGVuZ3RoICYmIHRoaXMubW9kZWwuZXZlcnkoKHZhbHVlLCBpbmRleCkgPT4gdmFsdWUgPT09IHRoaXMuc2VsZWN0ZWRPcHRpb25zW2luZGV4XSkpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3NlbGVjdGlvbkNhbmNlbCcsIHsgZGV0YWlsOiB0cnVlIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWwgPSB0aGlzLnNlbGVjdGVkT3B0aW9ucy5zbGljZSgwKTtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3NlbGVjdGlvbkNoYW5nZScsIHsgZGV0YWlsOiB0aGlzLm1vZGVsIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbklucHV0RmlsdGVyKCkge1xuICAgICAgICB0aGlzLmZpbHRlcmVkT3B0aW9ucyA9IHRoaXMuZmlsdGVyT3B0aW9uc0J5TmFtZSh0aGlzLmZpbHRlcklucHV0LnZhbHVlKTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG4gICAgZ2V0IHZpZXdPcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuZmlsdGVySW5wdXQudmFsdWUpID8gdGhpcy5maWx0ZXJlZE9wdGlvbnMgOiB0aGlzLm9wdGlvbnM7XG4gICAgfVxuICAgIGZpbHRlck9wdGlvbnNCeU5hbWUodmFsdWUpIHtcbiAgICAgICAgaWYgKCF2YWx1ZSB8fCAhdGhpcy5vcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZmlsdGVyKHZhbCA9PiB2YWwubmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsdWUudG9Mb3dlckNhc2UoKSkgPiAtMSk7XG4gICAgfVxuICAgIGNvbnRlbnRJbml0KCkge1xuICAgICAgICB0aGlzLmZpbHRlcklucHV0LnBsYWNlaG9sZGVyID0gdGhpcy5zZXR0aW5ncy5zZWFyY2hNZXNzYWdlO1xuICAgICAgICB0aGlzLm9rQnV0dG9uLnRleHRDb250ZW50ID0gJ09LJztcbiAgICAgICAgdGhpcy5jYW5jZWxCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLnNldHRpbmdzLmNhbmNlbE1lc3NhZ2U7XG4gICAgICAgIHRoaXMuY2xlYXJCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLnNldHRpbmdzLmNsZWFyTWVzc2FnZTtcbiAgICAgICAgdGhpcy5jaGVja2JveEFsbC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSB0aGlzLnNldHRpbmdzLnNlbGVjdEFsbE1lc3NhZ2U7XG4gICAgICAgIHRoaXMub2tCdXR0b24uc3R5bGUuZGlzcGxheSA9IHRoaXMuc2V0dGluZ3MubXVsdGlwbGUgPyAnYmxvY2snIDogJ25vbmUnO1xuICAgICAgICB0aGlzLnNlbGVjdEFsbC5zdHlsZS5kaXNwbGF5ID0gKHRoaXMuc2V0dGluZ3MubXVsdGlwbGUgJiYgdGhpcy5zZXR0aW5ncy5lbmFibGVTZWxlY3RBbGwpID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICAgICAgdGhpcy5maWx0ZXJJbnB1dC5zdHlsZS5kaXNwbGF5ID0gdGhpcy5zZXR0aW5ncy5lbmFibGVGaWx0ZXJJbnB1dCA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0Q29udGVudCgpO1xuICAgICAgICBjb25zdCBsaXN0Q29udGVudCA9IHRoaXMuY3JlYXRlTGlzdENvbnRlbnQoKS5qb2luKCcnKTtcbiAgICAgICAgdGhpcy5saXN0TWVudS5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGxpc3RDb250ZW50KTtcbiAgICAgICAgdGhpcy5yZWZyZXNoU3R5bGVzKCk7XG4gICAgfVxuICAgIGNyZWF0ZUxpc3RDb250ZW50KCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgdGhpcy52aWV3T3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XG4gICAgICAgICAgICBsZXQgZWxlbWVudDtcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IGdldFRlbXBsYXRlTXVsdGlwbGUob3B0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBnZXRUZW1wbGF0ZVNpbmdsZShvcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0LnB1c2goZWxlbWVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBnZXREYXRhSWQodGFyZ2V0KSB7XG4gICAgICAgIGNvbnN0IGVsID0gdGFyZ2V0LnRhZ05hbWUgPT09ICdMSScgPyB0YXJnZXQgOiB0YXJnZXQuY2xvc2VzdCgnbGknKTtcbiAgICAgICAgcmV0dXJuIChlbCAmJiBlbC5kYXRhc2V0LmlkKSA/IGVsLmRhdGFzZXQuaWQgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgbGlzdENvbnRlbnQoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMubGlzdE1lbnUuY2hpbGRyZW4pO1xuICAgIH1cbiAgICBvbkNsaWNrTGlzdE1lbnUoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmdldERhdGFJZChldmVudC50YXJnZXQpO1xuICAgICAgICBpZiAoaWQgIT09IG51bGwgJiYgaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBpZiAoaWQgPT09ICctMScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkQWxsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGVkKGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFN0eWxlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlZnJlc2hTdHlsZXMoKSB7XG4gICAgICAgIHRoaXMubGlzdENvbnRlbnQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmdldERhdGFJZChlbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2VsZWN0ZWQoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBY3RpdmVTdHlsZXMoZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUFjdGl2ZVN0eWxlcyhlbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY2hlY2tib3hBbGwuY2hlY2tlZCA9IHRoaXMuYWxsU2VsZWN0ZWQ7XG4gICAgICAgIHRoaXMuY2hlY2tib3hBbGwuaW5kZXRlcm1pbmF0ZSA9IHRoaXMucGFydGlhbGx5U2VsZWN0ZWQ7XG4gICAgfVxuICAgIGFkZEFjdGl2ZVN0eWxlcyhlbGVtZW50KSB7XG4gICAgICAgIGlmICghZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLm11bHRpcGxlKSB7XG4gICAgICAgICAgICB0aGlzLnNldElucHV0Q2hlY2tlZChlbGVtZW50LCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5hZGQoJ2R0LWljb24tb2snKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVBY3RpdmVTdHlsZXMoZWxlbWVudCkge1xuICAgICAgICBpZiAoIWVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRJbnB1dENoZWNrZWQoZWxlbWVudCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LnJlbW92ZSgnZHQtaWNvbi1vaycpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldElucHV0Q2hlY2tlZChlbGVtZW50LCBjaGVja2VkKSB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgaW5wdXQuY2hlY2tlZCA9IGNoZWNrZWQ7XG4gICAgfVxuICAgIHJlbW92ZUxpc3RDb250ZW50KCkge1xuICAgICAgICB0aGlzLmxpc3RDb250ZW50LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXREYXRhSWQoZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAoaWQgIT09IG51bGwgJiYgaWQgIT09IHVuZGVmaW5lZCAmJiBpZCAhPT0gJy0xJykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnd2ViLXNlbGVjdC1saXN0JywgU2VsZWN0TGlzdENvbXBvbmVudCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZWxlY3QtbGlzdC5jb21wb25lbnQuanMubWFwIiwiZXhwb3J0ICogZnJvbSAnLi9zZWxlY3QtbGlzdC5jb21wb25lbnQnO1xuZXhwb3J0ICogZnJvbSAnLi9zZWxlY3QtbGlzdC5zZXR0aW5ncyc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwic2VsZWN0LWxpc3QtZGVtb1xcXCI+XFxuICA8d2ViLXNlbGVjdC1saXN0IGNsYXNzPVxcXCJzbC1jb2x1bW5cXFwiIGlkPVxcXCJzZWxlY3QtbGlzdC1kZW1vMVxcXCI+PC93ZWItc2VsZWN0LWxpc3Q+XFxuICA8d2ViLXNlbGVjdC1saXN0IGNsYXNzPVxcXCJzbC1jb2x1bW5cXFwiIGlkPVxcXCJzZWxlY3QtbGlzdC1kZW1vMlxcXCI+PC93ZWItc2VsZWN0LWxpc3Q+XFxuPC9kaXY+XFxuXCI7Il0sInNvdXJjZVJvb3QiOiIifQ==