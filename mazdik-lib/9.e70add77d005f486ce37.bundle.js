(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{122:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));class s{constructor(t){this.dragX=!0,this.dragY=!0,t&&Object.assign(this,t)}}class n{constructor(t,e){this.element=t,this.options=new s(e),this.handler=function(t,e,i){t.style.cursor="grab";let s={top:0,left:0,x:0,y:0};const n=e=>{t.style.cursor="grabbing",t.style.userSelect="none",s={left:t.scrollLeft,top:t.scrollTop,x:e.clientX,y:e.clientY},document.addEventListener("mousemove",a),document.addEventListener("mouseup",r)},a=n=>{const a=n.clientX-s.x,r=n.clientY-s.y;e&&(t.scrollLeft=s.left-a),i&&(t.scrollTop=s.top-r)},r=()=>{t.style.cursor="grab",t.style.removeProperty("user-select"),document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r)};return t.addEventListener("mousedown",n),n}(this.element,this.options.dragX,this.options.dragY)}destroy(){this.element.addEventListener("mousedown",this.handler)}}},128:function(t,e){},141:function(t,e,i){"use strict";var s=i(0),n=i(3),a=i(2),r=i(122);function d(t,e){return(e.getTime()-t.getTime())/1e3}function o(t,e,i,n){const a=t=>t.toLocaleDateString([],{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),r=d(t,e),o=Object(s.toISOStringIgnoreTZ)(i);if(r<=86400){const e=o.substr(11,5);return"00:00"===e&&86400===d(t,i)?"24:00":e}return r>86400&&r<=345600||n>1?a(i):i.toLocaleDateString([],{month:"2-digit",day:"2-digit"})}function l(t,e,i,s){const n=d(t,e);let a=function(t,e,i,s){const n=d(t,e),a=i*n/100,r=s*n/100;return{dateFrom:new Date(t.getTime()+1e3*a),dateTo:new Date(t.getTime()+1e3*r)}}(t,e,i,s);return n>1296e3&&(a={dateFrom:c(a.dateFrom),dateTo:c(a.dateTo)}),a}function h(t,e,i){const s=i/d(t,e)*100;return Math.round(100*s)/100}function c(t){return t.setHours(t.getHours()+Math.round(t.getMinutes()/60)),t.setMinutes(0,0,0),t}class u extends HTMLElement{constructor(){super(),this._zoom=1,this.handleMultiplier=2,this.xAxisLabels=[],this.chartSliderData=[],this.handleLeftPos=0,this.chartSliderWidth=100,this.countAxisLabels=15,this.unit="%",this.listeners=[]}get dateFrom(){return this._dateFrom}set dateFrom(t){this._dateFrom=t,this.onInputChanges()}get dateTo(){return this._dateTo}set dateTo(t){this._dateTo=t,this.onInputChanges()}get intervals(){return this._intervals}set intervals(t){this._intervals=t,this.onInputChanges()}get zoom(){return this._zoom}set zoom(t){t&&t>0&&(this._zoom=t,this.zooming())}connectedCallback(){this.isInitialized||(this.onInit(),this.isInitialized=!0)}disconnectedCallback(){this.removeEventListeners(),this.draggableDirective.destroy(),this.resizableDirective.destroy(),this.dragToScroll.destroy()}onInit(){this.renderInit(),this.addEventListeners()}addEventListeners(){this.listeners=[{eventName:"keydown",target:window,handler:this.onKeyDown.bind(this)},{eventName:"mousedown",target:this.sliderHandleBody,handler:this.onMouseDown.bind(this)},{eventName:"touchstart",target:this.sliderHandleBody,handler:this.onTouchStart.bind(this)},{eventName:"dragEnd",target:this.sliderHandle,handler:this.onDragEnd.bind(this)},{eventName:"resizeEnd",target:this.sliderHandle,handler:this.onResizeEnd.bind(this)}],this.listeners.forEach(t=>{t.target.addEventListener(t.eventName,t.handler)})}removeEventListeners(){this.listeners.forEach(t=>{t.target.removeEventListener(t.eventName,t.handler)})}onInputChanges(){this.dateFrom&&this.dateTo&&this.intervals&&(this.handleLeftPos=0,[this.minHandleTime,this.maxHandleTime]=function(t,e,i){const s=d(t,e);let n=0;return n=s<=86400||s>86400&&s<=86400*i*2?3600:86400,[n,n*i]}(this.dateFrom,this.dateTo,this.handleMultiplier),this.createChartSlider())}onKeyDown(t){"ArrowLeft"===t.key?this.decrementHandleLeftPos():"ArrowRight"===t.key&&this.incrementHandleLeftPos(),this.updateStyles()}createChartSlider(){this.handleMinWidth=h(this.dateFrom,this.dateTo,this.minHandleTime),this.handleMaxWidth=h(this.dateFrom,this.dateTo,this.maxHandleTime),this.handleWidth=this.handleMinWidth,this.xAxisLabels=function(t,e,i,s){const n=Math.round(i*s),a=d(t,e),r=a/n,l=r/a*100;let h=1/n*.9*100;h=Math.round(100*h)/100;const c=[];for(let i=0;i<=n;i++){const a=new Date(t.getTime()+1e3*r*i),d={widthPercent:i===n?null:h,positionPercent:l*i,name:o(t,e,a,s)};c.push(d)}return c}(this.dateFrom,this.dateTo,this.countAxisLabels,this.zoom),this.chartSliderData=function(t,e,i){const s=[];if(!i||0===i.length)return[];const n=d(t,e),a=i.map(t=>t.dtFrom),r=i.map(t=>t.dtTo),o=a.concat(r).filter((t,e,i)=>i.findIndex(e=>e.getTime()===t.getTime())===e);return o.sort((t,e)=>t.getTime()-e.getTime()),o.forEach((a,r)=>{let l=a,h=o[r+1]?o[r+1]:e;l<t&&(l=t),h>e&&(h=e);const c=i.filter(t=>t.dtFrom<h&&t.dtTo>l),u=c.map(t=>({heightPercent:Math.round(100/c.length*100)/100,color:t.color,label:t.label})),m=d(l,h),g={widthPercent:m/n*100,positionPercent:100-d(l,e)/n*100,items:u};m>0&&c.length&&s.push(g)}),s}(this.dateFrom,this.dateTo,this.intervals),this.render()}onDragEnd(t){t&&!Object(s.isBlank)(t.detail.left)&&(this.handleLeftPos=t.detail.left,this.calcDates())}onResizeEnd(t){t&&!Object(s.isBlank)(t.detail.width)&&(this.handleWidth=t.detail.width,Object(s.isBlank)(t.detail.left)||(this.handleLeftPos=t.detail.left),this.calcDates())}calcDates(){const t=l(this.dateFrom,this.dateTo,this.handleLeftPos,this.handleLeftPos+this.handleWidth);this.dispatchEvent(new CustomEvent("sliderChange",{detail:t}))}incrementHandleLeftPos(){if(this.handleLeftPos+this.handleWidth<100){const t=this.handleLeftPos+1;this.handleLeftPos=Math.min(t,100-this.handleWidth),this.calcDates()}}decrementHandleLeftPos(){if(this.handleLeftPos>0){const t=this.handleLeftPos-1;this.handleLeftPos=Math.max(t,0),this.calcDates()}}zooming(){this.chartSliderWidth=100*this.zoom,this.handleLeftPos=0,this.createChartSlider()}setOffsetX(t,e,i){this._zoom=i,this.chartSliderWidth=100*this.zoom,this.minHandleTime=d(t,e),this.handleLeftPos=function(t,e,i,s){let n=h(t,e,d(t,i));return n+s>100&&(n=100-s),n=Math.max(0,Math.min(n,100)),n}(this.dateFrom,this.dateTo,t,this.handleWidth),this.createChartSlider(),requestAnimationFrame(()=>{const t=(this.scrollWidth-this.clientWidth)*this.handleLeftPos/100;this.scrollLeft=t})}renderInit(){this.classList.add("chart-slider-wrapper"),this.slider=document.createElement("div"),this.slider.classList.add("chart-slider"),this.append(this.slider),this.sliderLine=document.createElement("div"),this.sliderLine.classList.add("chart-slider__line"),this.slider.append(this.sliderLine),this.sliderAxis=document.createElement("div"),this.sliderAxis.classList.add("chart-slider__axis"),this.slider.append(this.sliderAxis),this.sliderHandle=document.createElement("div"),this.sliderHandle.classList.add("chart-slider__handle"),this.sliderHandleBody=document.createElement("div"),this.sliderHandleBody.classList.add("chart-slider__handle__body"),this.sliderHandle.append(this.sliderHandleBody);this.draggableDirective=new n.a(this.sliderHandle,{dragX:!0,dragY:!1,inViewport:!0,relative:!0,inPercentage:!0,stopPropagation:!0});this.resizableDirective=new a.a(this.sliderHandle,{south:!1,east:!0,southEast:!1,west:!0,inPercentage:!0}),this.resizableDirective.addEventListeners(),this.dragToScroll=new r.a(this,{dragX:!0,dragY:!1})}render(){const t=this.chartSliderData.map(t=>{const e=document.createElement("div");e.classList.add("chart-slider__line__col"),e.style.width=t.widthPercent+this.unit,e.style.left=t.positionPercent+this.unit;const i=t.items.map(t=>{const e=document.createElement("div");return e.classList.add("chart-slider__line__col__item"),e.style.height=t.heightPercent+this.unit,e.style.backgroundColor=t.color,e});return e.append(...i),e});this.sliderLine.innerHTML="",this.sliderLine.append(...t),this.sliderLine.append(this.sliderHandle);const e=this.xAxisLabels.map((t,e)=>{const i=document.createElement("div");return i.classList.add("chart-slider__axis__item"),e===this.xAxisLabels.length-1&&i.classList.add("last"),i.style.width=t.widthPercent+this.unit,i.style.left=t.positionPercent+this.unit,i.textContent=t.name,i});this.sliderAxis.innerHTML="",this.sliderAxis.append(...e),this.updateStyles()}updateStyles(){this.slider.style.width=this.chartSliderWidth+this.unit,this.sliderHandle.style.width=this.handleWidth+this.unit,this.sliderHandle.style.minWidth=this.handleMinWidth+this.unit,this.sliderHandle.style.maxWidth=this.handleMaxWidth+this.unit,this.sliderHandle.style.left=this.handleLeftPos+this.unit}onMouseDown(t){this.draggableDirective.start(t)}onTouchStart(t){this.draggableDirective.start(t)}}customElements.define("web-chart-slider",u)},143:function(t,e,i){"use strict";i(141),i(128)},18:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return s}));i(143);class s{get template(){return'<web-chart-slider></web-chart-slider>\n    <button class="dt-button" id="button-zoom">zoom 2</button>\n    <button class="dt-button" id="button-offset">set offset</button>'}load(){const t=document.querySelector("web-chart-slider"),e=new Date;t.dateFrom=new Date(e.getFullYear(),e.getMonth(),1),t.dateTo=new Date(e.getFullYear(),e.getMonth()+1,1),t.intervals=function(){const t=new Date;return[{dtFrom:new Date(t.getFullYear(),t.getMonth(),1),dtTo:new Date(t.getFullYear(),t.getMonth(),2),label:"Test1",color:"#F5A363"},{dtFrom:new Date(t.getFullYear(),t.getMonth(),4),dtTo:new Date(t.getFullYear(),t.getMonth(),5),label:"Test2",color:"#7FB6EA"},{dtFrom:new Date(t.getFullYear(),t.getMonth(),10),dtTo:new Date(t.getFullYear(),t.getMonth(),11),label:"Test3",color:"#7FB6EA"},{dtFrom:new Date(t.getFullYear(),t.getMonth(),15),dtTo:new Date(t.getFullYear(),t.getMonth(),17),label:"Test4",color:"#B87FE5"},{dtFrom:new Date(t.getFullYear(),t.getMonth(),16),dtTo:new Date(t.getFullYear(),t.getMonth(),17),label:"Test5",color:"#F5A363"},{dtFrom:new Date(t.getFullYear(),t.getMonth(),16),dtTo:new Date(t.getFullYear(),t.getMonth(),17),label:"Test6",color:"#7FB6EA"},{dtFrom:new Date(t.getFullYear(),t.getMonth(),22),dtTo:new Date(t.getFullYear(),t.getMonth(),26),label:"Test7",color:"#7FB6EA"}]}(),t.addEventListener("sliderChange",t=>{console.log(t.detail)});document.querySelector("#button-zoom").addEventListener("click",()=>{t.zoom=2});document.querySelector("#button-offset").addEventListener("click",()=>{const i=new Date(e.getFullYear(),e.getMonth(),5),s=new Date(e.getFullYear(),e.getMonth(),7);t.setOffsetX(i,s,t.zoom)})}}}}]);