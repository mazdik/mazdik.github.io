(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{20:function(e,n,s){"use strict";var t=s(0);class i{constructor(e){this.element=e,this.addEventListeners()}addEventListeners(){this.clickListener=this.onClick.bind(this),this.element.addEventListener("click",this.clickListener),this.windowClickListener=this.onWindowClick.bind(this),window.document.addEventListener("click",this.windowClickListener),this.windowKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.windowKeydownListener)}removeEventListeners(){this.element.removeEventListener("click",this.clickListener),window.document.removeEventListener("click",this.windowClickListener),window.document.removeEventListener("keydown",this.windowKeydownListener)}onClick(){this.selectContainerClicked=!0}onWindowClick(){this.selectContainerClicked||this.closeDropdown(),this.selectContainerClicked=!1}onKeyDown(e){e.keyCode!==t.a.ESCAPE&&"Escape"!==e.key||this.closeDropdown()}toggleDropdown(){this.isOpen?this.closeDropdown():this.openDropdown()}openDropdown(){this.isOpen||(this.isOpen=!0,this.element.dispatchEvent(new CustomEvent("open",{detail:this.isOpen})))}closeDropdown(){this.isOpen&&(this.isOpen=!1,this.element.dispatchEvent(new CustomEvent("open",{detail:this.isOpen})))}}class o{constructor(e){this.element=e,this.isOpen=!1,this.listeners=[],this.addEventListeners()}set clickedElement(e){e!==this.element&&this.isOpen&&(this.isOpen=!1,this.updateStyles())}addEventListeners(){this.listeners=[{eventName:"click",target:this.element,handler:this.toggleDropdown.bind(this)}],this.listeners.forEach(e=>{e.target.addEventListener(e.eventName,e.handler)})}removeEventListeners(){this.listeners.forEach(e=>{e.target.removeEventListener(e.eventName,e.handler)})}toggle(){this.isOpen=!this.isOpen}toggleDropdown(e){e.stopPropagation(),this.toggle(),this.updateStyles(),this.element.dispatchEvent(new CustomEvent("clickElement",{detail:this.element}))}onWindowClick(e){const n=e.target;n&&(this.element.contains(n)||(this.isOpen=!1),this.updateStyles())}updateStyles(){this.isOpen?this.element.classList.add("open"):this.element.classList.remove("open")}}class a{constructor(e){this.dropdowns=[],this.listeners=[],e.forEach(e=>{this.dropdowns.push(new o(e))}),this.addEventListeners(e)}destroy(){this.removeEventListeners(),this.dropdowns.forEach(e=>{e.removeEventListeners()})}addEventListeners(e){this.listeners=[{eventName:"click",target:window,handler:this.onWindowClick.bind(this)}],e.forEach(e=>{this.listeners.push({eventName:"clickElement",target:e,handler:this.onClickElement.bind(this)})}),this.listeners.forEach(e=>{e.target.addEventListener(e.eventName,e.handler)})}removeEventListeners(){this.listeners.forEach(e=>{e.target.removeEventListener(e.eventName,e.handler)})}onWindowClick(e){this.dropdowns.forEach(n=>{n.onWindowClick(e)})}onClickElement(e){this.dropdowns.forEach(n=>{n.clickedElement=e.detail})}}s.d(n,"a",(function(){return i})),s.d(n,"b",(function(){return a}))},26:function(e,n){e.exports='<div class="dropdown-directive-demo">\n  <nav class="navbar">\n    <a href="#" class="logo">Home</a>\n    <ul class="main-nav">\n      <li class="dropdown">\n        <a class="nav-links">Menu 1 &nbsp;<span class="caret">▼</span></a>\n        <div class="dropdown-menu">\n          <a class="nav-links">test 1</a>\n          <a class="nav-links">test 2</a>\n          <a class="nav-links">test 3</a>\n        </div>\n      </li>\n      <li class="dropdown">\n        <a class="nav-links">Menu 2 &nbsp;<span class="caret">▼</span></a>\n        <div class="dropdown-menu">\n          <a class="nav-links">test 1</a>\n          <a class="nav-links">test 2</a>\n          <a class="nav-links">test 3</a>\n        </div>\n      </li>\n      <li class="dropdown">\n        <a class="nav-links">Menu 3 &nbsp;<span class="caret">▼</span></a>\n        <div class="dropdown-menu">\n          <a class="nav-links">test 1</a>\n          <a class="nav-links">test 2</a>\n          <a class="nav-links">test 3</a>\n        </div>\n      </li>\n    </ul>\n  </nav>\n</div>\n'},9:function(e,n,s){"use strict";s.r(n),s.d(n,"default",(function(){return a}));var t=s(26),i=s.n(t),o=s(20);class a{get template(){return i.a}load(){const e=document.querySelectorAll(".dropdown-directive-demo .dropdown");this.dropdown=new o.b(e)}onDestroy(){this.dropdown.destroy()}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vZHJvcGRvd24vbGliL2Ryb3AtZG93bi5qcyIsIndlYnBhY2s6Ly8vLi4vZHJvcGRvd24vbGliL2Ryb3Bkb3duLWVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vLy4uL2Ryb3Bkb3duL2xpYi9kcm9wZG93bi5qcyIsIndlYnBhY2s6Ly8vLi4vZHJvcGRvd24vbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlcy9kcm9wZG93bi5odG1sIiwid2VicGFjazovLy8uL3NyYy9wYWdlcy9kcm9wZG93bi50cyJdLCJuYW1lcyI6WyJlbGVtZW50IiwidGhpcyIsImFkZEV2ZW50TGlzdGVuZXJzIiwiY2xpY2tMaXN0ZW5lciIsIm9uQ2xpY2siLCJiaW5kIiwiYWRkRXZlbnRMaXN0ZW5lciIsIndpbmRvd0NsaWNrTGlzdGVuZXIiLCJvbldpbmRvd0NsaWNrIiwid2luZG93IiwiZG9jdW1lbnQiLCJ3aW5kb3dLZXlkb3duTGlzdGVuZXIiLCJvbktleURvd24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2VsZWN0Q29udGFpbmVyQ2xpY2tlZCIsImNsb3NlRHJvcGRvd24iLCJldmVudCIsImtleUNvZGUiLCJFU0NBUEUiLCJrZXkiLCJpc09wZW4iLCJvcGVuRHJvcGRvd24iLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJEcm9wZG93bkVsZW1lbnQiLCJsaXN0ZW5lcnMiLCJlbCIsInVwZGF0ZVN0eWxlcyIsImV2ZW50TmFtZSIsInRhcmdldCIsImhhbmRsZXIiLCJ0b2dnbGVEcm9wZG93biIsImZvckVhY2giLCJ4Iiwic3RvcFByb3BhZ2F0aW9uIiwidG9nZ2xlIiwidGFyZ2V0RWxlbWVudCIsImNvbnRhaW5zIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiZWxlbWVudHMiLCJkcm9wZG93bnMiLCJwdXNoIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJvbkNsaWNrRWxlbWVudCIsImNsaWNrZWRFbGVtZW50IiwibW9kdWxlIiwiZXhwb3J0cyIsIkRyb3Bkb3duRGVtbyIsImxpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZHJvcGRvd24iLCJkZXN0cm95Il0sIm1hcHBpbmdzIjoib0dBQ08sTUFBTSxFQUNULFlBQVlBLEdBQ1JDLEtBQUtELFFBQVVBLEVBQ2ZDLEtBQUtDLG9CQUVULG9CQUNJRCxLQUFLRSxjQUFnQkYsS0FBS0csUUFBUUMsS0FBS0osTUFDdkNBLEtBQUtELFFBQVFNLGlCQUFpQixRQUFTTCxLQUFLRSxlQUM1Q0YsS0FBS00sb0JBQXNCTixLQUFLTyxjQUFjSCxLQUFLSixNQUNuRFEsT0FBT0MsU0FBU0osaUJBQWlCLFFBQVNMLEtBQUtNLHFCQUMvQ04sS0FBS1Usc0JBQXdCVixLQUFLVyxVQUFVUCxLQUFLSixNQUNqRFEsT0FBT0MsU0FBU0osaUJBQWlCLFVBQVdMLEtBQUtVLHVCQUVyRCx1QkFDSVYsS0FBS0QsUUFBUWEsb0JBQW9CLFFBQVNaLEtBQUtFLGVBQy9DTSxPQUFPQyxTQUFTRyxvQkFBb0IsUUFBU1osS0FBS00scUJBQ2xERSxPQUFPQyxTQUFTRyxvQkFBb0IsVUFBV1osS0FBS1UsdUJBRXhELFVBQ0lWLEtBQUthLHdCQUF5QixFQUVsQyxnQkFDU2IsS0FBS2Esd0JBQ05iLEtBQUtjLGdCQUVUZCxLQUFLYSx3QkFBeUIsRUFFbEMsVUFBVUUsR0FDRkEsRUFBTUMsVUFBWSxJQUFLQyxRQUF3QixXQUFkRixFQUFNRyxLQUN2Q2xCLEtBQUtjLGdCQUdiLGlCQUNJZCxLQUFLbUIsT0FBU25CLEtBQUtjLGdCQUFrQmQsS0FBS29CLGVBRTlDLGVBQ1NwQixLQUFLbUIsU0FDTm5CLEtBQUttQixRQUFTLEVBQ2RuQixLQUFLRCxRQUFRc0IsY0FBYyxJQUFJQyxZQUFZLE9BQVEsQ0FBRUMsT0FBUXZCLEtBQUttQixXQUcxRSxnQkFDUW5CLEtBQUttQixTQUNMbkIsS0FBS21CLFFBQVMsRUFDZG5CLEtBQUtELFFBQVFzQixjQUFjLElBQUlDLFlBQVksT0FBUSxDQUFFQyxPQUFRdkIsS0FBS21CLFlDN0N2RSxNQUFNSyxFQUNULFlBQVl6QixHQUNSQyxLQUFLRCxRQUFVQSxFQUNmQyxLQUFLbUIsUUFBUyxFQUNkbkIsS0FBS3lCLFVBQVksR0FDakJ6QixLQUFLQyxvQkFFVCxtQkFBbUJ5QixHQUNYQSxJQUFPMUIsS0FBS0QsU0FBV0MsS0FBS21CLFNBQzVCbkIsS0FBS21CLFFBQVMsRUFDZG5CLEtBQUsyQixnQkFHYixvQkFDSTNCLEtBQUt5QixVQUFZLENBQ2IsQ0FDSUcsVUFBVyxRQUNYQyxPQUFRN0IsS0FBS0QsUUFDYitCLFFBQVM5QixLQUFLK0IsZUFBZTNCLEtBQUtKLFFBRzFDQSxLQUFLeUIsVUFBVU8sUUFBUUMsSUFDbkJBLEVBQUVKLE9BQU94QixpQkFBaUI0QixFQUFFTCxVQUFXSyxFQUFFSCxXQUdqRCx1QkFDSTlCLEtBQUt5QixVQUFVTyxRQUFRQyxJQUNuQkEsRUFBRUosT0FBT2pCLG9CQUFvQnFCLEVBQUVMLFVBQVdLLEVBQUVILFdBR3BELFNBQ0k5QixLQUFLbUIsUUFBVW5CLEtBQUttQixPQUV4QixlQUFlSixHQUNYQSxFQUFNbUIsa0JBQ05sQyxLQUFLbUMsU0FDTG5DLEtBQUsyQixlQUNMM0IsS0FBS0QsUUFBUXNCLGNBQWMsSUFBSUMsWUFBWSxlQUFnQixDQUFFQyxPQUFRdkIsS0FBS0QsV0FFOUUsY0FBY2dCLEdBQ1YsTUFBTXFCLEVBQWdCckIsRUFBTWMsT0FDdkJPLElBR2lCcEMsS0FBS0QsUUFBUXNDLFNBQVNELEtBRXhDcEMsS0FBS21CLFFBQVMsR0FFbEJuQixLQUFLMkIsZ0JBRVQsZUFDUTNCLEtBQUttQixPQUNMbkIsS0FBS0QsUUFBUXVDLFVBQVVDLElBQUksUUFHM0J2QyxLQUFLRCxRQUFRdUMsVUFBVUUsT0FBTyxTQ3REbkMsTUFBTSxFQUNULFlBQVlDLEdBQ1J6QyxLQUFLMEMsVUFBWSxHQUNqQjFDLEtBQUt5QixVQUFZLEdBQ2pCZ0IsRUFBU1QsUUFBU2pDLElBQ2RDLEtBQUswQyxVQUFVQyxLQUFLLElBQUluQixFQUFnQnpCLE1BRTVDQyxLQUFLQyxrQkFBa0J3QyxHQUUzQixVQUNJekMsS0FBSzRDLHVCQUNMNUMsS0FBSzBDLFVBQVVWLFFBQVFDLElBQ25CQSxFQUFFVyx5QkFHVixrQkFBa0JILEdBQ2R6QyxLQUFLeUIsVUFBWSxDQUNiLENBQ0lHLFVBQVcsUUFDWEMsT0FBUXJCLE9BQ1JzQixRQUFTOUIsS0FBS08sY0FBY0gsS0FBS0osUUFHekN5QyxFQUFTVCxRQUFTakMsSUFDZEMsS0FBS3lCLFVBQVVrQixLQUFLLENBQ2hCZixVQUFXLGVBQ1hDLE9BQVE5QixFQUNSK0IsUUFBUzlCLEtBQUs2QyxlQUFlekMsS0FBS0osVUFHMUNBLEtBQUt5QixVQUFVTyxRQUFRQyxJQUNuQkEsRUFBRUosT0FBT3hCLGlCQUFpQjRCLEVBQUVMLFVBQVdLLEVBQUVILFdBR2pELHVCQUNJOUIsS0FBS3lCLFVBQVVPLFFBQVFDLElBQ25CQSxFQUFFSixPQUFPakIsb0JBQW9CcUIsRUFBRUwsVUFBV0ssRUFBRUgsV0FHcEQsY0FBY2YsR0FDVmYsS0FBSzBDLFVBQVVWLFFBQVFDLElBQ25CQSxFQUFFMUIsY0FBY1EsS0FHeEIsZUFBZUEsR0FDWGYsS0FBSzBDLFVBQVVWLFFBQVFDLElBQ25CQSxFQUFFYSxlQUFpQi9CLEVBQU1RLFVDL0NyQyxxRSxpQkNBQXdCLEVBQU9DLFFBQVUsc2lDLCtCQ0NqQiw0RUFHZSxNQUFNQyxFQUVuQixlQUF5QixPQUFPLElBSWhDLE9BQ0UsTUFBTUMsRUFBT3pDLFNBQVMwQyxpQkFBaUIsc0NBQ3ZDbkQsS0FBS29ELFNBQVcsSUFBSSxJQUFTRixHQUcvQixZQUNFbEQsS0FBS29ELFNBQVNDIiwiZmlsZSI6IjMuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgS2V5cyB9IGZyb20gJ0BtYXpkaWstbGliL2NvbW1vbic7XG5leHBvcnQgY2xhc3MgRHJvcERvd24ge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5jbGlja0xpc3RlbmVyID0gdGhpcy5vbkNsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xpY2tMaXN0ZW5lcik7XG4gICAgICAgIHRoaXMud2luZG93Q2xpY2tMaXN0ZW5lciA9IHRoaXMub25XaW5kb3dDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLndpbmRvd0NsaWNrTGlzdGVuZXIpO1xuICAgICAgICB0aGlzLndpbmRvd0tleWRvd25MaXN0ZW5lciA9IHRoaXMub25LZXlEb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy53aW5kb3dLZXlkb3duTGlzdGVuZXIpO1xuICAgIH1cbiAgICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja0xpc3RlbmVyKTtcbiAgICAgICAgd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy53aW5kb3dDbGlja0xpc3RlbmVyKTtcbiAgICAgICAgd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLndpbmRvd0tleWRvd25MaXN0ZW5lcik7XG4gICAgfVxuICAgIG9uQ2xpY2soKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0Q29udGFpbmVyQ2xpY2tlZCA9IHRydWU7XG4gICAgfVxuICAgIG9uV2luZG93Q2xpY2soKSB7XG4gICAgICAgIGlmICghdGhpcy5zZWxlY3RDb250YWluZXJDbGlja2VkKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbGVjdENvbnRhaW5lckNsaWNrZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgb25LZXlEb3duKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBLZXlzLkVTQ0FQRSB8fCBldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b2dnbGVEcm9wZG93bigpIHtcbiAgICAgICAgdGhpcy5pc09wZW4gPyB0aGlzLmNsb3NlRHJvcGRvd24oKSA6IHRoaXMub3BlbkRyb3Bkb3duKCk7XG4gICAgfVxuICAgIG9wZW5Ecm9wZG93bigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdvcGVuJywgeyBkZXRhaWw6IHRoaXMuaXNPcGVuIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZURyb3Bkb3duKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ29wZW4nLCB7IGRldGFpbDogdGhpcy5pc09wZW4gfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZHJvcC1kb3duLmpzLm1hcCIsImV4cG9ydCBjbGFzcyBEcm9wZG93bkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgICBzZXQgY2xpY2tlZEVsZW1lbnQoZWwpIHtcbiAgICAgICAgaWYgKGVsICE9PSB0aGlzLmVsZW1lbnQgJiYgdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0eWxlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdjbGljaycsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy50b2dnbGVEcm9wZG93bi5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnRhcmdldC5hZGRFdmVudExpc3RlbmVyKHguZXZlbnROYW1lLCB4LmhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHguZXZlbnROYW1lLCB4LmhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9nZ2xlKCkge1xuICAgICAgICB0aGlzLmlzT3BlbiA9ICF0aGlzLmlzT3BlbjtcbiAgICB9XG4gICAgdG9nZ2xlRHJvcGRvd24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnY2xpY2tFbGVtZW50JywgeyBkZXRhaWw6IHRoaXMuZWxlbWVudCB9KSk7XG4gICAgfVxuICAgIG9uV2luZG93Q2xpY2soZXZlbnQpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgaWYgKCF0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2xpY2tlZEluc2lkZSA9IHRoaXMuZWxlbWVudC5jb250YWlucyh0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgaWYgKCFjbGlja2VkSW5zaWRlKSB7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgfVxuICAgIHVwZGF0ZVN0eWxlcygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRyb3Bkb3duLWVsZW1lbnQuanMubWFwIiwiaW1wb3J0IHsgRHJvcGRvd25FbGVtZW50IH0gZnJvbSAnLi9kcm9wZG93bi1lbGVtZW50JztcbmV4cG9ydCBjbGFzcyBEcm9wZG93biB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudHMpIHtcbiAgICAgICAgdGhpcy5kcm9wZG93bnMgPSBbXTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kcm9wZG93bnMucHVzaChuZXcgRHJvcGRvd25FbGVtZW50KGVsZW1lbnQpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoZWxlbWVudHMpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuZHJvcGRvd25zLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVycyhlbGVtZW50cykge1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdjbGljaycsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB3aW5kb3csXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy5vbldpbmRvd0NsaWNrLmJpbmQodGhpcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnY2xpY2tFbGVtZW50JyxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy5vbkNsaWNrRWxlbWVudC5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnRhcmdldC5hZGRFdmVudExpc3RlbmVyKHguZXZlbnROYW1lLCB4LmhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHguZXZlbnROYW1lLCB4LmhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25XaW5kb3dDbGljayhldmVudCkge1xuICAgICAgICB0aGlzLmRyb3Bkb3ducy5mb3JFYWNoKHggPT4ge1xuICAgICAgICAgICAgeC5vbldpbmRvd0NsaWNrKGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uQ2xpY2tFbGVtZW50KGV2ZW50KSB7XG4gICAgICAgIHRoaXMuZHJvcGRvd25zLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LmNsaWNrZWRFbGVtZW50ID0gZXZlbnQuZGV0YWlsO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kcm9wZG93bi5qcy5tYXAiLCJleHBvcnQgKiBmcm9tICcuL2Ryb3AtZG93bic7XG5leHBvcnQgKiBmcm9tICcuL2Ryb3Bkb3duJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJkcm9wZG93bi1kaXJlY3RpdmUtZGVtb1xcXCI+XFxuICA8bmF2IGNsYXNzPVxcXCJuYXZiYXJcXFwiPlxcbiAgICA8YSBocmVmPVxcXCIjXFxcIiBjbGFzcz1cXFwibG9nb1xcXCI+SG9tZTwvYT5cXG4gICAgPHVsIGNsYXNzPVxcXCJtYWluLW5hdlxcXCI+XFxuICAgICAgPGxpIGNsYXNzPVxcXCJkcm9wZG93blxcXCI+XFxuICAgICAgICA8YSBjbGFzcz1cXFwibmF2LWxpbmtzXFxcIj5NZW51IDEgJm5ic3A7PHNwYW4gY2xhc3M9XFxcImNhcmV0XFxcIj7ilrw8L3NwYW4+PC9hPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZHJvcGRvd24tbWVudVxcXCI+XFxuICAgICAgICAgIDxhIGNsYXNzPVxcXCJuYXYtbGlua3NcXFwiPnRlc3QgMTwvYT5cXG4gICAgICAgICAgPGEgY2xhc3M9XFxcIm5hdi1saW5rc1xcXCI+dGVzdCAyPC9hPlxcbiAgICAgICAgICA8YSBjbGFzcz1cXFwibmF2LWxpbmtzXFxcIj50ZXN0IDM8L2E+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICA8L2xpPlxcbiAgICAgIDxsaSBjbGFzcz1cXFwiZHJvcGRvd25cXFwiPlxcbiAgICAgICAgPGEgY2xhc3M9XFxcIm5hdi1saW5rc1xcXCI+TWVudSAyICZuYnNwOzxzcGFuIGNsYXNzPVxcXCJjYXJldFxcXCI+4pa8PC9zcGFuPjwvYT5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImRyb3Bkb3duLW1lbnVcXFwiPlxcbiAgICAgICAgICA8YSBjbGFzcz1cXFwibmF2LWxpbmtzXFxcIj50ZXN0IDE8L2E+XFxuICAgICAgICAgIDxhIGNsYXNzPVxcXCJuYXYtbGlua3NcXFwiPnRlc3QgMjwvYT5cXG4gICAgICAgICAgPGEgY2xhc3M9XFxcIm5hdi1saW5rc1xcXCI+dGVzdCAzPC9hPlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9saT5cXG4gICAgICA8bGkgY2xhc3M9XFxcImRyb3Bkb3duXFxcIj5cXG4gICAgICAgIDxhIGNsYXNzPVxcXCJuYXYtbGlua3NcXFwiPk1lbnUgMyAmbmJzcDs8c3BhbiBjbGFzcz1cXFwiY2FyZXRcXFwiPuKWvDwvc3Bhbj48L2E+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJkcm9wZG93bi1tZW51XFxcIj5cXG4gICAgICAgICAgPGEgY2xhc3M9XFxcIm5hdi1saW5rc1xcXCI+dGVzdCAxPC9hPlxcbiAgICAgICAgICA8YSBjbGFzcz1cXFwibmF2LWxpbmtzXFxcIj50ZXN0IDI8L2E+XFxuICAgICAgICAgIDxhIGNsYXNzPVxcXCJuYXYtbGlua3NcXFwiPnRlc3QgMzwvYT5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIDwvbGk+XFxuICAgIDwvdWw+XFxuICA8L25hdj5cXG48L2Rpdj5cXG5cIjsiLCJpbXBvcnQgeyBQYWdlIH0gZnJvbSAnLi4vcGFnZSc7XG5pbXBvcnQgaHRtbCBmcm9tICcuL2Ryb3Bkb3duLmh0bWwnO1xuaW1wb3J0IHsgRHJvcGRvd24gfSBmcm9tICdAbWF6ZGlrLWxpYi9kcm9wZG93bic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERyb3Bkb3duRGVtbyBpbXBsZW1lbnRzIFBhZ2Uge1xuXG4gIGdldCB0ZW1wbGF0ZSgpOiBzdHJpbmcgeyByZXR1cm4gaHRtbDsgfVxuXG4gIHByaXZhdGUgZHJvcGRvd246IERyb3Bkb3duO1xuXG4gIGxvYWQoKSB7XG4gICAgY29uc3QgbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcm9wZG93bi1kaXJlY3RpdmUtZGVtbyAuZHJvcGRvd24nKTtcbiAgICB0aGlzLmRyb3Bkb3duID0gbmV3IERyb3Bkb3duKGxpc3QpO1xuICB9XG5cbiAgb25EZXN0cm95KCkge1xuICAgIHRoaXMuZHJvcGRvd24uZGVzdHJveSgpO1xuICB9XG5cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=