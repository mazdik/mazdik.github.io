(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{21:function(e,t,n){"use strict";n.r(t);var i=n(1),s=n(0);function o(e,t){t.style.display=e?"block":"none"}class l{constructor(e,t){this.node=e,this.getIconFunc=t,this.createNodeElement(),this.updateStyles()}createNodeElement(){const e=document.createElement("li");e.dataset.id=this.node.$$id.toString(),this.expanderIconElement=document.createElement("i"),e.appendChild(this.expanderIconElement),this.nodeContentElement=document.createElement("span"),this.iconElement=document.createElement("i"),this.nodeContentElement.appendChild(this.iconElement);const t=document.createTextNode(this.node.name);this.nodeContentElement.appendChild(t),e.appendChild(this.nodeContentElement),this.element=e}getIcon(){return this.getIconFunc?this.getIconFunc(this.node):this.node.icon}getExpanderIcon(){return i.c.getExpanderIcon(this.node)}nodeClass(){let e="treenode";return this.node.$$filterState===i.a.NOT_FOUND&&(e+=" filter-not-found"),e}nodeContentClass(){let e="treenode-content";return this.node.$$filterState===i.a.FOUND?e+=" filter-found":this.node.$$filterState===i.a.ON_FOUND_PATH&&(e+=" filter-on-path"),this.node.isSelected&&(e+=" highlight"),e}updateStyles(){this.element.className=this.nodeClass(),this.expanderIconElement.className=this.getExpanderIcon(),this.nodeContentElement.className=this.nodeContentClass(),this.iconElement.className=this.getIcon();const e=this.nodeContentElement.nextElementSibling;e&&o(this.node.expanded,e)}}class d extends HTMLElement{constructor(){super(),this.filterDelay=500,this.tree=new i.b,this.listeners=[],this.treeViewNodes=[];const e=(~~(1e3*Math.random())).toString(),t=document.createElement("template");t.innerHTML=function(e){return`\n<div class="tree-header">\n  <i class="dt-tree-icon dt-icon-shrink large" id="collapseAllIcon${e}"></i>\n  <i class="dt-tree-icon dt-icon-reload large" id="refreshIcon${e}"></i>\n  <div class="dt-clearable-input tree-filter-input">\n    <input class="dt-input" id="filterInput${e}">\n    <span class="dt-loader dt-tree-filter-loading" id="filterLoading${e}"></span>\n    <span id="clearSearchIcon${e}">&times;</span>\n  </div>\n</div>\n<div class="tree-body">\n  <div id="loadingIcon${e}" class="tree-loading-content"><i class="dt-loader"></i></div>\n  <ul class="tree-container" id="treeContainer${e}" style="padding-left: 0;"></ul>\n</div>\n  `}(e),this.appendChild(t.content.cloneNode(!0)),this.treeContainer=this.querySelector("#treeContainer"+e),this.loadingIcon=this.querySelector("#loadingIcon"+e),this.filterInput=this.querySelector("#filterInput"+e),this.filterLoading=this.querySelector("#filterLoading"+e),this.clearSearchIcon=this.querySelector("#clearSearchIcon"+e),this.collapseAllIcon=this.querySelector("#collapseAllIcon"+e),this.refreshIcon=this.querySelector("#refreshIcon"+e),this.loading(!1),this.filterInput.placeholder="Search",this.addEventListeners()}get service(){return this.tree.service}set service(e){this.tree.service=e,this.tree.nodes=[],this.initGetNodes()}set serverSideFiltering(e){this.tree.serverSideFiltering=e,this.tree.filterLoadingFunc=this.updateFilterLoadingStyles.bind(this)}disconnectedCallback(){this.removeEventListeners()}addEventListeners(){this.listeners=[{eventName:"click",target:this,handler:this.onClick.bind(this)},{eventName:"dblclick",target:this,handler:this.onDblClick.bind(this)},{eventName:"contextmenu",target:this,handler:this.onContextMenu.bind(this)},{eventName:"input",target:this.filterInput,handler:this.onInputFilter.bind(this)},{eventName:"click",target:this.clearSearchIcon,handler:this.onClickClearSearch.bind(this)},{eventName:"click",target:this.collapseAllIcon,handler:this.collapseAll.bind(this)},{eventName:"click",target:this.refreshIcon,handler:this.refresh.bind(this)}],this.listeners.forEach(e=>{e.target.addEventListener(e.eventName,e.handler)})}removeEventListeners(){this.listeners.forEach(e=>{e.target.removeEventListener(e.eventName,e.handler)})}initGetNodes(){this.loading(!0),this.tree.initLoadNodes().then(()=>{this.render()}).finally(()=>{this.loading(!1)})}loading(e){this.loadingIcon.style.display=e?"block":"none"}render(){const e=document.createDocumentFragment();this.tree.nodes.forEach(t=>{const n=this.createTreeDom(t);e.appendChild(n)}),this.treeContainer.innerHTML="",this.treeContainer.appendChild(e)}createTreeDom(e,t){const n=t||new l(e,this.getIconFunc);if(this.treeViewNodes.push(n),e.hasChildren){const t=document.createElement("ul");t.classList.add("tree-container"),n.element.appendChild(t),o(e.expanded,t),e.children.forEach(e=>{const n=this.createTreeDom(e);t.appendChild(n)})}return n.element}updateAllItemsStyles(){this.treeViewNodes.forEach(e=>e.updateStyles())}updateClearSearchIconStyles(){this.clearSearchIcon.style.display=this.filterInput.value.length>0&&!this.tree.filterLoading?"block":"none"}updateFilterLoadingStyles(e){this.updateClearSearchIconStyles(),this.filterLoading.style.display=e?"block":"none"}onExpand(e){const t=e.node,n=this.needCreateElements(t);t.expanded=!t.expanded,t.expanded&&(t.$$loading=!0,e.updateStyles(),t.tree.loadNode(t).then(()=>{n&&this.createTreeDom(e.node,e)}).finally(()=>{t.$$loading=!1,e.updateStyles()})),this.updateAllItemsStyles()}needCreateElements(e){if(!e.hasChildren)return!0;return!e.children.some(e=>this.treeViewNodes.find(t=>t.node.$$id===e.$$id))}getTreeViewNode(e,t){const n=e.target,i=n.classList.contains(t)?n:n.closest("."+t);if(i&&i.parentElement){const t=i.parentElement.dataset.id;if(Object(s.i)(t))return;return e.stopPropagation(),this.treeViewNodes.find(e=>e.node.$$id.toString()===t)}}onClick(e){this.onClickTreenodeContent(e),this.onClickExpanderIcon(e)}onClickTreenodeContent(e){const t=this.getTreeViewNode(e,"treenode-content");t&&(this.selectNode(t),this.updateAllItemsStyles())}onClickExpanderIcon(e){const t=this.getTreeViewNode(e,"dt-icon-node");t&&this.onExpand(t)}onDblClick(e){const t=this.getTreeViewNode(e,"treenode-content");t&&this.onExpand(t)}onContextMenu(e){const t=this.getTreeViewNode(e,"treenode-content");if(t){this.selectNode(t),this.updateAllItemsStyles();const n={originalEvent:e,data:t.node};this.dispatchEvent(new CustomEvent("nodeRightClick",{detail:n}))}}selectNode(e){this.tree.selectedNode!==e.node&&(e.node.setSelected(),this.dispatchEvent(new CustomEvent("selectedChanged",{detail:e.node})))}onInputFilter(){this.filterTimeout&&clearTimeout(this.filterTimeout),this.filterTimeout=setTimeout(()=>{this.updateClearSearchIconStyles(),this.tree.filterTree(this.filterInput.value).then(()=>{this.updateAllItemsStyles()}),this.filterTimeout=null},this.filterDelay)}onClickClearSearch(){this.filterInput.value="",this.updateClearSearchIconStyles(),this.tree.filterTree(this.filterInput.value).then(()=>{this.updateAllItemsStyles()})}collapseAll(){this.tree.collapseAll(),this.updateAllItemsStyles()}refresh(){this.tree.nodes=[],this.initGetNodes(),this.tree.selectedNode=null,this.filterInput.value=null}}customElements.define("web-tree-view",d);class r{constructor(){this.url="assets/tree.json"}getNodes(e){const t=[{id:"MALE",name:"MALE",data:{column:"gender"},leaf:!1},{id:"FEMALE",name:"FEMALE",data:{column:"gender"}}];return e?(t[0].id="MALE"+e.$$level,t[0].name="MALE"+e.$$level,t[0].leaf=10===e.$$level,t[1].id="FEMALE"+e.$$level,t[1].name="FEMALE"+e.$$level,new Promise(e=>{setTimeout(()=>e(t),500)})):this.get()}searchNodes(e){return new Promise(e=>{setTimeout(()=>e(["ELYOS","MALE","LAZY"]),500)})}get(){return fetch(this.url).then(e=>e.json())}}n(34);n.d(t,"default",(function(){return a}));class a{get template(){return'<web-tree-view class="tree-view-demo"></web-tree-view>\n    <web-context-menu id="contextMenu"></web-context-menu>'}load(){const e=new r,t=document.querySelector("web-tree-view");t.getIconFunc=e=>e.isLeaf()?"dt-icon-file":"dt-icon-folder",t.serverSideFiltering=!0,t.service=e;const n=[{label:"View Task",command:e=>console.log("View "+e)},{label:"Edit Task",command:e=>console.log("Edit "+e)},{label:"Delete Task",command:e=>console.log("Delete "+e),disabled:!0}],i=document.querySelector("#contextMenu");i.menu=n,t.addEventListener("selectedChanged",e=>{console.log(e.detail)}),t.addEventListener("nodeRightClick",e=>{i.show({originalEvent:e.detail.originalEvent,data:e.detail.data})})}}},30:function(e,t,n){"use strict";var i=n(0);class s{constructor(e){this.element=e,this.addEventListeners()}addEventListeners(){this.clickListener=this.onClick.bind(this),this.element.addEventListener("click",this.clickListener),this.windowClickListener=this.onWindowClick.bind(this),window.document.addEventListener("click",this.windowClickListener),this.windowKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.windowKeydownListener)}removeEventListeners(){this.element.removeEventListener("click",this.clickListener),window.document.removeEventListener("click",this.windowClickListener),window.document.removeEventListener("keydown",this.windowKeydownListener)}onClick(){this.selectContainerClicked=!0}onWindowClick(){this.selectContainerClicked||this.closeDropdown(),this.selectContainerClicked=!1}onKeyDown(e){e.keyCode!==i.a.ESCAPE&&"Escape"!==e.key||this.closeDropdown()}toggleDropdown(){this.isOpen?this.closeDropdown():this.openDropdown()}openDropdown(){this.isOpen||(this.isOpen=!0,this.element.dispatchEvent(new CustomEvent("open",{detail:this.isOpen})))}closeDropdown(){this.isOpen&&(this.isOpen=!1,this.element.dispatchEvent(new CustomEvent("open",{detail:this.isOpen})))}}class o{constructor(e){this.element=e,this.isOpen=!1,this.listeners=[],this.addEventListeners()}set clickedElement(e){e!==this.element&&this.isOpen&&(this.isOpen=!1,this.updateStyles())}addEventListeners(){this.listeners=[{eventName:"click",target:this.element,handler:this.toggleDropdown.bind(this)}],this.listeners.forEach(e=>{e.target.addEventListener(e.eventName,e.handler)})}removeEventListeners(){this.listeners.forEach(e=>{e.target.removeEventListener(e.eventName,e.handler)})}toggle(){this.isOpen=!this.isOpen}toggleDropdown(e){e.stopPropagation(),this.toggle(),this.updateStyles(),this.element.dispatchEvent(new CustomEvent("clickElement",{detail:this.element}))}onWindowClick(e){const t=e.target;t&&(this.element.contains(t)||(this.isOpen=!1),this.updateStyles())}updateStyles(){this.isOpen?this.element.classList.add("open"):this.element.classList.remove("open")}}class l{constructor(e){this.dropdowns=[],this.listeners=[],e.forEach(e=>{this.dropdowns.push(new o(e))}),this.addEventListeners(e)}destroy(){this.removeEventListeners(),this.dropdowns.forEach(e=>{e.removeEventListeners()})}addEventListeners(e){this.listeners=[{eventName:"click",target:window,handler:this.onWindowClick.bind(this)}],e.forEach(e=>{this.listeners.push({eventName:"clickElement",target:e,handler:this.onClickElement.bind(this)})}),this.listeners.forEach(e=>{e.target.addEventListener(e.eventName,e.handler)})}removeEventListeners(){this.listeners.forEach(e=>{e.target.removeEventListener(e.eventName,e.handler)})}onWindowClick(e){this.dropdowns.forEach(t=>{t.onWindowClick(e)})}onClickElement(e){this.dropdowns.forEach(t=>{t.clickedElement=e.detail})}}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}))},34:function(e,t,n){"use strict";var i=n(30),s=n(0);class o extends HTMLElement{constructor(){super(),this._menu=[],this.listeners=[],this.listMenu=document.createElement("ul"),this.appendChild(this.listMenu),this.classList.add("dt-context-menu"),this.dropdown=new i.a(this),this.addEventListeners()}get menu(){return this._menu}set menu(e){this._menu=e,this.render()}disconnectedCallback(){this.dropdown.removeEventListeners(),this.listeners.forEach(e=>{e.target.removeEventListener(e.eventName,e.handler)})}addEventListeners(){this.listeners=[{eventName:"open",target:this,handler:this.onOpenChange.bind(this)},{eventName:"resize",target:window,handler:this.onWindowResize.bind(this)},{eventName:"click",target:this.listMenu,handler:this.onClickListMenu.bind(this)}],this.listeners.forEach(e=>{e.target.addEventListener(e.eventName,e.handler)})}onWindowResize(){this.dropdown.closeDropdown()}getPositionMenu(e,t){const{height:n,width:i}=this.getHiddenElementOuterSizes(this);return e+i-window.pageXOffset>window.innerWidth&&(e-=i),t+n-window.pageYOffset>window.innerHeight&&(t-=n),e<document.body.scrollLeft&&(e=document.body.scrollLeft),t<document.body.scrollTop&&(t=document.body.scrollTop),{left:e,top:t}}getHiddenElementOuterSizes(e){if(e.offsetParent)return{height:e.offsetHeight,width:e.offsetWidth};e.style.visibility="hidden",e.style.display="block";const t=e.offsetHeight,n=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",{height:t,width:n}}show(e){let t;this.eventArgs=e,Object(s.i)(e.left)||Object(s.i)(e.top)?t=this.getPositionMenu(e.originalEvent.pageX+1,e.originalEvent.pageY+1):(t=this.getPositionMenu(e.left,e.top),this.dropdown.selectContainerClicked=!0),e.originalEvent.preventDefault(),this.top===t.top&&this.left===t.left?this.dropdown.toggleDropdown():(this.top=t.top,this.left=t.left,this.dropdown.closeDropdown(),this.dropdown.openDropdown())}hide(){this.dropdown.closeDropdown()}itemClick(e,t){t.disabled?e.preventDefault():(t.url||e.preventDefault(),t.command&&t.command(this.eventArgs.data),this.dropdown.closeDropdown())}updateStyles(){this.style.left=this.left+"px",this.style.top=this.top+"px",this.style.display=this.dropdown.isOpen&&this.menu.length>0?"block":"none"}onOpenChange(){this.updateStyles()}render(){const e=this.createListContent();this.listMenu.textContent="",this.listMenu.append(...e),this.updateStyles()}createListContent(){const e=[];return this.menu.forEach((t,n)=>{const i=document.createElement("li");t.disabled&&i.classList.add("disabled");const s=document.createElement("a");s.href=t.url||"#",s.textContent=t.label,s.dataset.id=n.toString(),i.append(s);const o=document.createElement("span");o.classList.add("context-menu-sep"),s.prepend(o);const l=document.createElement("i");t.icon&&l.classList.add(t.icon),s.prepend(l),e.push(i)}),e}getDataId(e){const t="A"===e.tagName?e:e.closest("a");return t&&t.dataset.id?t.dataset.id:null}onClickListMenu(e){const t=this.getDataId(e.target);if(null!=t){const n=parseInt(t,10);this.itemClick(e,this.menu[n])}}}customElements.define("web-context-menu",o)}}]);