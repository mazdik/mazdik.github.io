(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{17:function(t,e,s){"use strict";s.r(e);var i=s(20),n=s(21);class l extends n.a{constructor(t){super(t),this.placeholder="Select",this.selectedMessage="Selected",this.disabled=!1,t&&Object.assign(this,t)}}class o extends HTMLElement{constructor(){super(),this._settings=new l,this.listeners=[];const t=(~~(1e3*Math.random())).toString(),e=document.createElement("template");e.innerHTML=function(t){return`\n  <div class="dt-input-group" id="inputGroup${t}">\n    <input class="dt-input dt-select-input" readonly="readonly">\n    <button class="dt-button dt-white">\n      <i class="dt-icon"></i>\n    </button>\n  </div>\n  <div class="dt-dropdown-select-list" id="dropdownContent${t}">\n    <web-select-list></web-select-list>\n  </div>\n  `}(t),this.appendChild(e.content.cloneNode(!0)),this.classList.add("dt-dropdown-select"),this.dropdown=new i.a(this),this.selectList=this.querySelector("web-select-list"),this.inputGroup=this.querySelector("#inputGroup"+t),this.dropdownContent=this.querySelector("#dropdownContent"+t),this.input=this.querySelector("input"),this.button=this.querySelector("button"),this.contentInit(),this.addEventListeners()}get settings(){return this._settings}set settings(t){this._settings=new l(t),this.selectList.settings=this._settings,this.contentInit()}get options(){return this._options}set options(t){this._options=t,this.input.value=this.getName(this.selectList.model),this.selectList.options=t}set value(t){Array.isArray(t)?this.selectList.model=[...t]:this.selectList.model=t?[t]:[],this.input.value=this.getName(this.selectList.model)}disconnectedCallback(){this.dropdown.removeEventListeners(),this.listeners.forEach(t=>{t.target.removeEventListener(t.eventName,t.handler)})}addEventListeners(){this.listeners=[{eventName:"open",target:this,handler:this.onOpenChange.bind(this)},{eventName:"click",target:this.inputGroup,handler:this.open.bind(this)},{eventName:"selectionChange",target:this.selectList,handler:this.onSelectionChange.bind(this)},{eventName:"selectionCancel",target:this.selectList,handler:this.onSelectionCancel.bind(this)}],this.listeners.forEach(t=>{t.target.addEventListener(t.eventName,t.handler)})}open(t){t.stopPropagation(),this.settings.disabled||this.dropdown.toggleDropdown()}onSelectionChange(t){this.input.value=this.getName(t.detail),this.selectionChangeEmit(t.detail),this.dropdown.closeDropdown()}onSelectionCancel(){this.dropdown.closeDropdown()}getName(t){if(t&&t.length&&this.options&&this.options.length){if(this.settings.multiple&&t.length>1)return this.settings.selectedMessage+": "+t.length;{const e=this.options.find(e=>e.id===t[0]);return e?e.name:""}}return null}selectionChangeEmit(t){if(this.settings.multiple)this.dispatchEvent(new CustomEvent("valueChange",{detail:t}));else{const e=t&&t.length?t[0]:null;this.dispatchEvent(new CustomEvent("valueChange",{detail:e}))}}onOpenChange(){this.refreshStyles(),this.selectList.isOpen=this.dropdown.isOpen}contentInit(){this.input.placeholder=this.settings.placeholder,this.input.disabled=this.settings.disabled,this.button.disabled=this.settings.disabled,this.refreshStyles()}refreshStyles(){this.dropdownContent.style.display=this.dropdown.isOpen?"block":"none",this.dropdown.isOpen?(this.button.firstElementChild.classList.add("asc"),this.button.firstElementChild.classList.remove("desc")):(this.button.firstElementChild.classList.remove("asc"),this.button.firstElementChild.classList.add("desc"))}}customElements.define("web-dropdown-select",o);var h=s(25),d=s.n(h);s.d(e,"default",(function(){return c}));class c{get template(){return d.a}load(){const t=document.querySelector("#dropdown-select-demo1"),e=document.querySelector("#dropdown-select-demo2"),s=[{id:"1",name:"Select 1"},{id:"2",name:"Select 2"},{id:"3",name:"Select 3"},{id:"4",name:"Select 4"},{id:"5",name:"Select 5"},{id:"6",name:"Select 6"}];t.settings={multiple:!0},t.options=s,t.value=["2","4"],e.options=s,e.value=["3"]}}},20:function(t,e,s){"use strict";var i=s(0);class n{constructor(t){this.element=t,this.addEventListeners()}addEventListeners(){this.clickListener=this.onClick.bind(this),this.element.addEventListener("click",this.clickListener),this.windowClickListener=this.onWindowClick.bind(this),window.document.addEventListener("click",this.windowClickListener),this.windowKeydownListener=this.onKeyDown.bind(this),window.document.addEventListener("keydown",this.windowKeydownListener)}removeEventListeners(){this.element.removeEventListener("click",this.clickListener),window.document.removeEventListener("click",this.windowClickListener),window.document.removeEventListener("keydown",this.windowKeydownListener)}onClick(){this.selectContainerClicked=!0}onWindowClick(){this.selectContainerClicked||this.closeDropdown(),this.selectContainerClicked=!1}onKeyDown(t){t.keyCode!==i.a.ESCAPE&&"Escape"!==t.key||this.closeDropdown()}toggleDropdown(){this.isOpen?this.closeDropdown():this.openDropdown()}openDropdown(){this.isOpen||(this.isOpen=!0,this.element.dispatchEvent(new CustomEvent("open",{detail:this.isOpen})))}closeDropdown(){this.isOpen&&(this.isOpen=!1,this.element.dispatchEvent(new CustomEvent("open",{detail:this.isOpen})))}}class l{constructor(t){this.element=t,this.isOpen=!1,this.listeners=[],this.addEventListeners()}set clickedElement(t){t!==this.element&&this.isOpen&&(this.isOpen=!1,this.updateStyles())}addEventListeners(){this.listeners=[{eventName:"click",target:this.element,handler:this.toggleDropdown.bind(this)}],this.listeners.forEach(t=>{t.target.addEventListener(t.eventName,t.handler)})}removeEventListeners(){this.listeners.forEach(t=>{t.target.removeEventListener(t.eventName,t.handler)})}toggle(){this.isOpen=!this.isOpen}toggleDropdown(t){t.stopPropagation(),this.toggle(),this.updateStyles(),this.element.dispatchEvent(new CustomEvent("clickElement",{detail:this.element}))}onWindowClick(t){const e=t.target;e&&(this.element.contains(e)||(this.isOpen=!1),this.updateStyles())}updateStyles(){this.isOpen?this.element.classList.add("open"):this.element.classList.remove("open")}}class o{constructor(t){this.dropdowns=[],this.listeners=[],t.forEach(t=>{this.dropdowns.push(new l(t))}),this.addEventListeners(t)}destroy(){this.removeEventListeners(),this.dropdowns.forEach(t=>{t.removeEventListeners()})}addEventListeners(t){this.listeners=[{eventName:"click",target:window,handler:this.onWindowClick.bind(this)}],t.forEach(t=>{this.listeners.push({eventName:"clickElement",target:t,handler:this.onClickElement.bind(this)})}),this.listeners.forEach(t=>{t.target.addEventListener(t.eventName,t.handler)})}removeEventListeners(){this.listeners.forEach(t=>{t.target.removeEventListener(t.eventName,t.handler)})}onWindowClick(t){this.dropdowns.forEach(e=>{e.onWindowClick(t)})}onClickElement(t){this.dropdowns.forEach(e=>{e.clickedElement=t.detail})}}s.d(e,"a",(function(){return n})),s.d(e,"b",(function(){return o}))},21:function(t,e,s){"use strict";class i{constructor(t){this.multiple=!1,this.selectAllMessage="Select all",this.cancelMessage="Cancel",this.clearMessage="Clear",this.searchMessage="Search...",this.enableSelectAll=!0,this.enableFilterInput=!0,t&&Object.assign(this,t)}}class n extends HTMLElement{constructor(){super(),this._settings=new i,this._model=[],this.selectedOptions=[],this.listeners=[];const t=(~~(1e3*Math.random())).toString(),e=document.createElement("template");e.innerHTML=function(t){return`\n  <input class="dt-input dt-form-group" id="filterInput${t}">\n  <ul class="dt-list-menu dt-list-menu-scroll" id="listMenu${t}">\n    <li class="dt-list-menu-item" id="selectAll${t}" data-id="-1">\n      <span class="dt-checkbox">\n        <input type="checkbox" id="checkboxAll${t}"/>\n        <label></label>\n      </span>\n    </li>\n    <li class="dt-list-divider"></li>\n  </ul>\n  <div class="dt-list-menu-row">\n    <button class="dt-button dt-button-sm" id="okButton${t}"></button>\n    <button class="dt-button dt-button-sm" id="cancelButton${t}"></button>\n    <button class="dt-button dt-button-sm" id="clearButton${t}"></button>\n  </div>\n  `}(t),this.appendChild(e.content.cloneNode(!0)),this.filterInput=this.querySelector("#filterInput"+t),this.selectAll=this.querySelector("#selectAll"+t),this.checkboxAll=this.querySelector("#checkboxAll"+t),this.listMenu=this.querySelector("#listMenu"+t),this.okButton=this.querySelector("#okButton"+t),this.cancelButton=this.querySelector("#cancelButton"+t),this.clearButton=this.querySelector("#clearButton"+t),this.contentInit(),this.addEventListeners()}get settings(){return this._settings}set settings(t){this._settings=new i(t),this.contentInit()}get options(){return this._options}set options(t){this._options=t,this.render()}get model(){return this._model}set model(t){this._model=t,this.selectedOptions=t&&t.length?t.slice(0):[],this.refreshStyles()}get isOpen(){return this._isOpen}set isOpen(t){this._isOpen=t,!0===t&&(this.setFocus(),this.filterInput.value="",this.render())}disconnectedCallback(){this.removeEventListeners()}addEventListeners(){this.listeners=[{eventName:"input",target:this.filterInput,handler:this.onInputFilter.bind(this)},{eventName:"click",target:this.okButton,handler:this.onClickOk.bind(this)},{eventName:"click",target:this.cancelButton,handler:this.onClickCancel.bind(this)},{eventName:"click",target:this.clearButton,handler:this.onClickClear.bind(this)},{eventName:"click",target:this.listMenu,handler:this.onClickListMenu.bind(this)}],this.listeners.forEach(t=>{t.target.addEventListener(t.eventName,t.handler)})}removeEventListeners(){this.listeners.forEach(t=>{t.target.removeEventListener(t.eventName,t.handler)})}setSelectedOptions(t){const e=this.selectedOptions.indexOf(t);e>-1?this.selectedOptions.splice(e,1):(this.settings.multiple||(this.selectedOptions=[]),this.selectedOptions.push(t))}setSelected(t){this.setSelectedOptions(t),this.settings.multiple||this.selectionChangeEmit()}setSelectedAll(){this.allSelected?this.selectedOptions=[]:this.checkAll()}checkAll(){this.selectedOptions=this.options.map(t=>t.id),this.settings.multiple||this.selectionChangeEmit()}isSelected(t){return this.selectedOptions.indexOf(t)>-1}setFocus(){this.filterInput&&setTimeout(()=>{this.filterInput.focus()},1)}onClickOk(t){t.stopPropagation(),this.selectionChangeEmit()}onClickCancel(t){t.stopPropagation(),this.selectedOptions=this.model.slice(0),this.dispatchEvent(new CustomEvent("selectionCancel",{detail:!0})),this.refreshStyles()}onClickClear(t){t.stopPropagation(),this.selectedOptions.length>0&&(this.selectedOptions=[]),this.selectionChangeEmit(),this.refreshStyles()}get allSelected(){return this.options&&0!==this.options.length&&this.selectedOptions&&this.selectedOptions.length===this.options.length}get partiallySelected(){return 0!==this.selectedOptions.length&&!this.allSelected}selectionChangeEmit(){this.model.length===this.selectedOptions.length&&this.model.every((t,e)=>t===this.selectedOptions[e])?this.dispatchEvent(new CustomEvent("selectionCancel",{detail:!0})):(this.model=this.selectedOptions.slice(0),this.dispatchEvent(new CustomEvent("selectionChange",{detail:this.model})))}onInputFilter(){this.filteredOptions=this.filterOptionsByName(this.filterInput.value),this.render()}get viewOptions(){return this.filterInput.value?this.filteredOptions:this.options}filterOptionsByName(t){return t&&this.options?this.options.filter(e=>e.name.toLowerCase().indexOf(t.toLowerCase())>-1):this.options}contentInit(){this.filterInput.placeholder=this.settings.searchMessage,this.okButton.textContent="OK",this.cancelButton.textContent=this.settings.cancelMessage,this.clearButton.textContent=this.settings.clearMessage,this.checkboxAll.nextElementSibling.textContent=this.settings.selectAllMessage,this.okButton.style.display=this.settings.multiple?"block":"none",this.selectAll.style.display=this.settings.multiple&&this.settings.enableSelectAll?"block":"none",this.filterInput.style.display=this.settings.enableFilterInput?"block":"none"}render(){this.removeListContent();const t=this.createListContent().join("");this.listMenu.insertAdjacentHTML("beforeend",t),this.refreshStyles()}createListContent(){const t=[];return this.viewOptions.forEach(e=>{let s;s=this.settings.multiple?function(t){return`\n  <li class="dt-list-menu-item" data-id="${t.id}">\n    <span class="dt-checkbox">\n      <input type="checkbox"/>\n      <label>${t.name}</label>\n    </span>\n  </li>`}(e):function(t){return`\n  <li class="dt-list-menu-item" data-id="${t.id}">\n    <i class="dt-icon"></i>${t.name}\n  </li>`}(e),t.push(s)}),t}getDataId(t){const e="LI"===t.tagName?t:t.closest("li");return e&&e.dataset.id?e.dataset.id:null}get listContent(){return Array.from(this.listMenu.children)}onClickListMenu(t){const e=this.getDataId(t.target);null!=e&&(t.stopPropagation(),"-1"===e?this.setSelectedAll():this.setSelected(e),this.refreshStyles())}refreshStyles(){this.listContent.forEach(t=>{const e=this.getDataId(t);this.isSelected(e)?this.addActiveStyles(t):this.removeActiveStyles(t)}),this.checkboxAll.checked=this.allSelected,this.checkboxAll.indeterminate=this.partiallySelected}addActiveStyles(t){t.firstElementChild&&(this.settings.multiple?this.setInputChecked(t,!0):(t.classList.add("active"),t.firstElementChild.classList.add("dt-icon-ok")))}removeActiveStyles(t){t.firstElementChild&&(this.settings.multiple?this.setInputChecked(t,!1):(t.classList.remove("active"),t.firstElementChild.classList.remove("dt-icon-ok")))}setInputChecked(t,e){t.firstElementChild.firstElementChild.checked=e}removeListContent(){this.listContent.forEach(t=>{const e=this.getDataId(t);null!=e&&"-1"!==e&&t.remove()})}}customElements.define("web-select-list",n),s.d(e,"a",(function(){return i}))},25:function(t,e){t.exports='<div class="dropdown-select-demo">\n  <web-dropdown-select class="sl-column" id="dropdown-select-demo1"></web-dropdown-select>\n  <web-dropdown-select class="sl-column" id="dropdown-select-demo2"></web-dropdown-select>\n</div>\n'}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi4vZHJvcGRvd24tc2VsZWN0L2xpYi9kcm9wZG93bi1zZWxlY3Quc2V0dGluZ3MuanMiLCJ3ZWJwYWNrOi8vLy4uL2Ryb3Bkb3duLXNlbGVjdC9saWIvZHJvcGRvd24tc2VsZWN0LmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFnZXMvZHJvcGRvd24tc2VsZWN0LnRzIiwid2VicGFjazovLy8uLi9kcm9wZG93bi9saWIvZHJvcC1kb3duLmpzIiwid2VicGFjazovLy8uLi9kcm9wZG93bi9saWIvZHJvcGRvd24tZWxlbWVudC5qcyIsIndlYnBhY2s6Ly8vLi4vZHJvcGRvd24vbGliL2Ryb3Bkb3duLmpzIiwid2VicGFjazovLy8uLi9kcm9wZG93bi9saWIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4uL3NlbGVjdC1saXN0L2xpYi9zZWxlY3QtbGlzdC5zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly8vLi4vc2VsZWN0LWxpc3QvbGliL3NlbGVjdC1saXN0LmNvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi4vc2VsZWN0LWxpc3QvbGliL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9wYWdlcy9kcm9wZG93bi1zZWxlY3QuaHRtbCJdLCJuYW1lcyI6WyJpbml0Iiwic3VwZXIiLCJ0aGlzIiwicGxhY2Vob2xkZXIiLCJzZWxlY3RlZE1lc3NhZ2UiLCJkaXNhYmxlZCIsIk9iamVjdCIsImFzc2lnbiIsIkhUTUxFbGVtZW50IiwiX3NldHRpbmdzIiwibGlzdGVuZXJzIiwiaWQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJ0ZW1wbGF0ZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImdldFRlbXBsYXRlIiwiYXBwZW5kQ2hpbGQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2xhc3NMaXN0IiwiYWRkIiwiZHJvcGRvd24iLCJzZWxlY3RMaXN0IiwicXVlcnlTZWxlY3RvciIsImlucHV0R3JvdXAiLCJkcm9wZG93bkNvbnRlbnQiLCJpbnB1dCIsImJ1dHRvbiIsImNvbnRlbnRJbml0IiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJ2YWwiLCJzZXR0aW5ncyIsIl9vcHRpb25zIiwidmFsdWUiLCJnZXROYW1lIiwibW9kZWwiLCJvcHRpb25zIiwiQXJyYXkiLCJpc0FycmF5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJmb3JFYWNoIiwieCIsInRhcmdldCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudE5hbWUiLCJoYW5kbGVyIiwib25PcGVuQ2hhbmdlIiwiYmluZCIsIm9wZW4iLCJvblNlbGVjdGlvbkNoYW5nZSIsIm9uU2VsZWN0aW9uQ2FuY2VsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwidG9nZ2xlRHJvcGRvd24iLCJkZXRhaWwiLCJzZWxlY3Rpb25DaGFuZ2VFbWl0IiwiY2xvc2VEcm9wZG93biIsIml0ZW1zIiwibGVuZ3RoIiwibXVsdGlwbGUiLCJvcHRpb24iLCJmaW5kIiwibmFtZSIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsInJlZnJlc2hTdHlsZXMiLCJpc09wZW4iLCJzdHlsZSIsImRpc3BsYXkiLCJmaXJzdEVsZW1lbnRDaGlsZCIsInJlbW92ZSIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIiwiZHJvcGRvd25TZWxlY3QxIiwiZHJvcGRvd25TZWxlY3QyIiwiZWxlbWVudCIsImNsaWNrTGlzdGVuZXIiLCJvbkNsaWNrIiwid2luZG93Q2xpY2tMaXN0ZW5lciIsIm9uV2luZG93Q2xpY2siLCJ3aW5kb3ciLCJ3aW5kb3dLZXlkb3duTGlzdGVuZXIiLCJvbktleURvd24iLCJzZWxlY3RDb250YWluZXJDbGlja2VkIiwia2V5Q29kZSIsIkVTQ0FQRSIsImtleSIsIm9wZW5Ecm9wZG93biIsIkRyb3Bkb3duRWxlbWVudCIsImVsIiwidXBkYXRlU3R5bGVzIiwidG9nZ2xlIiwidGFyZ2V0RWxlbWVudCIsImNvbnRhaW5zIiwiZWxlbWVudHMiLCJkcm9wZG93bnMiLCJwdXNoIiwib25DbGlja0VsZW1lbnQiLCJjbGlja2VkRWxlbWVudCIsIlNlbGVjdExpc3RTZXR0aW5ncyIsInNlbGVjdEFsbE1lc3NhZ2UiLCJjYW5jZWxNZXNzYWdlIiwiY2xlYXJNZXNzYWdlIiwic2VhcmNoTWVzc2FnZSIsImVuYWJsZVNlbGVjdEFsbCIsImVuYWJsZUZpbHRlcklucHV0IiwiX21vZGVsIiwic2VsZWN0ZWRPcHRpb25zIiwiZmlsdGVySW5wdXQiLCJzZWxlY3RBbGwiLCJjaGVja2JveEFsbCIsImxpc3RNZW51Iiwib2tCdXR0b24iLCJjYW5jZWxCdXR0b24iLCJjbGVhckJ1dHRvbiIsInJlbmRlciIsInNsaWNlIiwiX2lzT3BlbiIsInNldEZvY3VzIiwib25JbnB1dEZpbHRlciIsIm9uQ2xpY2tPayIsIm9uQ2xpY2tDYW5jZWwiLCJvbkNsaWNrQ2xlYXIiLCJvbkNsaWNrTGlzdE1lbnUiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJzZXRTZWxlY3RlZE9wdGlvbnMiLCJhbGxTZWxlY3RlZCIsImNoZWNrQWxsIiwibWFwIiwic2V0VGltZW91dCIsImZvY3VzIiwiZXZlcnkiLCJmaWx0ZXJlZE9wdGlvbnMiLCJmaWx0ZXJPcHRpb25zQnlOYW1lIiwiZmlsdGVyIiwidG9Mb3dlckNhc2UiLCJ0ZXh0Q29udGVudCIsIm5leHRFbGVtZW50U2libGluZyIsInJlbW92ZUxpc3RDb250ZW50IiwibGlzdENvbnRlbnQiLCJjcmVhdGVMaXN0Q29udGVudCIsImpvaW4iLCJpbnNlcnRBZGphY2VudEhUTUwiLCJyZXN1bHQiLCJ2aWV3T3B0aW9ucyIsImdldFRlbXBsYXRlTXVsdGlwbGUiLCJnZXRUZW1wbGF0ZVNpbmdsZSIsInRhZ05hbWUiLCJjbG9zZXN0IiwiZGF0YXNldCIsImZyb20iLCJjaGlsZHJlbiIsImdldERhdGFJZCIsInNldFNlbGVjdGVkQWxsIiwic2V0U2VsZWN0ZWQiLCJpc1NlbGVjdGVkIiwiYWRkQWN0aXZlU3R5bGVzIiwicmVtb3ZlQWN0aXZlU3R5bGVzIiwiY2hlY2tlZCIsImluZGV0ZXJtaW5hdGUiLCJwYXJ0aWFsbHlTZWxlY3RlZCIsInNldElucHV0Q2hlY2tlZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJvSEFDTyxNQUFNLFVBQStCLElBQ3hDLFlBQVlBLEdBQ1JDLE1BQU1ELEdBQ05FLEtBQUtDLFlBQWMsU0FDbkJELEtBQUtFLGdCQUFrQixXQUN2QkYsS0FBS0csVUFBVyxFQUNaTCxHQUNBTSxPQUFPQyxPQUFPTCxLQUFNRixJQ1F6QixNQUFNLFVBQWdDUSxZQUN6QyxjQUNJUCxRQUNBQyxLQUFLTyxVQUFZLElBQUksRUFDckJQLEtBQUtRLFVBQVksR0FDakIsTUFBTUMsTUFBeUIsSUFBaEJDLEtBQUtDLFdBQWlCQyxXQUMvQkMsRUFBV0MsU0FBU0MsY0FBYyxZQUN4Q0YsRUFBU0csVUFwQmpCLFNBQXFCUCxHQUNqQixNQUFPLGlEQUNtQ0EscU9BTWNBLDZEQVkvQlEsQ0FBWVIsR0FDakNULEtBQUtrQixZQUFZTCxFQUFTTSxRQUFRQyxXQUFVLElBQzVDcEIsS0FBS3FCLFVBQVVDLElBQUksc0JBQ25CdEIsS0FBS3VCLFNBQVcsSUFBSSxJQUFTdkIsTUFDN0JBLEtBQUt3QixXQUFheEIsS0FBS3lCLGNBQWMsbUJBQ3JDekIsS0FBSzBCLFdBQWExQixLQUFLeUIsY0FBYyxjQUFnQmhCLEdBQ3JEVCxLQUFLMkIsZ0JBQWtCM0IsS0FBS3lCLGNBQWMsbUJBQXFCaEIsR0FDL0RULEtBQUs0QixNQUFRNUIsS0FBS3lCLGNBQWMsU0FDaEN6QixLQUFLNkIsT0FBUzdCLEtBQUt5QixjQUFjLFVBQ2pDekIsS0FBSzhCLGNBQ0w5QixLQUFLK0Isb0JBRVQsZUFBaUIsT0FBTy9CLEtBQUtPLFVBQzdCLGFBQWF5QixHQUNUaEMsS0FBS08sVUFBWSxJQUFJLEVBQXVCeUIsR0FDNUNoQyxLQUFLd0IsV0FBV1MsU0FBV2pDLEtBQUtPLFVBQ2hDUCxLQUFLOEIsY0FFVCxjQUFnQixPQUFPOUIsS0FBS2tDLFNBQzVCLFlBQVlGLEdBQ1JoQyxLQUFLa0MsU0FBV0YsRUFDaEJoQyxLQUFLNEIsTUFBTU8sTUFBUW5DLEtBQUtvQyxRQUFRcEMsS0FBS3dCLFdBQVdhLE9BQ2hEckMsS0FBS3dCLFdBQVdjLFFBQVVOLEVBRTlCLFVBQVVBLEdBQ0ZPLE1BQU1DLFFBQVFSLEdBQ2RoQyxLQUFLd0IsV0FBV2EsTUFBUSxJQUFJTCxHQUc1QmhDLEtBQUt3QixXQUFXYSxNQUFRLEVBQVEsQ0FBQ0wsR0FBTyxHQUU1Q2hDLEtBQUs0QixNQUFNTyxNQUFRbkMsS0FBS29DLFFBQVFwQyxLQUFLd0IsV0FBV2EsT0FFcEQsdUJBQ0lyQyxLQUFLdUIsU0FBU2tCLHVCQUNkekMsS0FBS1EsVUFBVWtDLFFBQVFDLElBQ25CQSxFQUFFQyxPQUFPQyxvQkFBb0JGLEVBQUVHLFVBQVdILEVBQUVJLFdBR3BELG9CQUNJL0MsS0FBS1EsVUFBWSxDQUNiLENBQ0lzQyxVQUFXLE9BQ1hGLE9BQVE1QyxLQUNSK0MsUUFBUy9DLEtBQUtnRCxhQUFhQyxLQUFLakQsT0FFcEMsQ0FDSThDLFVBQVcsUUFDWEYsT0FBUTVDLEtBQUswQixXQUNicUIsUUFBUy9DLEtBQUtrRCxLQUFLRCxLQUFLakQsT0FFNUIsQ0FDSThDLFVBQVcsa0JBQ1hGLE9BQVE1QyxLQUFLd0IsV0FDYnVCLFFBQVMvQyxLQUFLbUQsa0JBQWtCRixLQUFLakQsT0FFekMsQ0FDSThDLFVBQVcsa0JBQ1hGLE9BQVE1QyxLQUFLd0IsV0FDYnVCLFFBQVMvQyxLQUFLb0Qsa0JBQWtCSCxLQUFLakQsUUFHN0NBLEtBQUtRLFVBQVVrQyxRQUFRQyxJQUNuQkEsRUFBRUMsT0FBT1MsaUJBQWlCVixFQUFFRyxVQUFXSCxFQUFFSSxXQUdqRCxLQUFLTyxHQUNEQSxFQUFNQyxrQkFDRHZELEtBQUtpQyxTQUFTOUIsVUFDZkgsS0FBS3VCLFNBQVNpQyxpQkFHdEIsa0JBQWtCRixHQUNkdEQsS0FBSzRCLE1BQU1PLE1BQVFuQyxLQUFLb0MsUUFBUWtCLEVBQU1HLFFBQ3RDekQsS0FBSzBELG9CQUFvQkosRUFBTUcsUUFDL0J6RCxLQUFLdUIsU0FBU29DLGdCQUVsQixvQkFDSTNELEtBQUt1QixTQUFTb0MsZ0JBRWxCLFFBQVFDLEdBQ0osR0FBSUEsR0FBU0EsRUFBTUMsUUFBVTdELEtBQUtzQyxTQUFXdEMsS0FBS3NDLFFBQVF1QixPQUFRLENBQzlELEdBQUk3RCxLQUFLaUMsU0FBUzZCLFVBQVlGLEVBQU1DLE9BQVMsRUFDekMsT0FBTzdELEtBQUtpQyxTQUFTL0IsZ0JBQWtCLEtBQU8wRCxFQUFNQyxPQUVuRCxDQUNELE1BQU1FLEVBQVMvRCxLQUFLc0MsUUFBUTBCLEtBQUtyQixHQUFLQSxFQUFFbEMsS0FBT21ELEVBQU0sSUFDckQsT0FBTyxFQUFXRyxFQUFPRSxLQUFPLElBR3hDLE9BQU8sS0FFWCxvQkFBb0JMLEdBQ2hCLEdBQUs1RCxLQUFLaUMsU0FBUzZCLFNBS2Y5RCxLQUFLa0UsY0FBYyxJQUFJQyxZQUFZLGNBQWUsQ0FBRVYsT0FBUUcsU0FMbkMsQ0FDekIsTUFBTXpCLEVBQVN5QixHQUFTQSxFQUFNQyxPQUFVRCxFQUFNLEdBQUssS0FDbkQ1RCxLQUFLa0UsY0FBYyxJQUFJQyxZQUFZLGNBQWUsQ0FBRVYsT0FBUXRCLE1BTXBFLGVBQ0luQyxLQUFLb0UsZ0JBQ0xwRSxLQUFLd0IsV0FBVzZDLE9BQVNyRSxLQUFLdUIsU0FBUzhDLE9BRTNDLGNBQ0lyRSxLQUFLNEIsTUFBTTNCLFlBQWNELEtBQUtpQyxTQUFTaEMsWUFDdkNELEtBQUs0QixNQUFNekIsU0FBV0gsS0FBS2lDLFNBQVM5QixTQUNwQ0gsS0FBSzZCLE9BQU8xQixTQUFXSCxLQUFLaUMsU0FBUzlCLFNBQ3JDSCxLQUFLb0UsZ0JBRVQsZ0JBQ0lwRSxLQUFLMkIsZ0JBQWdCMkMsTUFBTUMsUUFBVXZFLEtBQUt1QixTQUFTOEMsT0FBUyxRQUFVLE9BQ2xFckUsS0FBS3VCLFNBQVM4QyxRQUNkckUsS0FBSzZCLE9BQU8yQyxrQkFBa0JuRCxVQUFVQyxJQUFJLE9BQzVDdEIsS0FBSzZCLE9BQU8yQyxrQkFBa0JuRCxVQUFVb0QsT0FBTyxVQUcvQ3pFLEtBQUs2QixPQUFPMkMsa0JBQWtCbkQsVUFBVW9ELE9BQU8sT0FDL0N6RSxLQUFLNkIsT0FBTzJDLGtCQUFrQm5ELFVBQVVDLElBQUksVUFJeERvRCxlQUFlQyxPQUFPLHNCQUF1QixHLHFCQ2pKN0Msd0NBS2UsTUFBTSxFQUVuQixlQUF5QixPQUFPLElBRWhDLE9BQ0UsTUFBTUMsRUFBa0I5RCxTQUFTVyxjQUFjLDBCQUN6Q29ELEVBQWtCL0QsU0FBU1csY0FBYywwQkFFekNhLEVBQXdCLENBQzVCLENBQUU3QixHQUFJLElBQUt3RCxLQUFNLFlBQ2pCLENBQUV4RCxHQUFJLElBQUt3RCxLQUFNLFlBQ2pCLENBQUV4RCxHQUFJLElBQUt3RCxLQUFNLFlBQ2pCLENBQUV4RCxHQUFJLElBQUt3RCxLQUFNLFlBQ2pCLENBQUV4RCxHQUFJLElBQUt3RCxLQUFNLFlBQ2pCLENBQUV4RCxHQUFJLElBQUt3RCxLQUFNLGFBR25CVyxFQUFnQjNDLFNBQVcsQ0FDekI2QixVQUFVLEdBRVpjLEVBQWdCdEMsUUFBVUEsRUFDMUJzQyxFQUFnQnpDLE1BQVEsQ0FBQyxJQUFLLEtBRTlCMEMsRUFBZ0J2QyxRQUFVQSxFQUMxQnVDLEVBQWdCMUMsTUFBUSxDQUFDLFEsMkNDN0J0QixNQUFNLEVBQ1QsWUFBWTJDLEdBQ1I5RSxLQUFLOEUsUUFBVUEsRUFDZjlFLEtBQUsrQixvQkFFVCxvQkFDSS9CLEtBQUsrRSxjQUFnQi9FLEtBQUtnRixRQUFRL0IsS0FBS2pELE1BQ3ZDQSxLQUFLOEUsUUFBUXpCLGlCQUFpQixRQUFTckQsS0FBSytFLGVBQzVDL0UsS0FBS2lGLG9CQUFzQmpGLEtBQUtrRixjQUFjakMsS0FBS2pELE1BQ25EbUYsT0FBT3JFLFNBQVN1QyxpQkFBaUIsUUFBU3JELEtBQUtpRixxQkFDL0NqRixLQUFLb0Ysc0JBQXdCcEYsS0FBS3FGLFVBQVVwQyxLQUFLakQsTUFDakRtRixPQUFPckUsU0FBU3VDLGlCQUFpQixVQUFXckQsS0FBS29GLHVCQUVyRCx1QkFDSXBGLEtBQUs4RSxRQUFRakMsb0JBQW9CLFFBQVM3QyxLQUFLK0UsZUFDL0NJLE9BQU9yRSxTQUFTK0Isb0JBQW9CLFFBQVM3QyxLQUFLaUYscUJBQ2xERSxPQUFPckUsU0FBUytCLG9CQUFvQixVQUFXN0MsS0FBS29GLHVCQUV4RCxVQUNJcEYsS0FBS3NGLHdCQUF5QixFQUVsQyxnQkFDU3RGLEtBQUtzRix3QkFDTnRGLEtBQUsyRCxnQkFFVDNELEtBQUtzRix3QkFBeUIsRUFFbEMsVUFBVWhDLEdBQ0ZBLEVBQU1pQyxVQUFZLElBQUtDLFFBQXdCLFdBQWRsQyxFQUFNbUMsS0FDdkN6RixLQUFLMkQsZ0JBR2IsaUJBQ0kzRCxLQUFLcUUsT0FBU3JFLEtBQUsyRCxnQkFBa0IzRCxLQUFLMEYsZUFFOUMsZUFDUzFGLEtBQUtxRSxTQUNOckUsS0FBS3FFLFFBQVMsRUFDZHJFLEtBQUs4RSxRQUFRWixjQUFjLElBQUlDLFlBQVksT0FBUSxDQUFFVixPQUFRekQsS0FBS3FFLFdBRzFFLGdCQUNRckUsS0FBS3FFLFNBQ0xyRSxLQUFLcUUsUUFBUyxFQUNkckUsS0FBSzhFLFFBQVFaLGNBQWMsSUFBSUMsWUFBWSxPQUFRLENBQUVWLE9BQVF6RCxLQUFLcUUsWUM3Q3ZFLE1BQU1zQixFQUNULFlBQVliLEdBQ1I5RSxLQUFLOEUsUUFBVUEsRUFDZjlFLEtBQUtxRSxRQUFTLEVBQ2RyRSxLQUFLUSxVQUFZLEdBQ2pCUixLQUFLK0Isb0JBRVQsbUJBQW1CNkQsR0FDWEEsSUFBTzVGLEtBQUs4RSxTQUFXOUUsS0FBS3FFLFNBQzVCckUsS0FBS3FFLFFBQVMsRUFDZHJFLEtBQUs2RixnQkFHYixvQkFDSTdGLEtBQUtRLFVBQVksQ0FDYixDQUNJc0MsVUFBVyxRQUNYRixPQUFRNUMsS0FBSzhFLFFBQ2IvQixRQUFTL0MsS0FBS3dELGVBQWVQLEtBQUtqRCxRQUcxQ0EsS0FBS1EsVUFBVWtDLFFBQVFDLElBQ25CQSxFQUFFQyxPQUFPUyxpQkFBaUJWLEVBQUVHLFVBQVdILEVBQUVJLFdBR2pELHVCQUNJL0MsS0FBS1EsVUFBVWtDLFFBQVFDLElBQ25CQSxFQUFFQyxPQUFPQyxvQkFBb0JGLEVBQUVHLFVBQVdILEVBQUVJLFdBR3BELFNBQ0kvQyxLQUFLcUUsUUFBVXJFLEtBQUtxRSxPQUV4QixlQUFlZixHQUNYQSxFQUFNQyxrQkFDTnZELEtBQUs4RixTQUNMOUYsS0FBSzZGLGVBQ0w3RixLQUFLOEUsUUFBUVosY0FBYyxJQUFJQyxZQUFZLGVBQWdCLENBQUVWLE9BQVF6RCxLQUFLOEUsV0FFOUUsY0FBY3hCLEdBQ1YsTUFBTXlDLEVBQWdCekMsRUFBTVYsT0FDdkJtRCxJQUdpQi9GLEtBQUs4RSxRQUFRa0IsU0FBU0QsS0FFeEMvRixLQUFLcUUsUUFBUyxHQUVsQnJFLEtBQUs2RixnQkFFVCxlQUNRN0YsS0FBS3FFLE9BQ0xyRSxLQUFLOEUsUUFBUXpELFVBQVVDLElBQUksUUFHM0J0QixLQUFLOEUsUUFBUXpELFVBQVVvRCxPQUFPLFNDdERuQyxNQUFNLEVBQ1QsWUFBWXdCLEdBQ1JqRyxLQUFLa0csVUFBWSxHQUNqQmxHLEtBQUtRLFVBQVksR0FDakJ5RixFQUFTdkQsUUFBU29DLElBQ2Q5RSxLQUFLa0csVUFBVUMsS0FBSyxJQUFJUixFQUFnQmIsTUFFNUM5RSxLQUFLK0Isa0JBQWtCa0UsR0FFM0IsVUFDSWpHLEtBQUt5Qyx1QkFDTHpDLEtBQUtrRyxVQUFVeEQsUUFBUUMsSUFDbkJBLEVBQUVGLHlCQUdWLGtCQUFrQndELEdBQ2RqRyxLQUFLUSxVQUFZLENBQ2IsQ0FDSXNDLFVBQVcsUUFDWEYsT0FBUXVDLE9BQ1JwQyxRQUFTL0MsS0FBS2tGLGNBQWNqQyxLQUFLakQsUUFHekNpRyxFQUFTdkQsUUFBU29DLElBQ2Q5RSxLQUFLUSxVQUFVMkYsS0FBSyxDQUNoQnJELFVBQVcsZUFDWEYsT0FBUWtDLEVBQ1IvQixRQUFTL0MsS0FBS29HLGVBQWVuRCxLQUFLakQsVUFHMUNBLEtBQUtRLFVBQVVrQyxRQUFRQyxJQUNuQkEsRUFBRUMsT0FBT1MsaUJBQWlCVixFQUFFRyxVQUFXSCxFQUFFSSxXQUdqRCx1QkFDSS9DLEtBQUtRLFVBQVVrQyxRQUFRQyxJQUNuQkEsRUFBRUMsT0FBT0Msb0JBQW9CRixFQUFFRyxVQUFXSCxFQUFFSSxXQUdwRCxjQUFjTyxHQUNWdEQsS0FBS2tHLFVBQVV4RCxRQUFRQyxJQUNuQkEsRUFBRXVDLGNBQWM1QixLQUd4QixlQUFlQSxHQUNYdEQsS0FBS2tHLFVBQVV4RCxRQUFRQyxJQUNuQkEsRUFBRTBELGVBQWlCL0MsRUFBTUcsVUMvQ3JDLHFFLGdDQ0FPLE1BQU02QyxFQUNULFlBQVl4RyxHQUNSRSxLQUFLOEQsVUFBVyxFQUNoQjlELEtBQUt1RyxpQkFBbUIsYUFDeEJ2RyxLQUFLd0csY0FBZ0IsU0FDckJ4RyxLQUFLeUcsYUFBZSxRQUNwQnpHLEtBQUswRyxjQUFnQixZQUNyQjFHLEtBQUsyRyxpQkFBa0IsRUFDdkIzRyxLQUFLNEcsbUJBQW9CLEVBQ3JCOUcsR0FDQU0sT0FBT0MsT0FBT0wsS0FBTUYsSUN5QnpCLE1BQU0sVUFBNEJRLFlBQ3JDLGNBQ0lQLFFBQ0FDLEtBQUtPLFVBQVksSUFBSStGLEVBQ3JCdEcsS0FBSzZHLE9BQVMsR0FDZDdHLEtBQUs4RyxnQkFBa0IsR0FDdkI5RyxLQUFLUSxVQUFZLEdBQ2pCLE1BQU1DLE1BQXlCLElBQWhCQyxLQUFLQyxXQUFpQkMsV0FDL0JDLEVBQVdDLFNBQVNDLGNBQWMsWUFDeENGLEVBQVNHLFVBM0NqQixTQUFxQlAsR0FDakIsTUFBTyw0REFDOENBLG1FQUNJQSx1REFDWkEscUdBRURBLHFNQU9TQSw0RUFDSUEsMkVBQ0RBLDZCQTRCL0JRLENBQVlSLEdBQ2pDVCxLQUFLa0IsWUFBWUwsRUFBU00sUUFBUUMsV0FBVSxJQUM1Q3BCLEtBQUsrRyxZQUFjL0csS0FBS3lCLGNBQWMsZUFBaUJoQixHQUN2RFQsS0FBS2dILFVBQVloSCxLQUFLeUIsY0FBYyxhQUFlaEIsR0FDbkRULEtBQUtpSCxZQUFjakgsS0FBS3lCLGNBQWMsZUFBaUJoQixHQUN2RFQsS0FBS2tILFNBQVdsSCxLQUFLeUIsY0FBYyxZQUFjaEIsR0FDakRULEtBQUttSCxTQUFXbkgsS0FBS3lCLGNBQWMsWUFBY2hCLEdBQ2pEVCxLQUFLb0gsYUFBZXBILEtBQUt5QixjQUFjLGdCQUFrQmhCLEdBQ3pEVCxLQUFLcUgsWUFBY3JILEtBQUt5QixjQUFjLGVBQWlCaEIsR0FDdkRULEtBQUs4QixjQUNMOUIsS0FBSytCLG9CQUVULGVBQWlCLE9BQU8vQixLQUFLTyxVQUM3QixhQUFheUIsR0FDVGhDLEtBQUtPLFVBQVksSUFBSStGLEVBQW1CdEUsR0FDeENoQyxLQUFLOEIsY0FFVCxjQUFnQixPQUFPOUIsS0FBS2tDLFNBQzVCLFlBQVlGLEdBQ1JoQyxLQUFLa0MsU0FBV0YsRUFDaEJoQyxLQUFLc0gsU0FFVCxZQUFjLE9BQU90SCxLQUFLNkcsT0FDMUIsVUFBVTdFLEdBQ05oQyxLQUFLNkcsT0FBUzdFLEVBQ2RoQyxLQUFLOEcsZ0JBQW1COUUsR0FBT0EsRUFBSTZCLE9BQVU3QixFQUFJdUYsTUFBTSxHQUFLLEdBQzVEdkgsS0FBS29FLGdCQUVULGFBQWUsT0FBT3BFLEtBQUt3SCxRQUMzQixXQUFXeEYsR0FDUGhDLEtBQUt3SCxRQUFVeEYsR0FDSCxJQUFSQSxJQUNBaEMsS0FBS3lILFdBQ0x6SCxLQUFLK0csWUFBWTVFLE1BQVEsR0FDekJuQyxLQUFLc0gsVUFHYix1QkFDSXRILEtBQUt5Qyx1QkFFVCxvQkFDSXpDLEtBQUtRLFVBQVksQ0FDYixDQUNJc0MsVUFBVyxRQUNYRixPQUFRNUMsS0FBSytHLFlBQ2JoRSxRQUFTL0MsS0FBSzBILGNBQWN6RSxLQUFLakQsT0FFckMsQ0FDSThDLFVBQVcsUUFDWEYsT0FBUTVDLEtBQUttSCxTQUNicEUsUUFBUy9DLEtBQUsySCxVQUFVMUUsS0FBS2pELE9BRWpDLENBQ0k4QyxVQUFXLFFBQ1hGLE9BQVE1QyxLQUFLb0gsYUFDYnJFLFFBQVMvQyxLQUFLNEgsY0FBYzNFLEtBQUtqRCxPQUVyQyxDQUNJOEMsVUFBVyxRQUNYRixPQUFRNUMsS0FBS3FILFlBQ2J0RSxRQUFTL0MsS0FBSzZILGFBQWE1RSxLQUFLakQsT0FFcEMsQ0FDSThDLFVBQVcsUUFDWEYsT0FBUTVDLEtBQUtrSCxTQUNibkUsUUFBUy9DLEtBQUs4SCxnQkFBZ0I3RSxLQUFLakQsUUFHM0NBLEtBQUtRLFVBQVVrQyxRQUFRQyxJQUNuQkEsRUFBRUMsT0FBT1MsaUJBQWlCVixFQUFFRyxVQUFXSCxFQUFFSSxXQUdqRCx1QkFDSS9DLEtBQUtRLFVBQVVrQyxRQUFRQyxJQUNuQkEsRUFBRUMsT0FBT0Msb0JBQW9CRixFQUFFRyxVQUFXSCxFQUFFSSxXQUdwRCxtQkFBbUJaLEdBQ2YsTUFBTTRGLEVBQVEvSCxLQUFLOEcsZ0JBQWdCa0IsUUFBUTdGLEdBQ3ZDNEYsR0FBUyxFQUNUL0gsS0FBSzhHLGdCQUFnQm1CLE9BQU9GLEVBQU8sSUFHL0IvSCxLQUFLaUMsU0FBUzZCLFdBSWQ5RCxLQUFLOEcsZ0JBQWtCLElBSHZCOUcsS0FBSzhHLGdCQUFnQlgsS0FBS2hFLElBUXRDLFlBQVlBLEdBQ1JuQyxLQUFLa0ksbUJBQW1CL0YsR0FDbkJuQyxLQUFLaUMsU0FBUzZCLFVBQ2Y5RCxLQUFLMEQsc0JBR2IsaUJBQ1ExRCxLQUFLbUksWUFDTG5JLEtBQUs4RyxnQkFBa0IsR0FHdkI5RyxLQUFLb0ksV0FHYixXQUNJcEksS0FBSzhHLGdCQUFrQjlHLEtBQUtzQyxRQUFRK0YsSUFBSXRFLEdBQVVBLEVBQU90RCxJQUNwRFQsS0FBS2lDLFNBQVM2QixVQUNmOUQsS0FBSzBELHNCQUdiLFdBQVd2QixHQUNQLE9BQU9uQyxLQUFLOEcsZ0JBQWdCa0IsUUFBUTdGLElBQVUsRUFFbEQsV0FDUW5DLEtBQUsrRyxhQUNMdUIsV0FBVyxLQUNQdEksS0FBSytHLFlBQVl3QixTQUNsQixHQUdYLFVBQVVqRixHQUNOQSxFQUFNQyxrQkFDTnZELEtBQUswRCxzQkFFVCxjQUFjSixHQUNWQSxFQUFNQyxrQkFDTnZELEtBQUs4RyxnQkFBa0I5RyxLQUFLcUMsTUFBTWtGLE1BQU0sR0FDeEN2SCxLQUFLa0UsY0FBYyxJQUFJQyxZQUFZLGtCQUFtQixDQUFFVixRQUFRLEtBQ2hFekQsS0FBS29FLGdCQUVULGFBQWFkLEdBQ1RBLEVBQU1DLGtCQUNGdkQsS0FBSzhHLGdCQUFnQmpELE9BQVMsSUFDOUI3RCxLQUFLOEcsZ0JBQWtCLElBRTNCOUcsS0FBSzBELHNCQUNMMUQsS0FBS29FLGdCQUVULGtCQUNJLE9BQVFwRSxLQUFLc0MsU0FDZSxJQUF4QnRDLEtBQUtzQyxRQUFRdUIsUUFDYjdELEtBQUs4RyxpQkFDTDlHLEtBQUs4RyxnQkFBZ0JqRCxTQUFXN0QsS0FBS3NDLFFBQVF1QixPQUVyRCx3QkFDSSxPQUF1QyxJQUFoQzdELEtBQUs4RyxnQkFBZ0JqRCxTQUFpQjdELEtBQUttSSxZQUV0RCxzQkFDUW5JLEtBQUtxQyxNQUFNd0IsU0FBVzdELEtBQUs4RyxnQkFBZ0JqRCxRQUFVN0QsS0FBS3FDLE1BQU1tRyxNQUFNLENBQUNyRyxFQUFPNEYsSUFBVTVGLElBQVVuQyxLQUFLOEcsZ0JBQWdCaUIsSUFDdkgvSCxLQUFLa0UsY0FBYyxJQUFJQyxZQUFZLGtCQUFtQixDQUFFVixRQUFRLE1BR2hFekQsS0FBS3FDLE1BQVFyQyxLQUFLOEcsZ0JBQWdCUyxNQUFNLEdBQ3hDdkgsS0FBS2tFLGNBQWMsSUFBSUMsWUFBWSxrQkFBbUIsQ0FBRVYsT0FBUXpELEtBQUtxQyxVQUc3RSxnQkFDSXJDLEtBQUt5SSxnQkFBa0J6SSxLQUFLMEksb0JBQW9CMUksS0FBSytHLFlBQVk1RSxPQUNqRW5DLEtBQUtzSCxTQUVULGtCQUNJLE9BQVF0SCxLQUFLK0csWUFBaUIsTUFBSS9HLEtBQUt5SSxnQkFBa0J6SSxLQUFLc0MsUUFFbEUsb0JBQW9CSCxHQUNoQixPQUFLQSxHQUFVbkMsS0FBS3NDLFFBR2J0QyxLQUFLc0MsUUFBUXFHLE9BQU8zRyxHQUFPQSxFQUFJaUMsS0FBSzJFLGNBQWNaLFFBQVE3RixFQUFNeUcsZ0JBQWtCLEdBRjlFNUksS0FBS3NDLFFBSXBCLGNBQ0l0QyxLQUFLK0csWUFBWTlHLFlBQWNELEtBQUtpQyxTQUFTeUUsY0FDN0MxRyxLQUFLbUgsU0FBUzBCLFlBQWMsS0FDNUI3SSxLQUFLb0gsYUFBYXlCLFlBQWM3SSxLQUFLaUMsU0FBU3VFLGNBQzlDeEcsS0FBS3FILFlBQVl3QixZQUFjN0ksS0FBS2lDLFNBQVN3RSxhQUM3Q3pHLEtBQUtpSCxZQUFZNkIsbUJBQW1CRCxZQUFjN0ksS0FBS2lDLFNBQVNzRSxpQkFDaEV2RyxLQUFLbUgsU0FBUzdDLE1BQU1DLFFBQVV2RSxLQUFLaUMsU0FBUzZCLFNBQVcsUUFBVSxPQUNqRTlELEtBQUtnSCxVQUFVMUMsTUFBTUMsUUFBV3ZFLEtBQUtpQyxTQUFTNkIsVUFBWTlELEtBQUtpQyxTQUFTMEUsZ0JBQW1CLFFBQVUsT0FDckczRyxLQUFLK0csWUFBWXpDLE1BQU1DLFFBQVV2RSxLQUFLaUMsU0FBUzJFLGtCQUFvQixRQUFVLE9BRWpGLFNBQ0k1RyxLQUFLK0ksb0JBQ0wsTUFBTUMsRUFBY2hKLEtBQUtpSixvQkFBb0JDLEtBQUssSUFDbERsSixLQUFLa0gsU0FBU2lDLG1CQUFtQixZQUFhSCxHQUM5Q2hKLEtBQUtvRSxnQkFFVCxvQkFDSSxNQUFNZ0YsRUFBUyxHQVdmLE9BVkFwSixLQUFLcUosWUFBWTNHLFFBQVFxQixJQUNyQixJQUFJZSxFQUVBQSxFQURBOUUsS0FBS2lDLFNBQVM2QixTQWpOOUIsU0FBNkJDLEdBQ3pCLE1BQU8sOENBQ2dDQSxFQUFPdEQsc0ZBR25Dc0QsRUFBT0UscUNBNk1JcUYsQ0FBb0J2RixHQXhOOUMsU0FBMkJBLEdBQ3ZCLE1BQU8sOENBQ2dDQSxFQUFPdEQsb0NBQ3JCc0QsRUFBT0UsZ0JBd05Wc0YsQ0FBa0J4RixHQUVoQ3FGLEVBQU9qRCxLQUFLckIsS0FFVHNFLEVBRVgsVUFBVXhHLEdBQ04sTUFBTWdELEVBQXdCLE9BQW5CaEQsRUFBTzRHLFFBQW1CNUcsRUFBU0EsRUFBTzZHLFFBQVEsTUFDN0QsT0FBUTdELEdBQU1BLEVBQUc4RCxRQUFRakosR0FBTW1GLEVBQUc4RCxRQUFRakosR0FBSyxLQUVuRCxrQkFDSSxPQUFPOEIsTUFBTW9ILEtBQUszSixLQUFLa0gsU0FBUzBDLFVBRXBDLGdCQUFnQnRHLEdBQ1osTUFBTTdDLEVBQUtULEtBQUs2SixVQUFVdkcsRUFBTVYsUUFDNUJuQyxVQUNBNkMsRUFBTUMsa0JBQ0ssT0FBUDlDLEVBQ0FULEtBQUs4SixpQkFHTDlKLEtBQUsrSixZQUFZdEosR0FFckJULEtBQUtvRSxpQkFHYixnQkFDSXBFLEtBQUtnSixZQUFZdEcsUUFBU29DLElBQ3RCLE1BQU1yRSxFQUFLVCxLQUFLNkosVUFBVS9FLEdBQ3RCOUUsS0FBS2dLLFdBQVd2SixHQUNoQlQsS0FBS2lLLGdCQUFnQm5GLEdBR3JCOUUsS0FBS2tLLG1CQUFtQnBGLEtBR2hDOUUsS0FBS2lILFlBQVlrRCxRQUFVbkssS0FBS21JLFlBQ2hDbkksS0FBS2lILFlBQVltRCxjQUFnQnBLLEtBQUtxSyxrQkFFMUMsZ0JBQWdCdkYsR0FDUEEsRUFBUU4sb0JBR1R4RSxLQUFLaUMsU0FBUzZCLFNBQ2Q5RCxLQUFLc0ssZ0JBQWdCeEYsR0FBUyxJQUc5QkEsRUFBUXpELFVBQVVDLElBQUksVUFDdEJ3RCxFQUFRTixrQkFBa0JuRCxVQUFVQyxJQUFJLGdCQUdoRCxtQkFBbUJ3RCxHQUNWQSxFQUFRTixvQkFHVHhFLEtBQUtpQyxTQUFTNkIsU0FDZDlELEtBQUtzSyxnQkFBZ0J4RixHQUFTLElBRzlCQSxFQUFRekQsVUFBVW9ELE9BQU8sVUFDekJLLEVBQVFOLGtCQUFrQm5ELFVBQVVvRCxPQUFPLGdCQUduRCxnQkFBZ0JLLEVBQVNxRixHQUNQckYsRUFBUU4sa0JBQWtCQSxrQkFDbEMyRixRQUFVQSxFQUVwQixvQkFDSW5LLEtBQUtnSixZQUFZdEcsUUFBU29DLElBQ3RCLE1BQU1yRSxFQUFLVCxLQUFLNkosVUFBVS9FLEdBQ3RCckUsU0FBMEMsT0FBUEEsR0FDbkNxRSxFQUFRTCxZQUt4QkMsZUFBZUMsT0FBTyxrQkFBbUIsR0MzVHpDLG1DLGlCQ0FBNEYsRUFBT0MsUUFBVSIsImZpbGUiOiIxLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlbGVjdExpc3RTZXR0aW5ncyB9IGZyb20gJ0BtYXpkaWstbGliL3NlbGVjdC1saXN0JztcbmV4cG9ydCBjbGFzcyBEcm9wZG93blNlbGVjdFNldHRpbmdzIGV4dGVuZHMgU2VsZWN0TGlzdFNldHRpbmdzIHtcbiAgICBjb25zdHJ1Y3Rvcihpbml0KSB7XG4gICAgICAgIHN1cGVyKGluaXQpO1xuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gJ1NlbGVjdCc7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRNZXNzYWdlID0gJ1NlbGVjdGVkJztcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBpZiAoaW5pdCkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBpbml0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRyb3Bkb3duLXNlbGVjdC5zZXR0aW5ncy5qcy5tYXAiLCJpbXBvcnQgeyBEcm9wRG93biB9IGZyb20gJ0BtYXpkaWstbGliL2Ryb3Bkb3duJztcbmltcG9ydCAnQG1hemRpay1saWIvc2VsZWN0LWxpc3QnO1xuaW1wb3J0IHsgRHJvcGRvd25TZWxlY3RTZXR0aW5ncyB9IGZyb20gJy4vZHJvcGRvd24tc2VsZWN0LnNldHRpbmdzJztcbmZ1bmN0aW9uIGdldFRlbXBsYXRlKGlkKSB7XG4gICAgcmV0dXJuIGBcbiAgPGRpdiBjbGFzcz1cImR0LWlucHV0LWdyb3VwXCIgaWQ9XCJpbnB1dEdyb3VwJHtpZH1cIj5cbiAgICA8aW5wdXQgY2xhc3M9XCJkdC1pbnB1dCBkdC1zZWxlY3QtaW5wdXRcIiByZWFkb25seT1cInJlYWRvbmx5XCI+XG4gICAgPGJ1dHRvbiBjbGFzcz1cImR0LWJ1dHRvbiBkdC13aGl0ZVwiPlxuICAgICAgPGkgY2xhc3M9XCJkdC1pY29uXCI+PC9pPlxuICAgIDwvYnV0dG9uPlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz1cImR0LWRyb3Bkb3duLXNlbGVjdC1saXN0XCIgaWQ9XCJkcm9wZG93bkNvbnRlbnQke2lkfVwiPlxuICAgIDx3ZWItc2VsZWN0LWxpc3Q+PC93ZWItc2VsZWN0LWxpc3Q+XG4gIDwvZGl2PlxuICBgO1xufVxuZXhwb3J0IGNsYXNzIERyb3Bkb3duU2VsZWN0Q29tcG9uZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLl9zZXR0aW5ncyA9IG5ldyBEcm9wZG93blNlbGVjdFNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgICAgIGNvbnN0IGlkID0gKH5+KE1hdGgucmFuZG9tKCkgKiAxZTMpKS50b1N0cmluZygpO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGdldFRlbXBsYXRlKGlkKTtcbiAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnZHQtZHJvcGRvd24tc2VsZWN0Jyk7XG4gICAgICAgIHRoaXMuZHJvcGRvd24gPSBuZXcgRHJvcERvd24odGhpcyk7XG4gICAgICAgIHRoaXMuc2VsZWN0TGlzdCA9IHRoaXMucXVlcnlTZWxlY3Rvcignd2ViLXNlbGVjdC1saXN0Jyk7XG4gICAgICAgIHRoaXMuaW5wdXRHcm91cCA9IHRoaXMucXVlcnlTZWxlY3RvcignI2lucHV0R3JvdXAnICsgaWQpO1xuICAgICAgICB0aGlzLmRyb3Bkb3duQ29udGVudCA9IHRoaXMucXVlcnlTZWxlY3RvcignI2Ryb3Bkb3duQ29udGVudCcgKyBpZCk7XG4gICAgICAgIHRoaXMuaW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7XG4gICAgICAgIHRoaXMuYnV0dG9uID0gdGhpcy5xdWVyeVNlbGVjdG9yKCdidXR0b24nKTtcbiAgICAgICAgdGhpcy5jb250ZW50SW5pdCgpO1xuICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuICAgIGdldCBzZXR0aW5ncygpIHsgcmV0dXJuIHRoaXMuX3NldHRpbmdzOyB9XG4gICAgc2V0IHNldHRpbmdzKHZhbCkge1xuICAgICAgICB0aGlzLl9zZXR0aW5ncyA9IG5ldyBEcm9wZG93blNlbGVjdFNldHRpbmdzKHZhbCk7XG4gICAgICAgIHRoaXMuc2VsZWN0TGlzdC5zZXR0aW5ncyA9IHRoaXMuX3NldHRpbmdzO1xuICAgICAgICB0aGlzLmNvbnRlbnRJbml0KCk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkgeyByZXR1cm4gdGhpcy5fb3B0aW9uczsgfVxuICAgIHNldCBvcHRpb25zKHZhbCkge1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gdmFsO1xuICAgICAgICB0aGlzLmlucHV0LnZhbHVlID0gdGhpcy5nZXROYW1lKHRoaXMuc2VsZWN0TGlzdC5tb2RlbCk7XG4gICAgICAgIHRoaXMuc2VsZWN0TGlzdC5vcHRpb25zID0gdmFsO1xuICAgIH1cbiAgICBzZXQgdmFsdWUodmFsKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TGlzdC5tb2RlbCA9IFsuLi52YWxdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RMaXN0Lm1vZGVsID0gKHZhbCkgPyBbdmFsXSA6IFtdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5wdXQudmFsdWUgPSB0aGlzLmdldE5hbWUodGhpcy5zZWxlY3RMaXN0Lm1vZGVsKTtcbiAgICB9XG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuZHJvcGRvd24ucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaCh4ID0+IHtcbiAgICAgICAgICAgIHgudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoeC5ldmVudE5hbWUsIHguaGFuZGxlcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnb3BlbicsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IHRoaXMub25PcGVuQ2hhbmdlLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnY2xpY2snLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5pbnB1dEdyb3VwLFxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IHRoaXMub3Blbi5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogJ3NlbGVjdGlvbkNoYW5nZScsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLnNlbGVjdExpc3QsXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy5vblNlbGVjdGlvbkNoYW5nZS5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogJ3NlbGVjdGlvbkNhbmNlbCcsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLnNlbGVjdExpc3QsXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy5vblNlbGVjdGlvbkNhbmNlbC5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKHggPT4ge1xuICAgICAgICAgICAgeC50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcih4LmV2ZW50TmFtZSwgeC5oYW5kbGVyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9wZW4oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5kcm9wZG93bi50b2dnbGVEcm9wZG93bigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uU2VsZWN0aW9uQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuaW5wdXQudmFsdWUgPSB0aGlzLmdldE5hbWUoZXZlbnQuZGV0YWlsKTtcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VFbWl0KGV2ZW50LmRldGFpbCk7XG4gICAgICAgIHRoaXMuZHJvcGRvd24uY2xvc2VEcm9wZG93bigpO1xuICAgIH1cbiAgICBvblNlbGVjdGlvbkNhbmNlbCgpIHtcbiAgICAgICAgdGhpcy5kcm9wZG93bi5jbG9zZURyb3Bkb3duKCk7XG4gICAgfVxuICAgIGdldE5hbWUoaXRlbXMpIHtcbiAgICAgICAgaWYgKGl0ZW1zICYmIGl0ZW1zLmxlbmd0aCAmJiB0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubXVsdGlwbGUgJiYgaXRlbXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnNlbGVjdGVkTWVzc2FnZSArICc6ICcgKyBpdGVtcy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSB0aGlzLm9wdGlvbnMuZmluZCh4ID0+IHguaWQgPT09IGl0ZW1zWzBdKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKG9wdGlvbikgPyBvcHRpb24ubmFtZSA6ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzZWxlY3Rpb25DaGFuZ2VFbWl0KGl0ZW1zKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSAoaXRlbXMgJiYgaXRlbXMubGVuZ3RoKSA/IGl0ZW1zWzBdIDogbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3ZhbHVlQ2hhbmdlJywgeyBkZXRhaWw6IHZhbHVlIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3ZhbHVlQ2hhbmdlJywgeyBkZXRhaWw6IGl0ZW1zIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbk9wZW5DaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMucmVmcmVzaFN0eWxlcygpO1xuICAgICAgICB0aGlzLnNlbGVjdExpc3QuaXNPcGVuID0gdGhpcy5kcm9wZG93bi5pc09wZW47XG4gICAgfVxuICAgIGNvbnRlbnRJbml0KCkge1xuICAgICAgICB0aGlzLmlucHV0LnBsYWNlaG9sZGVyID0gdGhpcy5zZXR0aW5ncy5wbGFjZWhvbGRlcjtcbiAgICAgICAgdGhpcy5pbnB1dC5kaXNhYmxlZCA9IHRoaXMuc2V0dGluZ3MuZGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuYnV0dG9uLmRpc2FibGVkID0gdGhpcy5zZXR0aW5ncy5kaXNhYmxlZDtcbiAgICAgICAgdGhpcy5yZWZyZXNoU3R5bGVzKCk7XG4gICAgfVxuICAgIHJlZnJlc2hTdHlsZXMoKSB7XG4gICAgICAgIHRoaXMuZHJvcGRvd25Db250ZW50LnN0eWxlLmRpc3BsYXkgPSB0aGlzLmRyb3Bkb3duLmlzT3BlbiA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgICAgIGlmICh0aGlzLmRyb3Bkb3duLmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy5idXR0b24uZmlyc3RFbGVtZW50Q2hpbGQuY2xhc3NMaXN0LmFkZCgnYXNjJyk7XG4gICAgICAgICAgICB0aGlzLmJ1dHRvbi5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QucmVtb3ZlKCdkZXNjJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmJ1dHRvbi5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QucmVtb3ZlKCdhc2MnKTtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5hZGQoJ2Rlc2MnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnd2ViLWRyb3Bkb3duLXNlbGVjdCcsIERyb3Bkb3duU2VsZWN0Q29tcG9uZW50KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRyb3Bkb3duLXNlbGVjdC5jb21wb25lbnQuanMubWFwIiwiaW1wb3J0IHsgUGFnZSB9IGZyb20gJy4uL3BhZ2UnO1xuaW1wb3J0ICdAbWF6ZGlrLWxpYi9kcm9wZG93bi1zZWxlY3QnO1xuaW1wb3J0IHsgRHJvcGRvd25TZWxlY3RDb21wb25lbnQgfSBmcm9tICdAbWF6ZGlrLWxpYi9kcm9wZG93bi1zZWxlY3QnO1xuaW1wb3J0IHsgU2VsZWN0SXRlbSB9IGZyb20gJ0BtYXpkaWstbGliL2NvbW1vbic7XG5pbXBvcnQgaHRtbCBmcm9tICcuL2Ryb3Bkb3duLXNlbGVjdC5odG1sJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJvcGRvd25TZWxlY3REZW1vIGltcGxlbWVudHMgUGFnZSB7XG5cbiAgZ2V0IHRlbXBsYXRlKCk6IHN0cmluZyB7IHJldHVybiBodG1sOyB9XG5cbiAgbG9hZCgpIHtcbiAgICBjb25zdCBkcm9wZG93blNlbGVjdDEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZHJvcGRvd24tc2VsZWN0LWRlbW8xJykgYXMgRHJvcGRvd25TZWxlY3RDb21wb25lbnQ7XG4gICAgY29uc3QgZHJvcGRvd25TZWxlY3QyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Ryb3Bkb3duLXNlbGVjdC1kZW1vMicpIGFzIERyb3Bkb3duU2VsZWN0Q29tcG9uZW50O1xuXG4gICAgY29uc3Qgb3B0aW9uczogU2VsZWN0SXRlbVtdID0gW1xuICAgICAgeyBpZDogJzEnLCBuYW1lOiAnU2VsZWN0IDEnIH0sXG4gICAgICB7IGlkOiAnMicsIG5hbWU6ICdTZWxlY3QgMicgfSxcbiAgICAgIHsgaWQ6ICczJywgbmFtZTogJ1NlbGVjdCAzJyB9LFxuICAgICAgeyBpZDogJzQnLCBuYW1lOiAnU2VsZWN0IDQnIH0sXG4gICAgICB7IGlkOiAnNScsIG5hbWU6ICdTZWxlY3QgNScgfSxcbiAgICAgIHsgaWQ6ICc2JywgbmFtZTogJ1NlbGVjdCA2JyB9LFxuICAgIF07XG5cbiAgICBkcm9wZG93blNlbGVjdDEuc2V0dGluZ3MgPSB7XG4gICAgICBtdWx0aXBsZTogdHJ1ZVxuICAgIH07XG4gICAgZHJvcGRvd25TZWxlY3QxLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIGRyb3Bkb3duU2VsZWN0MS52YWx1ZSA9IFsnMicsICc0J107XG5cbiAgICBkcm9wZG93blNlbGVjdDIub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgZHJvcGRvd25TZWxlY3QyLnZhbHVlID0gWyczJ107XG4gIH1cblxufVxuIiwiaW1wb3J0IHsgS2V5cyB9IGZyb20gJ0BtYXpkaWstbGliL2NvbW1vbic7XG5leHBvcnQgY2xhc3MgRHJvcERvd24ge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5jbGlja0xpc3RlbmVyID0gdGhpcy5vbkNsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xpY2tMaXN0ZW5lcik7XG4gICAgICAgIHRoaXMud2luZG93Q2xpY2tMaXN0ZW5lciA9IHRoaXMub25XaW5kb3dDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLndpbmRvd0NsaWNrTGlzdGVuZXIpO1xuICAgICAgICB0aGlzLndpbmRvd0tleWRvd25MaXN0ZW5lciA9IHRoaXMub25LZXlEb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy53aW5kb3dLZXlkb3duTGlzdGVuZXIpO1xuICAgIH1cbiAgICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja0xpc3RlbmVyKTtcbiAgICAgICAgd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy53aW5kb3dDbGlja0xpc3RlbmVyKTtcbiAgICAgICAgd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLndpbmRvd0tleWRvd25MaXN0ZW5lcik7XG4gICAgfVxuICAgIG9uQ2xpY2soKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0Q29udGFpbmVyQ2xpY2tlZCA9IHRydWU7XG4gICAgfVxuICAgIG9uV2luZG93Q2xpY2soKSB7XG4gICAgICAgIGlmICghdGhpcy5zZWxlY3RDb250YWluZXJDbGlja2VkKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbGVjdENvbnRhaW5lckNsaWNrZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgb25LZXlEb3duKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBLZXlzLkVTQ0FQRSB8fCBldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRHJvcGRvd24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b2dnbGVEcm9wZG93bigpIHtcbiAgICAgICAgdGhpcy5pc09wZW4gPyB0aGlzLmNsb3NlRHJvcGRvd24oKSA6IHRoaXMub3BlbkRyb3Bkb3duKCk7XG4gICAgfVxuICAgIG9wZW5Ecm9wZG93bigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdvcGVuJywgeyBkZXRhaWw6IHRoaXMuaXNPcGVuIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZURyb3Bkb3duKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ29wZW4nLCB7IGRldGFpbDogdGhpcy5pc09wZW4gfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZHJvcC1kb3duLmpzLm1hcCIsImV4cG9ydCBjbGFzcyBEcm9wZG93bkVsZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgICBzZXQgY2xpY2tlZEVsZW1lbnQoZWwpIHtcbiAgICAgICAgaWYgKGVsICE9PSB0aGlzLmVsZW1lbnQgJiYgdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0eWxlcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdjbGljaycsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy50b2dnbGVEcm9wZG93bi5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnRhcmdldC5hZGRFdmVudExpc3RlbmVyKHguZXZlbnROYW1lLCB4LmhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHguZXZlbnROYW1lLCB4LmhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9nZ2xlKCkge1xuICAgICAgICB0aGlzLmlzT3BlbiA9ICF0aGlzLmlzT3BlbjtcbiAgICB9XG4gICAgdG9nZ2xlRHJvcGRvd24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMudG9nZ2xlKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnY2xpY2tFbGVtZW50JywgeyBkZXRhaWw6IHRoaXMuZWxlbWVudCB9KSk7XG4gICAgfVxuICAgIG9uV2luZG93Q2xpY2soZXZlbnQpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgaWYgKCF0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2xpY2tlZEluc2lkZSA9IHRoaXMuZWxlbWVudC5jb250YWlucyh0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgaWYgKCFjbGlja2VkSW5zaWRlKSB7XG4gICAgICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gICAgfVxuICAgIHVwZGF0ZVN0eWxlcygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRyb3Bkb3duLWVsZW1lbnQuanMubWFwIiwiaW1wb3J0IHsgRHJvcGRvd25FbGVtZW50IH0gZnJvbSAnLi9kcm9wZG93bi1lbGVtZW50JztcbmV4cG9ydCBjbGFzcyBEcm9wZG93biB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudHMpIHtcbiAgICAgICAgdGhpcy5kcm9wZG93bnMgPSBbXTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kcm9wZG93bnMucHVzaChuZXcgRHJvcGRvd25FbGVtZW50KGVsZW1lbnQpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoZWxlbWVudHMpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuZHJvcGRvd25zLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVycyhlbGVtZW50cykge1xuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdjbGljaycsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB3aW5kb3csXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy5vbldpbmRvd0NsaWNrLmJpbmQodGhpcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnY2xpY2tFbGVtZW50JyxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy5vbkNsaWNrRWxlbWVudC5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnRhcmdldC5hZGRFdmVudExpc3RlbmVyKHguZXZlbnROYW1lLCB4LmhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMubGlzdGVuZXJzLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHguZXZlbnROYW1lLCB4LmhhbmRsZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25XaW5kb3dDbGljayhldmVudCkge1xuICAgICAgICB0aGlzLmRyb3Bkb3ducy5mb3JFYWNoKHggPT4ge1xuICAgICAgICAgICAgeC5vbldpbmRvd0NsaWNrKGV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uQ2xpY2tFbGVtZW50KGV2ZW50KSB7XG4gICAgICAgIHRoaXMuZHJvcGRvd25zLmZvckVhY2goeCA9PiB7XG4gICAgICAgICAgICB4LmNsaWNrZWRFbGVtZW50ID0gZXZlbnQuZGV0YWlsO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kcm9wZG93bi5qcy5tYXAiLCJleHBvcnQgKiBmcm9tICcuL2Ryb3AtZG93bic7XG5leHBvcnQgKiBmcm9tICcuL2Ryb3Bkb3duJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsImV4cG9ydCBjbGFzcyBTZWxlY3RMaXN0U2V0dGluZ3Mge1xuICAgIGNvbnN0cnVjdG9yKGluaXQpIHtcbiAgICAgICAgdGhpcy5tdWx0aXBsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNlbGVjdEFsbE1lc3NhZ2UgPSAnU2VsZWN0IGFsbCc7XG4gICAgICAgIHRoaXMuY2FuY2VsTWVzc2FnZSA9ICdDYW5jZWwnO1xuICAgICAgICB0aGlzLmNsZWFyTWVzc2FnZSA9ICdDbGVhcic7XG4gICAgICAgIHRoaXMuc2VhcmNoTWVzc2FnZSA9ICdTZWFyY2guLi4nO1xuICAgICAgICB0aGlzLmVuYWJsZVNlbGVjdEFsbCA9IHRydWU7XG4gICAgICAgIHRoaXMuZW5hYmxlRmlsdGVySW5wdXQgPSB0cnVlO1xuICAgICAgICBpZiAoaW5pdCkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBpbml0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNlbGVjdC1saXN0LnNldHRpbmdzLmpzLm1hcCIsImltcG9ydCB7IFNlbGVjdExpc3RTZXR0aW5ncyB9IGZyb20gJy4vc2VsZWN0LWxpc3Quc2V0dGluZ3MnO1xuZnVuY3Rpb24gZ2V0VGVtcGxhdGUoaWQpIHtcbiAgICByZXR1cm4gYFxuICA8aW5wdXQgY2xhc3M9XCJkdC1pbnB1dCBkdC1mb3JtLWdyb3VwXCIgaWQ9XCJmaWx0ZXJJbnB1dCR7aWR9XCI+XG4gIDx1bCBjbGFzcz1cImR0LWxpc3QtbWVudSBkdC1saXN0LW1lbnUtc2Nyb2xsXCIgaWQ9XCJsaXN0TWVudSR7aWR9XCI+XG4gICAgPGxpIGNsYXNzPVwiZHQtbGlzdC1tZW51LWl0ZW1cIiBpZD1cInNlbGVjdEFsbCR7aWR9XCIgZGF0YS1pZD1cIi0xXCI+XG4gICAgICA8c3BhbiBjbGFzcz1cImR0LWNoZWNrYm94XCI+XG4gICAgICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cImNoZWNrYm94QWxsJHtpZH1cIi8+XG4gICAgICAgIDxsYWJlbD48L2xhYmVsPlxuICAgICAgPC9zcGFuPlxuICAgIDwvbGk+XG4gICAgPGxpIGNsYXNzPVwiZHQtbGlzdC1kaXZpZGVyXCI+PC9saT5cbiAgPC91bD5cbiAgPGRpdiBjbGFzcz1cImR0LWxpc3QtbWVudS1yb3dcIj5cbiAgICA8YnV0dG9uIGNsYXNzPVwiZHQtYnV0dG9uIGR0LWJ1dHRvbi1zbVwiIGlkPVwib2tCdXR0b24ke2lkfVwiPjwvYnV0dG9uPlxuICAgIDxidXR0b24gY2xhc3M9XCJkdC1idXR0b24gZHQtYnV0dG9uLXNtXCIgaWQ9XCJjYW5jZWxCdXR0b24ke2lkfVwiPjwvYnV0dG9uPlxuICAgIDxidXR0b24gY2xhc3M9XCJkdC1idXR0b24gZHQtYnV0dG9uLXNtXCIgaWQ9XCJjbGVhckJ1dHRvbiR7aWR9XCI+PC9idXR0b24+XG4gIDwvZGl2PlxuICBgO1xufVxuZnVuY3Rpb24gZ2V0VGVtcGxhdGVTaW5nbGUob3B0aW9uKSB7XG4gICAgcmV0dXJuIGBcbiAgPGxpIGNsYXNzPVwiZHQtbGlzdC1tZW51LWl0ZW1cIiBkYXRhLWlkPVwiJHtvcHRpb24uaWR9XCI+XG4gICAgPGkgY2xhc3M9XCJkdC1pY29uXCI+PC9pPiR7b3B0aW9uLm5hbWV9XG4gIDwvbGk+YDtcbn1cbmZ1bmN0aW9uIGdldFRlbXBsYXRlTXVsdGlwbGUob3B0aW9uKSB7XG4gICAgcmV0dXJuIGBcbiAgPGxpIGNsYXNzPVwiZHQtbGlzdC1tZW51LWl0ZW1cIiBkYXRhLWlkPVwiJHtvcHRpb24uaWR9XCI+XG4gICAgPHNwYW4gY2xhc3M9XCJkdC1jaGVja2JveFwiPlxuICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiLz5cbiAgICAgIDxsYWJlbD4ke29wdGlvbi5uYW1lfTwvbGFiZWw+XG4gICAgPC9zcGFuPlxuICA8L2xpPmA7XG59XG5leHBvcnQgY2xhc3MgU2VsZWN0TGlzdENvbXBvbmVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXcgU2VsZWN0TGlzdFNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuX21vZGVsID0gW107XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zID0gW107XG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgICAgIGNvbnN0IGlkID0gKH5+KE1hdGgucmFuZG9tKCkgKiAxZTMpKS50b1N0cmluZygpO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IGdldFRlbXBsYXRlKGlkKTtcbiAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgIHRoaXMuZmlsdGVySW5wdXQgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyNmaWx0ZXJJbnB1dCcgKyBpZCk7XG4gICAgICAgIHRoaXMuc2VsZWN0QWxsID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjc2VsZWN0QWxsJyArIGlkKTtcbiAgICAgICAgdGhpcy5jaGVja2JveEFsbCA9IHRoaXMucXVlcnlTZWxlY3RvcignI2NoZWNrYm94QWxsJyArIGlkKTtcbiAgICAgICAgdGhpcy5saXN0TWVudSA9IHRoaXMucXVlcnlTZWxlY3RvcignI2xpc3RNZW51JyArIGlkKTtcbiAgICAgICAgdGhpcy5va0J1dHRvbiA9IHRoaXMucXVlcnlTZWxlY3RvcignI29rQnV0dG9uJyArIGlkKTtcbiAgICAgICAgdGhpcy5jYW5jZWxCdXR0b24gPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJyNjYW5jZWxCdXR0b24nICsgaWQpO1xuICAgICAgICB0aGlzLmNsZWFyQnV0dG9uID0gdGhpcy5xdWVyeVNlbGVjdG9yKCcjY2xlYXJCdXR0b24nICsgaWQpO1xuICAgICAgICB0aGlzLmNvbnRlbnRJbml0KCk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG4gICAgZ2V0IHNldHRpbmdzKCkgeyByZXR1cm4gdGhpcy5fc2V0dGluZ3M7IH1cbiAgICBzZXQgc2V0dGluZ3ModmFsKSB7XG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0gbmV3IFNlbGVjdExpc3RTZXR0aW5ncyh2YWwpO1xuICAgICAgICB0aGlzLmNvbnRlbnRJbml0KCk7XG4gICAgfVxuICAgIGdldCBvcHRpb25zKCkgeyByZXR1cm4gdGhpcy5fb3B0aW9uczsgfVxuICAgIHNldCBvcHRpb25zKHZhbCkge1xuICAgICAgICB0aGlzLl9vcHRpb25zID0gdmFsO1xuICAgICAgICB0aGlzLnJlbmRlcigpO1xuICAgIH1cbiAgICBnZXQgbW9kZWwoKSB7IHJldHVybiB0aGlzLl9tb2RlbDsgfVxuICAgIHNldCBtb2RlbCh2YWwpIHtcbiAgICAgICAgdGhpcy5fbW9kZWwgPSB2YWw7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zID0gKHZhbCAmJiB2YWwubGVuZ3RoKSA/IHZhbC5zbGljZSgwKSA6IFtdO1xuICAgICAgICB0aGlzLnJlZnJlc2hTdHlsZXMoKTtcbiAgICB9XG4gICAgZ2V0IGlzT3BlbigpIHsgcmV0dXJuIHRoaXMuX2lzT3BlbjsgfVxuICAgIHNldCBpc09wZW4odmFsKSB7XG4gICAgICAgIHRoaXMuX2lzT3BlbiA9IHZhbDtcbiAgICAgICAgaWYgKHZhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRGb2N1cygpO1xuICAgICAgICAgICAgdGhpcy5maWx0ZXJJbnB1dC52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnaW5wdXQnLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5maWx0ZXJJbnB1dCxcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiB0aGlzLm9uSW5wdXRGaWx0ZXIuYmluZCh0aGlzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBldmVudE5hbWU6ICdjbGljaycsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLm9rQnV0dG9uLFxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IHRoaXMub25DbGlja09rLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnY2xpY2snLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5jYW5jZWxCdXR0b24sXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy5vbkNsaWNrQ2FuY2VsLmJpbmQodGhpcylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZXZlbnROYW1lOiAnY2xpY2snLFxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5jbGVhckJ1dHRvbixcbiAgICAgICAgICAgICAgICBoYW5kbGVyOiB0aGlzLm9uQ2xpY2tDbGVhci5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGV2ZW50TmFtZTogJ2NsaWNrJyxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRoaXMubGlzdE1lbnUsXG4gICAgICAgICAgICAgICAgaGFuZGxlcjogdGhpcy5vbkNsaWNrTGlzdE1lbnUuYmluZCh0aGlzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaCh4ID0+IHtcbiAgICAgICAgICAgIHgudGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoeC5ldmVudE5hbWUsIHguaGFuZGxlcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaCh4ID0+IHtcbiAgICAgICAgICAgIHgudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoeC5ldmVudE5hbWUsIHguaGFuZGxlcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRTZWxlY3RlZE9wdGlvbnModmFsdWUpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNlbGVjdGVkT3B0aW9ucy5pbmRleE9mKHZhbHVlKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucy5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRTZWxlY3RlZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnNldFNlbGVjdGVkT3B0aW9ucyh2YWx1ZSk7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VFbWl0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0U2VsZWN0ZWRBbGwoKSB7XG4gICAgICAgIGlmICh0aGlzLmFsbFNlbGVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jaGVja0FsbCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNoZWNrQWxsKCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IHRoaXMub3B0aW9ucy5tYXAob3B0aW9uID0+IG9wdGlvbi5pZCk7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VFbWl0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNTZWxlY3RlZCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZE9wdGlvbnMuaW5kZXhPZih2YWx1ZSkgPiAtMTtcbiAgICB9XG4gICAgc2V0Rm9jdXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmZpbHRlcklucHV0KSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcklucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbkNsaWNrT2soZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlRW1pdCgpO1xuICAgIH1cbiAgICBvbkNsaWNrQ2FuY2VsKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyA9IHRoaXMubW9kZWwuc2xpY2UoMCk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ3NlbGVjdGlvbkNhbmNlbCcsIHsgZGV0YWlsOiB0cnVlIH0pKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoU3R5bGVzKCk7XG4gICAgfVxuICAgIG9uQ2xpY2tDbGVhcihldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRPcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb25zID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VFbWl0KCk7XG4gICAgICAgIHRoaXMucmVmcmVzaFN0eWxlcygpO1xuICAgIH1cbiAgICBnZXQgYWxsU2VsZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5vcHRpb25zICYmXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMubGVuZ3RoICE9PSAwICYmXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9ucyAmJlxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMubGVuZ3RoID09PSB0aGlzLm9wdGlvbnMubGVuZ3RoKTtcbiAgICB9XG4gICAgZ2V0IHBhcnRpYWxseVNlbGVjdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZE9wdGlvbnMubGVuZ3RoICE9PSAwICYmICF0aGlzLmFsbFNlbGVjdGVkO1xuICAgIH1cbiAgICBzZWxlY3Rpb25DaGFuZ2VFbWl0KCkge1xuICAgICAgICBpZiAodGhpcy5tb2RlbC5sZW5ndGggPT09IHRoaXMuc2VsZWN0ZWRPcHRpb25zLmxlbmd0aCAmJiB0aGlzLm1vZGVsLmV2ZXJ5KCh2YWx1ZSwgaW5kZXgpID0+IHZhbHVlID09PSB0aGlzLnNlbGVjdGVkT3B0aW9uc1tpbmRleF0pKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdzZWxlY3Rpb25DYW5jZWwnLCB7IGRldGFpbDogdHJ1ZSB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gdGhpcy5zZWxlY3RlZE9wdGlvbnMuc2xpY2UoMCk7XG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdzZWxlY3Rpb25DaGFuZ2UnLCB7IGRldGFpbDogdGhpcy5tb2RlbCB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25JbnB1dEZpbHRlcigpIHtcbiAgICAgICAgdGhpcy5maWx0ZXJlZE9wdGlvbnMgPSB0aGlzLmZpbHRlck9wdGlvbnNCeU5hbWUodGhpcy5maWx0ZXJJbnB1dC52YWx1ZSk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfVxuICAgIGdldCB2aWV3T3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmZpbHRlcklucHV0LnZhbHVlKSA/IHRoaXMuZmlsdGVyZWRPcHRpb25zIDogdGhpcy5vcHRpb25zO1xuICAgIH1cbiAgICBmaWx0ZXJPcHRpb25zQnlOYW1lKHZhbHVlKSB7XG4gICAgICAgIGlmICghdmFsdWUgfHwgIXRoaXMub3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmZpbHRlcih2YWwgPT4gdmFsLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbHVlLnRvTG93ZXJDYXNlKCkpID4gLTEpO1xuICAgIH1cbiAgICBjb250ZW50SW5pdCgpIHtcbiAgICAgICAgdGhpcy5maWx0ZXJJbnB1dC5wbGFjZWhvbGRlciA9IHRoaXMuc2V0dGluZ3Muc2VhcmNoTWVzc2FnZTtcbiAgICAgICAgdGhpcy5va0J1dHRvbi50ZXh0Q29udGVudCA9ICdPSyc7XG4gICAgICAgIHRoaXMuY2FuY2VsQnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5zZXR0aW5ncy5jYW5jZWxNZXNzYWdlO1xuICAgICAgICB0aGlzLmNsZWFyQnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5zZXR0aW5ncy5jbGVhck1lc3NhZ2U7XG4gICAgICAgIHRoaXMuY2hlY2tib3hBbGwubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50ID0gdGhpcy5zZXR0aW5ncy5zZWxlY3RBbGxNZXNzYWdlO1xuICAgICAgICB0aGlzLm9rQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSB0aGlzLnNldHRpbmdzLm11bHRpcGxlID8gJ2Jsb2NrJyA6ICdub25lJztcbiAgICAgICAgdGhpcy5zZWxlY3RBbGwuc3R5bGUuZGlzcGxheSA9ICh0aGlzLnNldHRpbmdzLm11bHRpcGxlICYmIHRoaXMuc2V0dGluZ3MuZW5hYmxlU2VsZWN0QWxsKSA/ICdibG9jaycgOiAnbm9uZSc7XG4gICAgICAgIHRoaXMuZmlsdGVySW5wdXQuc3R5bGUuZGlzcGxheSA9IHRoaXMuc2V0dGluZ3MuZW5hYmxlRmlsdGVySW5wdXQgPyAnYmxvY2snIDogJ25vbmUnO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlTGlzdENvbnRlbnQoKTtcbiAgICAgICAgY29uc3QgbGlzdENvbnRlbnQgPSB0aGlzLmNyZWF0ZUxpc3RDb250ZW50KCkuam9pbignJyk7XG4gICAgICAgIHRoaXMubGlzdE1lbnUuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBsaXN0Q29udGVudCk7XG4gICAgICAgIHRoaXMucmVmcmVzaFN0eWxlcygpO1xuICAgIH1cbiAgICBjcmVhdGVMaXN0Q29udGVudCgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgICAgIHRoaXMudmlld09wdGlvbnMuZm9yRWFjaChvcHRpb24gPT4ge1xuICAgICAgICAgICAgbGV0IGVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBnZXRUZW1wbGF0ZU11bHRpcGxlKG9wdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZ2V0VGVtcGxhdGVTaW5nbGUob3B0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZ2V0RGF0YUlkKHRhcmdldCkge1xuICAgICAgICBjb25zdCBlbCA9IHRhcmdldC50YWdOYW1lID09PSAnTEknID8gdGFyZ2V0IDogdGFyZ2V0LmNsb3Nlc3QoJ2xpJyk7XG4gICAgICAgIHJldHVybiAoZWwgJiYgZWwuZGF0YXNldC5pZCkgPyBlbC5kYXRhc2V0LmlkIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IGxpc3RDb250ZW50KCkge1xuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmxpc3RNZW51LmNoaWxkcmVuKTtcbiAgICB9XG4gICAgb25DbGlja0xpc3RNZW51KGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXREYXRhSWQoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgaWYgKGlkICE9PSBudWxsICYmIGlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgaWYgKGlkID09PSAnLTEnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZEFsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hTdHlsZXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZWZyZXNoU3R5bGVzKCkge1xuICAgICAgICB0aGlzLmxpc3RDb250ZW50LmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXREYXRhSWQoZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1NlbGVjdGVkKGlkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQWN0aXZlU3R5bGVzKGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVBY3RpdmVTdHlsZXMoZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNoZWNrYm94QWxsLmNoZWNrZWQgPSB0aGlzLmFsbFNlbGVjdGVkO1xuICAgICAgICB0aGlzLmNoZWNrYm94QWxsLmluZGV0ZXJtaW5hdGUgPSB0aGlzLnBhcnRpYWxseVNlbGVjdGVkO1xuICAgIH1cbiAgICBhZGRBY3RpdmVTdHlsZXMoZWxlbWVudCkge1xuICAgICAgICBpZiAoIWVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRJbnB1dENoZWNrZWQoZWxlbWVudCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZC5jbGFzc0xpc3QuYWRkKCdkdC1pY29uLW9rJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlQWN0aXZlU3R5bGVzKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCFlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MubXVsdGlwbGUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0SW5wdXRDaGVja2VkKGVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICBlbGVtZW50LmZpcnN0RWxlbWVudENoaWxkLmNsYXNzTGlzdC5yZW1vdmUoJ2R0LWljb24tb2snKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRJbnB1dENoZWNrZWQoZWxlbWVudCwgY2hlY2tlZCkge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgIGlucHV0LmNoZWNrZWQgPSBjaGVja2VkO1xuICAgIH1cbiAgICByZW1vdmVMaXN0Q29udGVudCgpIHtcbiAgICAgICAgdGhpcy5saXN0Q29udGVudC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMuZ2V0RGF0YUlkKGVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKGlkICE9PSBudWxsICYmIGlkICE9PSB1bmRlZmluZWQgJiYgaWQgIT09ICctMScpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ3dlYi1zZWxlY3QtbGlzdCcsIFNlbGVjdExpc3RDb21wb25lbnQpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c2VsZWN0LWxpc3QuY29tcG9uZW50LmpzLm1hcCIsImV4cG9ydCAqIGZyb20gJy4vc2VsZWN0LWxpc3QuY29tcG9uZW50JztcbmV4cG9ydCAqIGZyb20gJy4vc2VsZWN0LWxpc3Quc2V0dGluZ3MnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImRyb3Bkb3duLXNlbGVjdC1kZW1vXFxcIj5cXG4gIDx3ZWItZHJvcGRvd24tc2VsZWN0IGNsYXNzPVxcXCJzbC1jb2x1bW5cXFwiIGlkPVxcXCJkcm9wZG93bi1zZWxlY3QtZGVtbzFcXFwiPjwvd2ViLWRyb3Bkb3duLXNlbGVjdD5cXG4gIDx3ZWItZHJvcGRvd24tc2VsZWN0IGNsYXNzPVxcXCJzbC1jb2x1bW5cXFwiIGlkPVxcXCJkcm9wZG93bi1zZWxlY3QtZGVtbzJcXFwiPjwvd2ViLWRyb3Bkb3duLXNlbGVjdD5cXG48L2Rpdj5cXG5cIjsiXSwic291cmNlUm9vdCI6IiJ9