(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{124:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));class s{constructor(t){this.dragX=!0,this.dragY=!0,t&&Object.assign(this,t)}}class n{constructor(t,e){this.element=t,this.options=new s(e),this.handler=function(t,e,i){t.style.cursor="grab";let s={top:0,left:0,x:0,y:0};const n=e=>{t.style.cursor="grabbing",t.style.userSelect="none",s={left:t.scrollLeft,top:t.scrollTop,x:e.clientX,y:e.clientY},document.addEventListener("mousemove",h),document.addEventListener("mouseup",a)},h=n=>{const h=n.clientX-s.x,a=n.clientY-s.y;e&&(t.scrollLeft=s.left-h),i&&(t.scrollTop=s.top-a)},a=()=>{t.style.cursor="grab",t.style.removeProperty("user-select"),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",a)};return t.addEventListener("mousedown",n),n}(this.element,this.options.dragX,this.options.dragY)}destroy(){this.element.addEventListener("mousedown",this.handler)}}},132:function(t,e){},144:function(t,e,i){"use strict";var s=i(0),n=i(2),h=i(124);function a(t,e){return(e.getTime()-t.getTime())/1e3}function r(t,e,i,n){const h=t=>t.toLocaleDateString([],{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),r=a(t,e),d=Object(s.toISOStringIgnoreTZ)(i);if(r<=86400){const e=d.substr(11,5);return"00:00"===e&&86400===a(t,i)?"24:00":e}return r>86400&&r<=345600||n>1?h(i):i.toLocaleDateString([],{month:"2-digit",day:"2-digit"})}function d(t,e,i,s){const n=a(t,e);let h=function(t,e,i,s){const n=a(t,e),h=i*n/100,r=s*n/100;return{dateFrom:new Date(t.getTime()+1e3*h),dateTo:new Date(t.getTime()+1e3*r)}}(t,e,i,s);return n>1296e3&&(h={dateFrom:o(h.dateFrom),dateTo:o(h.dateTo)}),h}function l(t,e,i){const s=i/a(t,e)*100;return Math.round(100*s)/100}function o(t){return t.setHours(t.getHours()+Math.round(t.getMinutes()/60)),t.setMinutes(0,0,0),t}class c{constructor(t,e){this.element=t,this.inPercentage=e,this.startListeners=[],this.globalListeners=[],this.viewInit(),this.addEventListeners()}get unit(){return this.inPercentage?"%":"px"}viewInit(){this.handleE=this.createHandle("resize-e"),this.element.append(this.handleE),this.handleW=this.createHandle("resize-w"),this.element.append(this.handleW)}destroy(){this.removeEventListeners()}addEventListeners(){this.startListeners=[{eventName:"mousedown",target:this.element,handler:this.onMousedown.bind(this)}],this.startListeners.forEach(t=>{t.target.addEventListener(t.eventName,t.handler)})}removeEventListeners(){this.startListeners.forEach(t=>{t.target.removeEventListener(t.eventName,t.handler)})}onMousedown(t){if(0!==t.button)return;this.initMinMax();const e=t.target,i=e===this.handleE||e.parentElement===this.handleE,s=e===this.handleW||e.parentElement===this.handleW,n=this.element.clientWidth,h=this.element.offsetLeft,a=t.screenX;this.parentElementWidth=this.element.parentElement.clientWidth,(i||s)&&(this.initResize(t,i,s),this.globalListeners=[{eventName:"mousemove",target:window,handler:this.onMove.bind(this,n,a,h)},{eventName:"mouseup",target:window,handler:this.onMouseup.bind(this)}],this.globalListeners.forEach(t=>{t.target.addEventListener(t.eventName,t.handler)}))}onMove(t,e,i,s){const n=s.screenX-e;this.resizingW?(this.newWidth=t-n,this.newLeft=i+n):this.newWidth=t+n,this.inPercentage&&(this.newWidth=this.newWidth/this.parentElementWidth*100,this.newLeft=this.newLeft/this.parentElementWidth*100),this.resizeWidth()}onMouseup(){this.endResize(),this.globalListeners.forEach(t=>{t.target.removeEventListener(t.eventName,t.handler)})}createHandle(t){const e=document.createElement("div");e.classList.add(t);const i=document.createElement("div");return i.classList.add("resize-handle"),e.append(i),e}initResize(t,e,i){e&&(this.resizingE=!0),i&&(this.resizingW=!0),this.element.classList.add("resizing"),this.newWidth=this.inPercentage?this.element.clientWidth/this.parentElementWidth*100:this.element.clientWidth,this.newLeft=this.inPercentage?this.element.offsetLeft/this.parentElementWidth*100:this.element.offsetLeft,t.stopPropagation(),this.element.dispatchEvent(new CustomEvent("resizeBegin"))}endResize(){this.resizingE=!1,this.resizingW=!1,this.element.classList.remove("resizing");const t={width:this.resultWidth,left:this.resultLeft};this.element.dispatchEvent(new CustomEvent("resizeEnd",{detail:t}))}resizeWidth(){const t=!this.minWidth||this.newWidth>=this.minWidth,e=!this.maxWidth||this.newWidth<=this.maxWidth;if((this.resizingE||this.resizingW)&&t&&e){this.element.style.width=this.newWidth+this.unit,this.resizingW&&this.newWidth>=0?(this.element.style.left=this.newLeft+this.unit,this.resultLeft=this.newLeft):this.resultLeft=null,this.resultWidth=this.newWidth;const t={width:this.newWidth,left:this.newLeft};this.element.dispatchEvent(new CustomEvent("resizing",{detail:t}))}}initMinMax(){const t=window.getComputedStyle(this.element);this.minWidth=parseFloat(t.minWidth),this.maxWidth=parseFloat(t.maxWidth)}}class m extends HTMLElement{constructor(){super(),this._zoom=1,this.handleMultiplier=2,this.xAxisLabels=[],this.chartSliderData=[],this.handleLeftPos=0,this.chartSliderWidth=100,this.countAxisLabels=15,this.unit="%",this.listeners=[]}get dateFrom(){return this._dateFrom}set dateFrom(t){this._dateFrom=t,this.onInputChanges()}get dateTo(){return this._dateTo}set dateTo(t){this._dateTo=t,this.onInputChanges()}get intervals(){return this._intervals}set intervals(t){this._intervals=t,this.onInputChanges()}get zoom(){return this._zoom}set zoom(t){t&&t>0&&(this._zoom=t,this.zooming())}connectedCallback(){this.isInitialized||(this.onInit(),this.isInitialized=!0)}disconnectedCallback(){this.removeEventListeners(),this.draggableDirective.destroy(),this.resizableDirective.destroy(),this.dragToScroll.destroy()}onInit(){this.renderInit(),this.addEventListeners()}addEventListeners(){this.listeners=[{eventName:"keydown",target:this,handler:this.onKeyDown.bind(this)},{eventName:"mousedown",target:this.sliderHandleBody,handler:this.onMouseDown.bind(this)},{eventName:"touchstart",target:this.sliderHandleBody,handler:this.onTouchStart.bind(this)},{eventName:"dragEnd",target:this.sliderHandle,handler:this.onDragEnd.bind(this)},{eventName:"resizeEnd",target:this.sliderHandle,handler:this.onResizeEnd.bind(this)}],this.listeners.forEach(t=>{t.target.addEventListener(t.eventName,t.handler)})}removeEventListeners(){this.listeners.forEach(t=>{t.target.removeEventListener(t.eventName,t.handler)})}onInputChanges(){var t,e,i;this.dateFrom&&this.dateTo&&this.intervals&&(this.handleLeftPos=0,[this.minHandleTime,this.maxHandleTime]=(t=this.dateFrom,e=this.dateTo,i=this.handleMultiplier,a(t,e)>=2419200?[86400,86400*i]:[3600,86400]),this.createChartSlider())}onKeyDown(t){"ArrowLeft"===t.key?this.decrementHandleLeftPos():"ArrowRight"===t.key&&this.incrementHandleLeftPos(),this.updateStyles()}createChartSlider(){this.handleMinWidth=l(this.dateFrom,this.dateTo,this.minHandleTime),this.handleMaxWidth=l(this.dateFrom,this.dateTo,this.maxHandleTime),this.handleWidth=this.handleMinWidth,this.xAxisLabels=function(t,e,i,s){const n=Math.round(i*s),h=a(t,e),d=h/n,l=d/h*100;let o=1/n*.9*100;o=Math.round(100*o)/100;const c=[];for(let i=0;i<=n;i++){const h=new Date(t.getTime()+1e3*d*i),a={widthPercent:i===n?null:o,positionPercent:l*i,name:r(t,e,h,s)};c.push(a)}return c}(this.dateFrom,this.dateTo,this.countAxisLabels,this.zoom),this.chartSliderData=function(t,e,i){const s=[];if(!i||0===i.length)return[];const n=a(t,e),h=i.map(t=>t.dtFrom),r=i.map(t=>t.dtTo),d=h.concat(r).filter((t,e,i)=>i.findIndex(e=>e.getTime()===t.getTime())===e);return d.sort((t,e)=>t.getTime()-e.getTime()),d.forEach((h,r)=>{let l=h,o=d[r+1]?d[r+1]:e;l<t&&(l=t),o>e&&(o=e);const c=i.filter(t=>t.dtFrom<o&&t.dtTo>l),m=c.map(t=>({heightPercent:Math.round(100/c.length*100)/100,color:t.color,label:t.label})),u=a(l,o),g={widthPercent:u/n*100,positionPercent:100-a(l,e)/n*100,items:m};u>0&&c.length&&s.push(g)}),s}(this.dateFrom,this.dateTo,this.intervals),this.render()}onDragEnd(t){t&&!Object(s.isBlank)(t.detail.left)&&(this.handleLeftPos=t.detail.left,this.calcDates())}onResizeEnd(t){t&&!Object(s.isBlank)(t.detail.width)&&(this.handleWidth=t.detail.width,Object(s.isBlank)(t.detail.left)||(this.handleLeftPos=t.detail.left),this.calcDates())}calcDates(){const t=d(this.dateFrom,this.dateTo,this.handleLeftPos,this.handleLeftPos+this.handleWidth);this.dispatchEvent(new CustomEvent("sliderChange",{detail:t}))}incrementHandleLeftPos(){if(this.handleLeftPos+this.handleWidth<100){const t=this.handleLeftPos+1;this.handleLeftPos=Math.min(t,100-this.handleWidth),this.calcDates()}}decrementHandleLeftPos(){if(this.handleLeftPos>0){const t=this.handleLeftPos-1;this.handleLeftPos=Math.max(t,0),this.calcDates()}}zooming(){this.chartSliderWidth=100*this.zoom,this.handleLeftPos=0,this.createChartSlider()}setOffsetX(t,e,i){this._zoom=i,this.chartSliderWidth=100*this.zoom,this.minHandleTime=a(t,e),this.minHandleTime<3600&&(this.minHandleTime=3600),this.handleLeftPos=function(t,e,i,s){let n=l(t,e,a(t,i));return n+s>100&&(n=100-s),n=Math.max(0,Math.min(n,100)),n}(this.dateFrom,this.dateTo,t,this.handleWidth),this.createChartSlider(),requestAnimationFrame(()=>{const t=(this.scrollWidth-this.clientWidth)*this.handleLeftPos/100;this.scrollLeft=t})}renderInit(){this.classList.add("chart-slider-wrapper"),this.tabIndex=0,this.slider=document.createElement("div"),this.slider.classList.add("chart-slider"),this.append(this.slider),this.sliderLine=document.createElement("div"),this.sliderLine.classList.add("chart-slider__line"),this.slider.append(this.sliderLine),this.sliderAxis=document.createElement("div"),this.sliderAxis.classList.add("chart-slider__axis"),this.slider.append(this.sliderAxis),this.sliderHandle=document.createElement("div"),this.sliderHandle.classList.add("chart-slider__handle"),this.sliderHandleBody=document.createElement("div"),this.sliderHandleBody.classList.add("chart-slider__handle__body"),this.sliderHandle.append(this.sliderHandleBody);this.draggableDirective=new n.a(this.sliderHandle,{dragX:!0,dragY:!1,inViewport:!0,relative:!0,inPercentage:!0,stopPropagation:!0}),this.resizableDirective=new c(this.sliderHandle,!0),this.dragToScroll=new h.a(this,{dragX:!0,dragY:!1})}render(){const t=this.chartSliderData.map(t=>{const e=document.createElement("div");e.classList.add("chart-slider__line__col"),e.style.width=t.widthPercent+this.unit,e.style.left=t.positionPercent+this.unit;const i=t.items.map(t=>{const e=document.createElement("div");return e.classList.add("chart-slider__line__col__item"),e.style.height=t.heightPercent+this.unit,e.style.backgroundColor=t.color,e});return e.append(...i),e});this.sliderLine.innerHTML="",this.sliderLine.append(...t),this.sliderLine.append(this.sliderHandle);const e=this.xAxisLabels.map((t,e)=>{const i=document.createElement("div");return i.classList.add("chart-slider__axis__item"),e===this.xAxisLabels.length-1&&i.classList.add("last"),i.style.width=t.widthPercent+this.unit,i.style.left=t.positionPercent+this.unit,i.textContent=t.name,i});this.sliderAxis.innerHTML="",this.sliderAxis.append(...e),this.updateStyles()}updateStyles(){this.slider.style.width=this.chartSliderWidth+this.unit,this.sliderHandle.style.width=this.handleWidth+this.unit,this.sliderHandle.style.minWidth=this.handleMinWidth+this.unit,this.sliderHandle.style.maxWidth=this.handleMaxWidth+this.unit,this.sliderHandle.style.left=this.handleLeftPos+this.unit}onMouseDown(t){this.draggableDirective.start(t)}onTouchStart(t){this.draggableDirective.start(t)}}customElements.define("web-chart-slider",m)},148:function(t,e,i){"use strict";i(144),i(132)},19:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return s}));i(148);class s{get template(){return'<web-chart-slider class="chart-slider-demo scrollbar"></web-chart-slider>\n    <button class="dt-button" id="button-zoom">zoom 2</button>\n    <button class="dt-button" id="button-offset">set offset</button>\n    <span id="result"></span>'}load(){const t=document.querySelector("web-chart-slider");t.handleMultiplier=6;const e=new Date;t.dateFrom=new Date(e.getFullYear(),e.getMonth(),1),t.dateTo=new Date(e.getFullYear(),e.getMonth()+1,1),t.intervals=function(){const t=new Date;return[{dtFrom:new Date(t.getFullYear(),t.getMonth(),1),dtTo:new Date(t.getFullYear(),t.getMonth(),2),label:"Test1",color:"#F5A363"},{dtFrom:new Date(t.getFullYear(),t.getMonth(),4),dtTo:new Date(t.getFullYear(),t.getMonth(),5),label:"Test2",color:"#7FB6EA"},{dtFrom:new Date(t.getFullYear(),t.getMonth(),10),dtTo:new Date(t.getFullYear(),t.getMonth(),11),label:"Test3",color:"#7FB6EA"},{dtFrom:new Date(t.getFullYear(),t.getMonth(),15),dtTo:new Date(t.getFullYear(),t.getMonth(),17),label:"Test4",color:"#B87FE5"},{dtFrom:new Date(t.getFullYear(),t.getMonth(),16),dtTo:new Date(t.getFullYear(),t.getMonth(),17),label:"Test5",color:"#F5A363"},{dtFrom:new Date(t.getFullYear(),t.getMonth(),16),dtTo:new Date(t.getFullYear(),t.getMonth(),17),label:"Test6",color:"#7FB6EA"},{dtFrom:new Date(t.getFullYear(),t.getMonth(),22),dtTo:new Date(t.getFullYear(),t.getMonth(),26),label:"Test7",color:"#7FB6EA"}]}();const i=document.querySelector("#result");t.addEventListener("sliderChange",t=>{const e=t.detail.dateFrom.toLocaleDateString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),s=t.detail.dateTo.toLocaleDateString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});i.textContent=e+" - "+s});document.querySelector("#button-zoom").addEventListener("click",()=>{t.zoom=2});document.querySelector("#button-offset").addEventListener("click",()=>{const i=new Date(e.getFullYear(),e.getMonth(),5),s=new Date(e.getFullYear(),e.getMonth(),7);t.setOffsetX(i,s,t.zoom)})}}}}]);