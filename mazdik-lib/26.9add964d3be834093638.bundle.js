(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{28:function(t,s,e){"use strict";e.r(s);class i{constructor(){this.cache=[]}calcScrollLength(t){return this.cache[t-1]}initCache(t,s){const e=t.length;this.cache=new Array(e);for(let t=0;t<e;++t)this.cache[t]=0;t.forEach((t,i)=>{for(let h=i;h<e;h++)this.cache[h]+=t[s]})}calcRowIndex(t){if(0===t)return 0;let s=-1;const e=this.cache.length;for(let i=e;i>=0;i--){const h=s+i;h<e&&t>=this.cache[h]&&(t-=this.cache[h],s=h)}return s+1}getRowOffset(t){return t<0?0:this.cache[t]}}var h=e(0);class o extends HTMLElement{constructor(){super(),this.itemsPerRow=20,this.scrollYPos=0,this.scrollXPos=0,this.prevScrollYPos=0,this.prevScrollXPos=0,this.rowHeightCache=new i,this.classList.add("dt-scroller","dt-virtual-scroll"),this.contentEl=document.createElement("div"),this.contentEl.classList.add("dt-scrollable-content"),this.append(this.contentEl),this.paddingEl=document.createElement("div"),this.paddingEl.classList.add("dt-total-padding"),this.append(this.paddingEl),this.scrollListener=this.onScrolled.bind(this),this.addEventListener("scroll",this.scrollListener)}get items(){return this._items}set items(t){this._items=t,this.initChunkRows()}get viewRows(){return this._viewRows}set viewRows(t){this._viewRows=t,this.contentEl.innerHTML="",this.contentEl.append(...t),this.dispatchEvent(new CustomEvent("viewRowsChange",{detail:t}))}disconnectedCallback(){this.removeEventListener("scroll",this.scrollListener)}initChunkRows(){Object(h.m)(this.items)||Object(h.m)(this.rowHeight)||(this.resetPosition(),this.chunkRows(!0))}onScrolled(t){const s=t.currentTarget;this.scrollYPos=s.scrollTop,this.scrollXPos=s.scrollLeft;let e=null;if(this.scrollYPos<this.prevScrollYPos?e="up":this.scrollYPos>this.prevScrollYPos&&(e="down"),this.prevScrollYPos!==this.scrollYPos||this.prevScrollXPos!==this.scrollXPos){if(e){this.chunkRows();let t=this.rowHeight*this.start;this.rowHeightProp&&(t=this.rowHeightCache.getRowOffset(this.start-1)),requestAnimationFrame(()=>{this.contentEl.style.transform=`translateY(${t}px)`})}this.prevScrollYPos=this.scrollYPos,this.prevScrollXPos=this.scrollXPos;const t={direction:e,scrollYPos:this.scrollYPos,scrollXPos:this.scrollXPos};this.dispatchEvent(new CustomEvent("scrollChange",{detail:t}))}}setOffsetY(t){this.scrollTop=t}setPageOffsetY(t){const s=this.itemsPerRow*(t-1);let e=0;e=this.rowHeightProp?this.rowHeightCache.getRowOffset(s-1):this.rowHeight*s,this.setOffsetY(e)}calculateDimensions(){if(this.rowHeightProp&&this.rowHeightCache.initCache(this.items,this.rowHeightProp),this.items&&this.items.length){const t=this.items.length;this.rowHeightProp?this.scrollLength=this.rowHeightCache.calcScrollLength(t):this.scrollLength=this.rowHeight*t,this.paddingEl.style.height=this.scrollLength+"px"}let t=parseFloat(this.style.height);t&&this.rowHeight?this.itemsPerRow=Math.round(t/this.rowHeight):(t=this.itemsPerRow*this.rowHeight,t>0&&(t-=this.rowHeight)),this.style.height=t+"px"}chunkRows(t=!1){this.calculateDimensions();const s=this.items.length;if(this.rowHeightProp?this.start=this.rowHeightCache.calcRowIndex(this.scrollYPos):this.start=Math.floor(this.scrollYPos/this.rowHeight),this.end=Math.min(s,this.start+this.itemsPerRow),this.end-this.start<this.itemsPerRow&&(this.start=s-this.itemsPerRow,this.start=Math.max(this.start,0),this.end=s),this.start!==this.previousStart||this.end!==this.previousEnd||!0===t){const t=this.items.slice(this.start,this.end);this.previousStart=this.start,this.previousEnd=this.end,this.viewRows=t}}resetPosition(){this.start=0,this.end=0,this.previousStart=0,this.previousEnd=0}}customElements.define("web-scroller",o),e.d(s,"default",(function(){return r}));class r{get template(){return'<web-scroller class="scroller-demo"></web-scroller>'}load(){const t=Array.from({length:5e3}).map((t,s)=>{const e=document.createElement("div");return e.textContent=`Item #${s+1}`,e}),s=document.querySelector("web-scroller");s.style.height="500px",s.rowHeight=40,s.itemsPerRow=20,s.items=t}}}}]);