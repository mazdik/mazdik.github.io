(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{33:function(e,t,s){"use strict";s.r(t);s(42);class a extends HTMLElement{constructor(){super(),this.intervals=[],this.countIntervals=12}set points(e){this.prepareData(),this.render(),this.renderStatesline(e)}connectedCallback(){this.classList.add("states-line-interval")}prepareData(){const e=this.getDiffTime(this.dateFrom,this.dateTo),t=e/this.countIntervals,s=t/e*100,a=[];for(let n=0;n<=this.countIntervals;n++){const r={dateFrom:new Date(this.dateFrom.getTime()+1e3*t*n),dateTo:new Date(this.dateFrom.getTime()+1e3*t*(n+1)),percent:s*n,label:""};r.label=this.createLabel(r.dateFrom,e),a.push(r)}this.intervals=a}createLabel(e,t){const s=this.toISOStringIgnoreTZ(e);if(t<=86400){const t=s.substr(11,5);return"00:00"===t&&86400===this.getDiffTime(this.dateFrom,e)?"24:00":t}return s.substr(0,10)}getDiffTime(e,t){return(t.getTime()-e.getTime())/1e3}toISOStringIgnoreTZ(e){return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString()}render(){const e=[];this.intervals.forEach(t=>{const s=document.createElement("div");s.classList.add("state-line-interval"),s.style.left=t.percent+"%",e.push(s);const a=document.createElement("div");a.classList.add("state-line-interval-label"),a.style.left=t.percent+"%",a.textContent=t.label,e.push(a)}),this.innerHTML="",this.append(...e)}renderStatesline(e){const t=document.createElement("web-states-line");this.append(t),t.dateFrom=this.dateFrom,t.dateTo=this.dateTo,t.points=e}}customElements.define("web-states-line-interval",a),s.d(t,"default",(function(){return n}));class n{get template(){return'<div class="states-line-interval-demo">\n      <web-states-line-interval></web-states-line-interval>\n    </div>'}load(){const e=[[{dt:new Date(2020,5,1,0,0),label:"stop",color:"DarkSalmon"},{dt:new Date(2020,5,1,4,10),label:"work",color:"DarkSeaGreen"},{dt:new Date(2020,5,1,8,33),label:"stop",color:"DarkSalmon"},{dt:new Date(2020,5,1,12,22),label:"work",color:"DarkSeaGreen"},{dt:new Date(2020,5,1,16,45),label:"stop",color:"DarkSalmon"},{dt:new Date(2020,5,1,20,0),label:"work",color:"DarkSeaGreen"}],[{dt:new Date(2020,5,1,0,0),label:"stop",color:"DarkSalmon"},{dt:new Date(2020,5,1,12,0),label:"work",color:"DarkSeaGreen"}]],t=document.querySelector("web-states-line-interval");t.dateFrom=new Date(2020,5,1),t.dateTo=new Date(2020,5,2),t.points=e}}},42:function(e,t,s){"use strict";class a extends HTMLElement{constructor(){super(),this.series=[]}set points(e){this.init(),this.series=this.prepareSeries(e),this.render()}connectedCallback(){this.classList.add("states-line")}init(){this.dateFrom||(this.dateFrom=new Date),this.dateTo||(this.dateTo=new Date(this.dateFrom.getFullYear(),this.dateFrom.getMonth(),this.dateFrom.getDate()+1))}prepareSeries(e){return e.map(e=>this.prepareLines(e))}prepareLines(e){const t=this.getDiffTime(this.dateFrom,this.dateTo),s=e.sort((e,t)=>e.dt.getTime()-t.dt.getTime()),a=[];return s.forEach((e,n)=>{let r=s[n].dt,i=n===s.length-1?this.dateTo:s[n+1].dt;r<this.dateFrom&&(r=this.dateFrom),i>this.dateTo&&(i=this.dateTo);const o=this.getDiffTime(r,i),l=this.formatTime(o),c={dt:e.dt,dateFrom:r,dateTo:i,time:o,percent:o/t*100,class:n%2==0?"state-bottom":"state-top",color:e.color,tooltip:`${e.label} (${l})`};o>0&&a.push(c)}),this.checkPercent(a),a}getDiffTime(e,t){return(t.getTime()-e.getTime())/1e3}checkPercent(e){const t=Math.round(e.reduce((e,t)=>e+t.percent,0));t>100&&t<100&&console.log("StateLine percent: "+t)}formatTime(e){if(86400===e)return"24:00:00";if(e<86400){const t=new Date(null);return t.setSeconds(e),t.toISOString().substr(11,8)}{const t=Math.floor(e/86400);e-=3600*t*24;const s=Math.floor(e/3600);e-=3600*s;const a=Math.floor(e/60);return t+" "+s+":"+a+":"+(e-=60*a)}}render(){const e=[];this.series.forEach(t=>{const s=document.createElement("div");s.classList.add("state-line"),e.push(s),t.forEach(e=>{const t=document.createElement("div");t.classList.add("state-line-col"),t.classList.add(e.class),t.style.width=e.percent+"%",t.style.backgroundColor=e.color,t.title=e.tooltip,s.append(t)})}),this.innerHTML="",this.append(...e)}}customElements.define("web-states-line",a)}}]);