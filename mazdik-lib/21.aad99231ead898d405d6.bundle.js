(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{122:function(t,e,i){"use strict";var n=i(0);class s extends HTMLElement{constructor(){super(),this.selectPlaceholder="",this.type="text",this.listeners=[],this.initValue=!1}get editing(){return this._editing}set editing(t){this._editing=t,this.renderInput()}get value(){return this._value}set value(t){this._value=t,this.firstInitValue(),this.setViewValue()}get options(){return this._options}set options(t){this._options=t,this.loadSelect(),this.setViewValue()}get isDateType(){return Object(n.inputIsDateType)(this.type)}connectedCallback(){this.isInitialized||(this.onInit(),this.isInitialized=!0)}disconnectedCallback(){this.removeEventListeners()}onInit(){this.classList.add("dt-inline-editor"),this.inlineDataView=document.createElement("div"),this.inlineDataView.classList.add("dt-inline-data"),this.append(this.inlineDataView),this.select=document.createElement("select"),this.input=document.createElement("input"),this.addEventListeners()}addEventListeners(){this.listeners=[{eventName:"input",target:this.input,handler:this.onInput.bind(this)},{eventName:"focus",target:this.input,handler:this.onInputFocus.bind(this)},{eventName:"blur",target:this.input,handler:this.onInputBlur.bind(this)},{eventName:"change",target:this.select,handler:this.onInput.bind(this)},{eventName:"focus",target:this.select,handler:this.onInputFocus.bind(this)},{eventName:"blur",target:this.select,handler:this.onInputBlur.bind(this)}],this.listeners.forEach(t=>{t.target.addEventListener(t.eventName,t.handler)})}removeEventListeners(){this.listeners.forEach(t=>{t.target.removeEventListener(t.eventName,t.handler)})}onInput(t){"number"===this.type?this.value=Object(n.isBlank)(t.target.value)?null:parseFloat(t.target.value):this.isDateType?Object(n.checkStrDate)(t.target.value)&&(this.value=new Date(t.target.value)):this.value=t.target.value,this.dispatchEvent(new CustomEvent("valueChange",{detail:this.value}))}onInputFocus(){this.dispatchEvent(new CustomEvent("focusChange"))}onInputBlur(){this.dispatchEvent(new CustomEvent("blurChange"))}appendInput(){"select"===this.type?(this.append(this.select),this.select.focus()):(this.input.type=this.type,"number"===this.type&&(this.input.step="any"),this.input.value=this.getInputFormattedValue(),this.append(this.input),this.input.focus())}removeInput(){this.contains(this.input)&&(this.input=this.removeChild(this.input)),this.contains(this.select)&&(this.select=this.removeChild(this.select))}renderInput(){this.editing?(this.inlineDataView.style.display="none",this.appendInput()):(this.inlineDataView.style.display="block",this.removeInput())}firstInitValue(){this.initValue||(this.input.value=this.getInputFormattedValue(),this.setSelectedIndex(),this.initValue=!0)}loadSelect(){const t=new Option(this.selectPlaceholder,"",!1,!0);if(t.disabled=!0,t.hidden=!0,this.select.options.add(t),this.options&&this.options.length)for(const t of this.options)this.select.options.add(new Option(t.name,t.id));this.setSelectedIndex()}setSelectedIndex(){if(this.options&&this.options.length){let t=this.options.findIndex(t=>t.id===(this.value||"").toString());t=t>=0?t+1:t,this.select.selectedIndex=t}}getInputFormattedValue(){const t=this.isDateType?Object(n.inputFormattedDate)(this.type,this.value):this.value;return Object(n.isBlank)(t)?null:t}setViewValue(){let t="";if(this.options&&this.options.length){const e=this.options.find(t=>t.id===(this.value||"").toString());t=e?e.name:""}else if(this.value instanceof Date)if("date"===this.type)t=this.value.toLocaleDateString();else{const e=this.value.toLocaleTimeString();t=this.value.toLocaleDateString()+" "+e}else t=(this.value||"").toString();this.inlineDataView.innerText=t}}customElements.define("web-inline-edit",s)},140:function(t,e){t.exports='<p>Input. Type: text</p>\n<div class="inline-edit-demo">\n  <web-inline-edit class="inline-edit-demo-cell" id="inline-edit1"></web-inline-edit>\n  &nbsp;\n  <button class="dt-button" id="button1">Edit</button>\n</div>\n\n<p>Select. Type: number</p>\n<div class="inline-edit-demo">\n  <web-inline-edit class="inline-edit-demo-cell" id="inline-edit2"></web-inline-edit>\n  &nbsp;\n  <button class="dt-button" id="button2">Edit</button>\n</div>\n\n<p>Input. Type: date</p>\n<div class="inline-edit-demo">\n  <web-inline-edit class="inline-edit-demo-cell" id="inline-edit3"></web-inline-edit>\n  &nbsp;\n  <button class="dt-button" id="button3">Edit</button>\n</div>\n'},42:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return l}));var n=i(140),s=i.n(n);i(122);class l{get template(){return s.a}load(){this.demo1(),this.demo2(),this.demo3()}demo1(){const t=document.querySelector("#inline-edit1");t.type="text",t.value="string";const e=document.querySelector("#button1");e.addEventListener("click",()=>{t.editing=!t.editing,e.innerText=t.editing?"View":"Edit"}),t.addEventListener("valueChange",t=>{console.log(t.detail)})}demo2(){const t=document.querySelector("#inline-edit2");t.type="select",t.value=2;t.selectPlaceholder="placeholder",t.options=[{id:"1",name:"Select 1"},{id:"2",name:"Select 2"},{id:"3",name:"Select 3"},{id:"4",name:"Select 4"},{id:"5",name:"Select 5"},{id:"6",name:"Select 6"}];const e=document.querySelector("#button2");e.addEventListener("click",()=>{t.editing=!t.editing,e.innerText=t.editing?"View":"Edit"}),t.addEventListener("valueChange",t=>{console.log(t.detail)})}demo3(){const t=document.querySelector("#inline-edit3");t.type="date",t.value=new Date;const e=document.querySelector("#button3");e.addEventListener("click",()=>{t.editing=!t.editing,e.innerText=t.editing?"View":"Edit"}),t.addEventListener("valueChange",t=>{console.log(t.detail)})}}}}]);